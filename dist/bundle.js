/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./node_modules/@100mslive/hms-video-store/dist/index.js":
/*!***************************************************************!*\
  !*** ./node_modules/@100mslive/hms-video-store/dist/index.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"HMSAudioPluginType\": () => (/* reexport safe */ _100mslive_hms_video__WEBPACK_IMPORTED_MODULE_0__.HMSAudioPluginType),\n/* harmony export */   \"HMSLogLevel\": () => (/* reexport safe */ _100mslive_hms_video__WEBPACK_IMPORTED_MODULE_0__.HMSLogLevel),\n/* harmony export */   \"HMSMessageType\": () => (/* binding */ xe),\n/* harmony export */   \"HMSNotificationSeverity\": () => (/* binding */ R),\n/* harmony export */   \"HMSNotificationTypes\": () => (/* binding */ m),\n/* harmony export */   \"HMSPlaylistType\": () => (/* binding */ M),\n/* harmony export */   \"HMSReactiveStore\": () => (/* binding */ O),\n/* harmony export */   \"HMSRoomState\": () => (/* binding */ h),\n/* harmony export */   \"HMSStats\": () => (/* binding */ ue),\n/* harmony export */   \"HMSVideoPluginCanvasContextType\": () => (/* reexport safe */ _100mslive_hms_video__WEBPACK_IMPORTED_MODULE_0__.HMSVideoPluginCanvasContextType),\n/* harmony export */   \"HMSVideoPluginType\": () => (/* reexport safe */ _100mslive_hms_video__WEBPACK_IMPORTED_MODULE_0__.HMSVideoPluginType),\n/* harmony export */   \"createDefaultStatsStore\": () => (/* binding */ oe),\n/* harmony export */   \"createDefaultStoreState\": () => (/* binding */ ie),\n/* harmony export */   \"parsedUserAgent\": () => (/* reexport safe */ _100mslive_hms_video__WEBPACK_IMPORTED_MODULE_0__.parsedUserAgent),\n/* harmony export */   \"selectAppData\": () => (/* binding */ Uo),\n/* harmony export */   \"selectAppDataByPath\": () => (/* binding */ Ko),\n/* harmony export */   \"selectAudioPlaylist\": () => (/* binding */ st),\n/* harmony export */   \"selectAudioPlaylistTrackByPeerID\": () => (/* binding */ Go),\n/* harmony export */   \"selectAudioTrackByPeerID\": () => (/* binding */ Kt),\n/* harmony export */   \"selectAudioTrackVolume\": () => (/* binding */ lt),\n/* harmony export */   \"selectAudioVolumeByPeerID\": () => (/* binding */ er),\n/* harmony export */   \"selectAuxiliaryAudioByPeerID\": () => (/* binding */ Fo),\n/* harmony export */   \"selectAuxiliaryTracksByPeerID\": () => (/* binding */ Bo),\n/* harmony export */   \"selectAvailableRoleNames\": () => (/* binding */ go),\n/* harmony export */   \"selectBroadcastMessages\": () => (/* binding */ Vt),\n/* harmony export */   \"selectBroadcastMessagesUnreadCount\": () => (/* binding */ ir),\n/* harmony export */   \"selectCameraStreamByPeerID\": () => (/* binding */ Vo),\n/* harmony export */   \"selectConnectionQualities\": () => (/* binding */ eo),\n/* harmony export */   \"selectConnectionQualityByPeerID\": () => (/* binding */ $o),\n/* harmony export */   \"selectDegradedTracks\": () => (/* binding */ po),\n/* harmony export */   \"selectDevices\": () => (/* binding */ Zi),\n/* harmony export */   \"selectDidIJoinWithin\": () => (/* binding */ Ir),\n/* harmony export */   \"selectDominantSpeaker\": () => (/* binding */ ro),\n/* harmony export */   \"selectFullAppData\": () => (/* binding */ Te),\n/* harmony export */   \"selectHLSState\": () => (/* binding */ yo),\n/* harmony export */   \"selectHMSMessages\": () => (/* binding */ ne),\n/* harmony export */   \"selectHMSMessagesCount\": () => (/* binding */ Fe),\n/* harmony export */   \"selectHMSStats\": () => (/* binding */ Ds),\n/* harmony export */   \"selectIsAllowedToPublish\": () => (/* binding */ gr),\n/* harmony export */   \"selectIsAllowedToSubscribe\": () => (/* binding */ ho),\n/* harmony export */   \"selectIsAudioLocallyMuted\": () => (/* binding */ ct),\n/* harmony export */   \"selectIsConnectedToRoom\": () => (/* binding */ At),\n/* harmony export */   \"selectIsInPreview\": () => (/* binding */ mo),\n/* harmony export */   \"selectIsLocalAudioEnabled\": () => (/* binding */ no),\n/* harmony export */   \"selectIsLocalAudioPluginPresent\": () => (/* binding */ kr),\n/* harmony export */   \"selectIsLocalScreenShared\": () => (/* binding */ ye),\n/* harmony export */   \"selectIsLocalVideoDisplayEnabled\": () => (/* binding */ $e),\n/* harmony export */   \"selectIsLocalVideoEnabled\": () => (/* binding */ He),\n/* harmony export */   \"selectIsLocalVideoPluginPresent\": () => (/* binding */ fr),\n/* harmony export */   \"selectIsLocallyMutedByPeerID\": () => (/* binding */ zo),\n/* harmony export */   \"selectIsPeerAudioEnabled\": () => (/* binding */ Yo),\n/* harmony export */   \"selectIsPeerVideoEnabled\": () => (/* binding */ Xo),\n/* harmony export */   \"selectIsScreenShareLocallyMutedByPeerID\": () => (/* binding */ Zo),\n/* harmony export */   \"selectIsSomeoneScreenSharing\": () => (/* binding */ ao),\n/* harmony export */   \"selectLocalAudioTrackID\": () => (/* binding */ A),\n/* harmony export */   \"selectLocalMediaSettings\": () => (/* binding */ qe),\n/* harmony export */   \"selectLocalPeer\": () => (/* binding */ b),\n/* harmony export */   \"selectLocalPeerID\": () => (/* binding */ $),\n/* harmony export */   \"selectLocalPeerName\": () => (/* binding */ so),\n/* harmony export */   \"selectLocalPeerRole\": () => (/* binding */ ae),\n/* harmony export */   \"selectLocalPeerRoleName\": () => (/* binding */ io),\n/* harmony export */   \"selectLocalTrackIDs\": () => (/* binding */ je),\n/* harmony export */   \"selectLocalVideoTrackID\": () => (/* binding */ L),\n/* harmony export */   \"selectMessageIDsInOrder\": () => (/* binding */ Be),\n/* harmony export */   \"selectMessagesByPeerID\": () => (/* binding */ or),\n/* harmony export */   \"selectMessagesByRole\": () => (/* binding */ rr),\n/* harmony export */   \"selectMessagesMap\": () => (/* binding */ Ve),\n/* harmony export */   \"selectMessagesUnreadCountByPeerID\": () => (/* binding */ ar),\n/* harmony export */   \"selectMessagesUnreadCountByRole\": () => (/* binding */ nr),\n/* harmony export */   \"selectPeerAudioByID\": () => (/* binding */ jo),\n/* harmony export */   \"selectPeerByCondition\": () => (/* binding */ Pr),\n/* harmony export */   \"selectPeerByID\": () => (/* binding */ x),\n/* harmony export */   \"selectPeerCount\": () => (/* binding */ to),\n/* harmony export */   \"selectPeerMetadata\": () => (/* binding */ lr),\n/* harmony export */   \"selectPeerName\": () => (/* binding */ Sr),\n/* harmony export */   \"selectPeerNameByID\": () => (/* binding */ _o),\n/* harmony export */   \"selectPeerScreenSharing\": () => (/* binding */ Ot),\n/* harmony export */   \"selectPeerSharingAudio\": () => (/* binding */ co),\n/* harmony export */   \"selectPeerSharingAudioPlaylist\": () => (/* binding */ uo),\n/* harmony export */   \"selectPeerSharingVideoPlaylist\": () => (/* binding */ So),\n/* harmony export */   \"selectPeers\": () => (/* binding */ Q),\n/* harmony export */   \"selectPeersByCondition\": () => (/* binding */ Rr),\n/* harmony export */   \"selectPeersByRole\": () => (/* binding */ cr),\n/* harmony export */   \"selectPeersMap\": () => (/* binding */ D),\n/* harmony export */   \"selectPeersScreenSharing\": () => (/* binding */ lo),\n/* harmony export */   \"selectPeersWithAudioStatus\": () => (/* binding */ Mr),\n/* harmony export */   \"selectPermissions\": () => (/* binding */ Qe),\n/* harmony export */   \"selectRTMPState\": () => (/* binding */ Ho),\n/* harmony export */   \"selectRecordingState\": () => (/* binding */ To),\n/* harmony export */   \"selectRemotePeers\": () => (/* binding */ oo),\n/* harmony export */   \"selectRoleByRoleName\": () => (/* binding */ yr),\n/* harmony export */   \"selectRoleChangeRequest\": () => (/* binding */ mr),\n/* harmony export */   \"selectRolesMap\": () => (/* binding */ _),\n/* harmony export */   \"selectRoom\": () => (/* binding */ I),\n/* harmony export */   \"selectRoomID\": () => (/* binding */ zi),\n/* harmony export */   \"selectRoomStartTime\": () => (/* binding */ ko),\n/* harmony export */   \"selectRoomStarted\": () => (/* binding */ We),\n/* harmony export */   \"selectRoomState\": () => (/* binding */ E),\n/* harmony export */   \"selectScreenShareAudioByPeerID\": () => (/* binding */ at),\n/* harmony export */   \"selectScreenShareByPeerID\": () => (/* binding */ Jo),\n/* harmony export */   \"selectScreenSharesByPeerId\": () => (/* binding */ nt),\n/* harmony export */   \"selectScreenshareAudioVolumeByPeerID\": () => (/* binding */ tr),\n/* harmony export */   \"selectSessionId\": () => (/* binding */ fo),\n/* harmony export */   \"selectSimulcastLayerByTrack\": () => (/* binding */ sr),\n/* harmony export */   \"selectSpeakers\": () => (/* binding */ Ct),\n/* harmony export */   \"selectTrackAudioByID\": () => (/* binding */ qo),\n/* harmony export */   \"selectTrackByID\": () => (/* binding */ ee),\n/* harmony export */   \"selectTracksMap\": () => (/* binding */ H),\n/* harmony export */   \"selectUnreadHMSMessagesCount\": () => (/* binding */ Mo),\n/* harmony export */   \"selectVideoPlaylist\": () => (/* binding */ it),\n/* harmony export */   \"selectVideoPlaylistAudioTrackByPeerID\": () => (/* binding */ Qo),\n/* harmony export */   \"selectVideoPlaylistVideoTrackByPeerID\": () => (/* binding */ Wo),\n/* harmony export */   \"selectVideoTrackByPeerID\": () => (/* binding */ Ut)\n/* harmony export */ });\n/* harmony import */ var immer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! immer */ \"./node_modules/immer/dist/immer.esm.mjs\");\n/* harmony import */ var zustand_vanilla__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! zustand/vanilla */ \"./node_modules/zustand/esm/vanilla.js\");\n/* harmony import */ var zustand_shallow__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! zustand/shallow */ \"./node_modules/zustand/esm/shallow.js\");\n/* harmony import */ var _100mslive_hms_video__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @100mslive/hms-video */ \"./node_modules/@100mslive/hms-video/dist/index.js\");\n/* harmony import */ var reselect__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! reselect */ \"./node_modules/reselect/es/index.js\");\n/* harmony import */ var eventemitter2__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! eventemitter2 */ \"./node_modules/eventemitter2/lib/eventemitter2.js\");\n/* harmony import */ var eventemitter2__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(eventemitter2__WEBPACK_IMPORTED_MODULE_2__);\nvar ht=Object.defineProperty,Tt=Object.defineProperties;var Ht=Object.getOwnPropertyDescriptors;var Ae=Object.getOwnPropertySymbols;var yt=Object.prototype.hasOwnProperty,ft=Object.prototype.propertyIsEnumerable;var Le=(s,e,t)=>e in s?ht(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,w=(s,e)=>{for(var t in e||(e={}))yt.call(e,t)&&Le(s,t,e[t]);if(Ae)for(var t of Ae(e))ft.call(e,t)&&Le(s,t,e[t]);return s},F=(s,e)=>Tt(s,Ht(e));var c=(s,e,t)=>new Promise((i,o)=>{var r=d=>{try{a(t.next(d))}catch(P){o(P)}},n=d=>{try{a(t.throw(d))}catch(P){o(P)}},a=d=>d.done?i(d.value):Promise.resolve(d.value).then(r,n);a((t=t.apply(s,e)).next())});var h;(function(a){a.Disconnected=\"Disconnected\",a.Preview=\"Preview\",a.Connecting=\"Connecting\",a.Connected=\"Connected\",a.Reconnecting=\"Reconnecting\",a.Disconnecting=\"Disconnecting\",a.Failed=\"Failed\"})(h||(h={}));var ie=()=>({room:{id:\"\",isConnected:!1,name:\"\",peers:[],shareableLink:\"\",localPeer:\"\",hasWaitingRoom:!1,roomState:h.Disconnected,recording:{browser:{running:!1},server:{running:!1},hls:{running:!1}},rtmp:{running:!1},hls:{running:!1,variants:[]},sessionId:\"\"},peers:{},tracks:{},playlist:{audio:{list:{},selection:{id:\"\",hasPrevious:!1,hasNext:!1},progress:0,volume:0,currentTime:0,playbackRate:1},video:{list:{},selection:{id:\"\",hasPrevious:!1,hasNext:!1},progress:0,volume:0,currentTime:0,playbackRate:1}},messages:{byID:{},allIDs:[]},speakers:{},connectionQualities:{},settings:{audioInputDeviceId:\"\",audioOutputDeviceId:\"\",videoInputDeviceId:\"\"},devices:{audioInput:[],audioOutput:[],videoInput:[]},roles:{},roleChangeRequests:[],errors:[]}),oe=()=>({peerStats:{},trackStats:{},localPeer:{id:\"\"}});var xe;(function(e){e.CHAT=\"chat\"})(xe||(xe={}));var R;(function(t){t.INFO=\"info\",t.ERROR=\"error\"})(R||(R={}));var m;(function(l){l.PEER_JOINED=\"PEER_JOINED\",l.PEER_LEFT=\"PEER_LEFT\",l.PEER_LIST=\"PEER_LIST\",l.NEW_MESSAGE=\"NEW_MESSAGE\",l.ERROR=\"ERROR\",l.RECONNECTING=\"RECONNECTING\",l.RECONNECTED=\"RECONNECTED\",l.TRACK_ADDED=\"TRACK_ADDED\",l.TRACK_REMOVED=\"TRACK_REMOVED\",l.TRACK_MUTED=\"TRACK_MUTED\",l.TRACK_UNMUTED=\"TRACK_UNMUTED\",l.TRACK_DEGRADED=\"TRACK_DEGRADED\",l.TRACK_RESTORED=\"TRACK_RESTORED\",l.TRACK_DESCRIPTION_CHANGED=\"TRACK_DESCRIPTION_CHANGED\",l.ROLE_UPDATED=\"ROLE_UPDATED\",l.CHANGE_TRACK_STATE_REQUEST=\"CHANGE_TRACK_STATE_REQUEST\",l.CHANGE_MULTI_TRACK_STATE_REQUEST=\"CHANGE_MULTI_TRACK_STATE_REQUEST\",l.ROOM_ENDED=\"ROOM_ENDED\",l.REMOVED_FROM_ROOM=\"REMOVED_FROM_ROOM\",l.DEVICE_CHANGE_UPDATE=\"DEVICE_CHANGE_UPDATE\",l.PLAYLIST_TRACK_ENDED=\"PLAYLIST_TRACK_ENDED\",l.NAME_UPDATED=\"NAME_UPDATED\",l.METADATA_UPDATED=\"METADATA_UPDATED\"})(m||(m={}));var M;(function(t){t.audio=\"audio\",t.video=\"video\"})(M||(M={}));var Oe=(s,e)=>{let t=he(Object.keys(s),Object.keys(e));for(let i of t){let o=s[i],r=e[i];Me(o,r)?(U(o.auxiliaryTracks,r.auxiliaryTracks)&&(r.auxiliaryTracks=o.auxiliaryTracks),Object.assign(o,r)):me(o,r)?delete s[i]:ge(o,r)&&(s[i]=r)}},Ne=(s,e)=>{let t=he(Object.keys(s),Object.keys(e));for(let i of t){let o=s[i],r=e[i];Me(o,r)?(vt(o,r),Object.assign(o,r)):me(o,r)?delete s[i]:ge(o,r)&&(s[i]=r)}},pe=(s,e)=>{let t=he(Object.keys(s),Object.keys(e));for(let i of t){let o=s[i],r=e[i];Me(o,r)?Object.assign(o,r):me(o,r)?delete s[i]:ge(o,r)&&(s[i]=r)}},vt=(s,e)=>{s.plugins&&U(s.plugins,e.plugins)&&(e.plugins=s.plugins),s.layerDefinitions&&U(s.layerDefinitions,e.layerDefinitions)&&(e.layerDefinitions=s.layerDefinitions)},Me=(s,e)=>s&&e,me=(s,e)=>s&&!e,ge=(s,e)=>!s&&e,U=(s,e)=>{if(s===e||s.length===0&&(e==null?void 0:e.length)===0)return!0;if(!s||!e||s.length!==e.length)return!1;for(let t=0;t<s.length;t++)if(s[t]!==e[t])return!1;return!0},he=(s,e)=>{let t=new Set;for(let i of s)t.add(i);for(let i of e)t.add(i);return Array.from(t)};var g=class{static convertPeer(e){var t,i,o;return{id:e.peerId,name:e.name,roleName:(t=e.role)==null?void 0:t.name,isLocal:e.isLocal,videoTrack:(i=e.videoTrack)==null?void 0:i.trackId,audioTrack:(o=e.audioTrack)==null?void 0:o.trackId,auxiliaryTracks:e.auxiliaryTracks.map(r=>r.trackId),customerUserId:e.customerUserId,customerDescription:e.metadata,metadata:e.metadata,joinedAt:e.joinedAt}}static convertTrack(e,t){let i={id:e.trackId,source:e.source,type:e.type,enabled:e.enabled,displayEnabled:e.enabled,peerId:e.peerId||t};return this.enrichTrack(i,e),i}static enrichTrack(e,t){let i=t.getMediaTrackSettings();e.source===\"screen\"&&e.type===\"video\"&&(e.displaySurface=i.displaySurface),e.height=i.height,e.width=i.width,t instanceof _100mslive_hms_video__WEBPACK_IMPORTED_MODULE_0__.HMSRemoteAudioTrack&&(e.volume=t.getVolume()||0),g.updateDeviceID(e,t),g.enrichVideoTrack(e,t),g.enrichPluginsDetails(e,t)}static updateDeviceID(e,t){var i;t instanceof _100mslive_hms_video__WEBPACK_IMPORTED_MODULE_0__.HMSLocalVideoTrack||t instanceof _100mslive_hms_video__WEBPACK_IMPORTED_MODULE_0__.HMSLocalAudioTrack?e.deviceID=t.settings.deviceId:e.deviceID=(i=t.getMediaTrackSettings())==null?void 0:i.deviceId}static enrichVideoTrack(e,t){t instanceof _100mslive_hms_video__WEBPACK_IMPORTED_MODULE_0__.HMSRemoteVideoTrack&&(e.layer=t.getSimulcastLayer(),e.degraded=t.degraded,U(t.getSimulcastDefinitions(),e.layerDefinitions)||(e.layerDefinitions=t.getSimulcastDefinitions()))}static enrichPluginsDetails(e,t){(t instanceof _100mslive_hms_video__WEBPACK_IMPORTED_MODULE_0__.HMSLocalVideoTrack||t instanceof _100mslive_hms_video__WEBPACK_IMPORTED_MODULE_0__.HMSLocalAudioTrack)&&(U(t.getPlugins(),e.plugins)||(e.plugins=t.getPlugins()))}static convertRoom(e){var r,n;let{recording:t,rtmp:i,hls:o}=g.convertRecordingStreamingState(e==null?void 0:e.recording,e==null?void 0:e.rtmp,e==null?void 0:e.hls);return{id:e.id,name:e.name,localPeer:(n=(r=e.localPeer)==null?void 0:r.peerId)!=null?n:\"\",hasWaitingRoom:e.hasWaitingRoom,shareableLink:e.shareableLink,recording:t,rtmp:i,hls:o,sessionId:e.sessionId,startedAt:e.startedAt,joinedAt:e.joinedAt,peerCount:e.peerCount}}static convertMessage(e){var t,i,o,r,n,a,d;return{sender:(t=e.sender)==null?void 0:t.peerId,senderName:(i=e.sender)==null?void 0:i.name,senderRole:(r=(o=e.sender)==null?void 0:o.role)==null?void 0:r.name,senderUserId:(n=e.sender)==null?void 0:n.customerUserId,recipientPeer:(a=e.recipientPeer)==null?void 0:a.peerId,recipientRoles:(d=e.recipientRoles)==null?void 0:d.map(P=>P.name),time:e.time,type:e.type,message:e.message}}static convertRoles(e){let t={};return e&&e.forEach(i=>{t[i.name]=i}),t}static convertRoleChangeRequest(e){var t;return{requestedBy:(t=e.requestedBy)==null?void 0:t.peerId,roleName:e.role.name,token:e.token}}static convertException(e){return{code:e.code,action:e.action,name:e.name,message:e.message,description:e.description,isTerminal:e.isTerminal,nativeError:e.nativeError,timestamp:new Date}}static convertDeviceChangeUpdate(e){let t={devices:e.devices,selection:e.selection,type:e.type};return e.error&&(t.error=this.convertException(e.error)),t}static convertPlaylist(e){let t=this.getConvertedPlaylistType(e,M.audio),i=this.getConvertedPlaylistType(e,M.video);return{audio:t,video:i}}static convertPlaylistItem(e,t){let i=t.type,o=e.getCurrentSelection(i),r=e.isPlaying(i),n=t.url===(o==null?void 0:o.url);return F(w({},t),{type:t.type,selected:n,playing:n&&r})}static getConvertedPlaylistType(e,t){let i={},o=e.getCurrentSelection(t),r=e.getCurrentProgress(t),n=e.getVolume(t),a=e.getList(t),d=e.getCurrentIndex(t);return e.getList(t).forEach(P=>{i[P.id]=g.convertPlaylistItem(e,P)}),{list:i,selection:{id:o==null?void 0:o.id,hasPrevious:d>0,hasNext:d<a.length-1},progress:r,volume:n,currentTime:e.getCurrentTime(t),playbackRate:e.getPlaybackRate(t)}}static convertRecordingStreamingState(e,t,i){var o;return{recording:{browser:w({running:!1},e==null?void 0:e.browser),server:w({running:!1},e==null?void 0:e.server),hls:w({running:!1},e==null?void 0:e.hls)},rtmp:w({running:!1},t),hls:{variants:((o=i==null?void 0:i.variants)==null?void 0:o.map(r=>r))||[],running:!!(i==null?void 0:i.running),error:i==null?void 0:i.error}}}};function j(s,e,t=Et){let i,o;if(e)for(let r of e.auxiliaryTracks){let n=s[r];t(n)&&(o=Y(n)?n:o,i=X(n)?n:i)}return{video:i,audio:o}}function Y(s){return s&&s.type===\"audio\"}function X(s){return s&&s.type===\"video\"}function Et(s){return s&&s.source===\"screen\"}function re(s){return s&&s.source===\"audioplaylist\"}function z(s){return s&&s.source===\"videoplaylist\"}function Ke(s){return Boolean(s==null?void 0:s.degraded)}function W(s,e){return e&&s.tracks[e]?s.tracks[e].enabled:!1}function _e(s,e){return e&&s.tracks[e]?s.tracks[e].displayEnabled:!1}var I=s=>s.room,zi=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(I,s=>s.id),D=s=>s.peers,Ve=s=>s.messages.byID,Be=s=>s.messages.allIDs,H=s=>s.tracks,qe=s=>s.settings,Te=s=>s.appData,Zi=s=>s.devices,Ct=s=>s.speakers,eo=s=>s.connectionQualities,At=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)([I],s=>s&&s.isConnected),to=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)([At,I],(s,e)=>s?e.peerCount!==void 0?e.peerCount||1:e.peers.length:Math.max(e.peerCount!==void 0?e.peerCount:e.peers.length-1,0)),Q=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)([I,D],(s,e)=>s.peers.map(t=>e[t])),Lt=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(H,s=>Object.values(s)),b=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(I,D,(s,e)=>e[s.localPeer]),$=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(I,s=>s.localPeer),so=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(b,s=>s==null?void 0:s.name),io=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(b,s=>s==null?void 0:s.roleName),A=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(b,s=>s==null?void 0:s.audioTrack),L=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(b,s=>s==null?void 0:s.videoTrack),xt=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(b,s=>s==null?void 0:s.auxiliaryTracks),je=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)([A,L,xt],(s,e,t)=>{let i=[...t];return s&&i.unshift(s),e&&i.unshift(e),i}),oo=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(Q,s=>s.filter(e=>!e.isLocal)),ro=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(D,Ct,(s,e)=>{let t=Object.entries(e).sort((i,o)=>{var a,d;let r=((a=i[1])==null?void 0:a.audioLevel)||0;return(((d=o[1])==null?void 0:d.audioLevel)||0)>r?1:-1});if(t.length>0&&t[0][1].audioLevel&&t[0][1].audioLevel>0){let i=t[0][1].peerID;if(i in s)return s[i]}return null}),no=s=>{let e=b(s);return W(s,e==null?void 0:e.audioTrack)},He=s=>{let e=b(s);return W(s,e==null?void 0:e.videoTrack)},$e=s=>{let e=b(s);return _e(s,e==null?void 0:e.videoTrack)},ye=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(b,H,(s,e)=>{let{video:t,audio:i}=j(e,s);return!!(t||i)}),Ot=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(D,H,(s,e)=>{let t;for(let i in s){let o=s[i],{video:r,audio:n}=j(e,o);if(r)return o;n&&!t&&(t=o)}return t}),ao=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(Ot,s=>!!s),co=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(D,H,(s,e)=>{for(let t in s){let i=s[t],{audio:o,video:r}=j(e,i);if(!r&&!!o)return i}}),lo=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(D,H,(s,e)=>{let t=[],i=[];for(let o in s){let r=s[o],{video:n,audio:a}=j(e,r);n?t.push(r):a&&i.push(r)}return t.concat(i)}),So=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(D,H,(s,e)=>{for(let t in e){let i=e[t];if(z(i)&&X(i)&&i.peerId)return s[i.peerId]}}),uo=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(D,H,(s,e)=>{for(let t in e){let i=e[t];if(re(i)&&i.peerId)return s[i.peerId]}}),po=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(Lt,s=>s.filter(Ke)),Fe=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(Be,s=>s.length),Mo=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(Ve,s=>Object.values(s).filter(e=>!e.read).length),ne=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(Be,Ve,(s,e)=>{let t=[];return s.forEach(i=>{t.push(e[i])}),t}),E=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)([I],s=>s&&s.roomState),mo=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(E,s=>s===h.Preview),We=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(I,s=>s.roomState!==h.Disconnected),_=s=>s.roles,go=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)([_],s=>Object.keys(s)),ae=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)([b,_],(s,e)=>(s==null?void 0:s.roleName)?e[s.roleName]:null),ho=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)([ae],s=>{var e;return((e=s==null?void 0:s.subscribeParams)==null?void 0:e.subscribeToRoles)?s.subscribeParams.subscribeToRoles.length>0:!1}),Qe=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(ae,s=>s==null?void 0:s.permissions),To=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(I,s=>s.recording),Ho=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(I,s=>s.rtmp),yo=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(I,s=>s.hls),fo=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(I,s=>s.sessionId),ko=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(I,s=>s.startedAt);var Je=(s=M.audio)=>e=>e.playlist[s].list,fe=(s=M.audio)=>e=>e.playlist[s].selection,Ye=(s=M.audio)=>e=>e.playlist[s].progress,Xe=(s=M.audio)=>e=>e.playlist[s].currentTime,ze=(s=M.audio)=>e=>e.playlist[s].playbackRate,Ze=(s=M.audio)=>e=>e.playlist[s].volume,et=(s=M.audio)=>(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(Je(s),e=>Object.values(e)),tt=(s=M.audio)=>(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(Je(s),fe(s),(e,t)=>{if(!!t.id)return e[t.id]}),st={selection:fe(M.audio),progress:Ye(M.audio),currentTime:Xe(M.audio),playbackRate:ze(M.audio),volume:Ze(M.audio),list:et(M.audio),selectedItem:tt(M.audio)},it={selection:fe(M.video),progress:Ye(M.video),currentTime:Xe(M.video),playbackRate:ze(M.video),volume:Ze(M.video),list:et(M.video),selectedItem:tt(M.video)};function u(s){return e=>t=>s(t,e)}var Z=\"HMS-Store:\",p=class{static v(e,...t){this.log(_100mslive_hms_video__WEBPACK_IMPORTED_MODULE_0__.HMSLogLevel.VERBOSE,e,...t)}static d(...e){this.log(_100mslive_hms_video__WEBPACK_IMPORTED_MODULE_0__.HMSLogLevel.DEBUG,...e)}static i(...e){this.log(_100mslive_hms_video__WEBPACK_IMPORTED_MODULE_0__.HMSLogLevel.INFO,...e)}static w(...e){this.log(_100mslive_hms_video__WEBPACK_IMPORTED_MODULE_0__.HMSLogLevel.WARN,...e)}static e(...e){this.log(_100mslive_hms_video__WEBPACK_IMPORTED_MODULE_0__.HMSLogLevel.ERROR,...e)}static time(e){this.log(_100mslive_hms_video__WEBPACK_IMPORTED_MODULE_0__.HMSLogLevel.TIME,\"[HMSPerformanceTiming]\",e)}static timeEnd(e){this.log(_100mslive_hms_video__WEBPACK_IMPORTED_MODULE_0__.HMSLogLevel.TIMEEND,\"[HMSPerformanceTiming]\",e,e)}static cleanUp(){performance.clearMarks(),performance.clearMeasures()}static log(e,...t){if(!(this.level.valueOf()>e.valueOf()))switch(e){case _100mslive_hms_video__WEBPACK_IMPORTED_MODULE_0__.HMSLogLevel.VERBOSE:{console.log(Z,...t);break}case _100mslive_hms_video__WEBPACK_IMPORTED_MODULE_0__.HMSLogLevel.DEBUG:{console.debug(Z,...t);break}case _100mslive_hms_video__WEBPACK_IMPORTED_MODULE_0__.HMSLogLevel.INFO:{console.info(Z,...t);break}case _100mslive_hms_video__WEBPACK_IMPORTED_MODULE_0__.HMSLogLevel.WARN:{console.warn(Z,...t);break}case _100mslive_hms_video__WEBPACK_IMPORTED_MODULE_0__.HMSLogLevel.ERROR:{console.error(Z,...t);break}case _100mslive_hms_video__WEBPACK_IMPORTED_MODULE_0__.HMSLogLevel.TIME:{performance.mark(t[1]);break}case _100mslive_hms_video__WEBPACK_IMPORTED_MODULE_0__.HMSLogLevel.TIMEEND:{let i=t[0],o=t[1];try{let r=performance.measure(o,o);this.log(_100mslive_hms_video__WEBPACK_IMPORTED_MODULE_0__.HMSLogLevel.DEBUG,i,o,r==null?void 0:r.duration),performance.clearMarks(o),performance.clearMeasures(o)}catch(r){this.log(_100mslive_hms_video__WEBPACK_IMPORTED_MODULE_0__.HMSLogLevel.DEBUG,i,o,r)}break}}}};p.level=_100mslive_hms_video__WEBPACK_IMPORTED_MODULE_0__.HMSLogLevel.VERBOSE;var ke=(s,e)=>e,Nt=(s,e)=>e,ot=(s,e)=>e,wt=(s,e)=>e,v=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)([D,ke],(s,e)=>e?s[e]:null),Pe=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)([H,Nt],(s,e)=>e?s[e]:null),x=u(v),Uo=u((0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)([Te,wt],(s,e)=>{if(!!s)return e?s[e]:s})),Ko=(...s)=>(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)([Te],e=>{if(!!e){if(s&&s.length>0){let t=e;for(let i of s){if(!i)return t;t=t==null?void 0:t[i]}return t}return e}}),_o=u((0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(v,s=>s==null?void 0:s.name)),ee=u(Pe),Ut=u((s,e)=>{let t=v(s,e);if(t&&t.videoTrack&&t.videoTrack!==\"\")return s.tracks[t.videoTrack]}),Kt=u((s,e)=>{let t=v(s,e);if(t&&t.audioTrack&&t.audioTrack!==\"\")return s.tracks[t.audioTrack]}),Vo=Ut,Bo=u((s,e)=>{let t=v(s,e);return(t==null?void 0:t.auxiliaryTracks.map(i=>s.tracks[i]))||[]}),rt=(s,e)=>e?s.speakers[e]:null,qo=u((0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(rt,s=>(s==null?void 0:s.audioLevel)||0)),_t=(s,e)=>{let t=Kt(e)(s);return rt(s,t==null?void 0:t.id)},jo=u((0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(_t,s=>(s==null?void 0:s.audioLevel)||0)),$o=u((s,e)=>{if(e)return s.connectionQualities[e]}),Fo=u((s,e)=>{let t=v(s,e);if(t){let i=t==null?void 0:t.auxiliaryTracks.find(o=>Y(s.tracks[o]));return i?s.tracks[i]:void 0}}),Wo=u((0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(H,v,(s,e)=>{let t=e==null?void 0:e.auxiliaryTracks.find(i=>{let o=s[i];return z(o)&&X(o)});return t?s[t]:void 0})),Qo=u((0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(H,v,(s,e)=>{let t=e==null?void 0:e.auxiliaryTracks.find(i=>{let o=s[i];return z(o)&&Y(o)});return t?s[t]:void 0})),Go=u((0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(H,v,(s,e)=>{let t=e==null?void 0:e.auxiliaryTracks.find(i=>{let o=s[i];return re(o)&&Y(o)});return t?s[t]:void 0})),nt=u((0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(H,v,(s,e)=>j(s,e))),Jo=s=>(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(nt(s),e=>e.video),at=s=>(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(nt(s),e=>e.audio),Yo=u((s,e)=>{let t=v(s,e);return W(s,t==null?void 0:t.audioTrack)}),Xo=u((s,e)=>{let t=v(s,e);return W(s,t==null?void 0:t.videoTrack)}),ct=u((s,e)=>{if(e&&s.tracks[e])return s.tracks[e].volume===0}),zo=u((s,e)=>{let t=v(s,e);return ct(t==null?void 0:t.audioTrack)(s)}),Zo=u((s,e)=>{let t=at(e)(s);return ct(t==null?void 0:t.id)(s)}),lt=u((s,e)=>{let t=Pe(s,e);if(t){if(t.type!==\"audio\"){p.w(\"Please pass audio track here\");return}return t.volume}}),er=u((s,e)=>{let t=v(s,e);return lt(t==null?void 0:t.audioTrack)(s)}),tr=u((s,e)=>{let t=at(e)(s);return lt(t==null?void 0:t.id)(s)}),sr=u((s,e)=>{let t=Pe(s,e);if(t){if(t.type!==\"video\"){p.w(\"Please pass video track here\");return}return t.layer}}),St=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)([ne,$,ke],(s,e,t)=>{if(!!t)return s.filter(i=>{var o;return!i.recipientPeer&&!((o=i.recipientRoles)==null?void 0:o.length)||i.sender&&![e,t].includes(i.sender)?!1:[e,t].includes(i.recipientPeer)})}),dt=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)([ne,ot],(s,e)=>{if(!!e)return s.filter(t=>{var i,o;return((i=t.recipientRoles)==null?void 0:i.length)?(o=t.recipientRoles)==null?void 0:o.includes(e):!1})}),Vt=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(ne,s=>s.filter(e=>{var t;return!e.recipientPeer&&!((t=e.recipientRoles)==null?void 0:t.length)})),Bt=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)([dt,ot],s=>s?s.filter(e=>!e.read).length:0),qt=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)([St,ke],s=>s?s.filter(e=>!e.read).length:0),ir=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(Vt,s=>s.filter(e=>!e.read).length),or=u(St),rr=u(dt),nr=u(Bt),ar=u(qt),cr=s=>(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)([Q],e=>e.filter(t=>t.roleName===s)),lr=s=>(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(x(s),e=>{try{return(e==null?void 0:e.metadata)&&e.metadata!==\"\"?JSON.parse(e.metadata):{}}catch(t){return console.error(\"cannot parse peer metadata\",t),{}}}),Sr=s=>(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(x(s),e=>e==null?void 0:e.name);var Mr=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)([D,H],(s,e)=>Object.values(s).map(i=>{var o;return{peer:i,isAudioEnabled:i.audioTrack?(o=e[i.audioTrack])==null?void 0:o.enabled:!1}})),jt=s=>s.roleChangeRequests[0]||null,mr=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)([jt,D,_],(s,e,t)=>s?{requestedBy:s.requestedBy?e[s.requestedBy]:void 0,role:t[s.roleName],token:s.token}:null),gr=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)([ae],s=>{var o;let e=!1,t=!1,i=!1;return((o=s==null?void 0:s.publishParams)==null?void 0:o.allowed)&&(e=s.publishParams.allowed.includes(\"video\"),t=s.publishParams.allowed.includes(\"audio\"),i=s.publishParams.allowed.includes(\"screen\")),{video:e,audio:t,screen:i}});var yr=s=>(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)([_],e=>e[s]),$t=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)([L,H],(s,e)=>{let t=null;return s&&(t=e[s]),(t==null?void 0:t.plugins)||[]}),Ft=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)([A,H],(s,e)=>{let t=null;return s&&(t=e[s]),(t==null?void 0:t.plugins)||[]}),fr=s=>(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)([$t],e=>e.includes(s)),kr=s=>(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)([Ft],e=>e.includes(s)),Pr=s=>(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(Q,e=>e.find(s)),Rr=s=>(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(Q,e=>e.filter(s)),Ir=s=>(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(I,e=>e.joinedAt&&Date.now()-e.joinedAt.getTime()<=s);function ut(s){return s instanceof _100mslive_hms_video__WEBPACK_IMPORTED_MODULE_0__.HMSRemoteAudioTrack||s instanceof _100mslive_hms_video__WEBPACK_IMPORTED_MODULE_0__.HMSRemoteVideoTrack}var ce=class{constructor(e,t,i,o){this.playlistManager=e;this.syncPlaylistState=i;this.store=o;this.type=t}play(e){return c(this,null,function*(){if(!e){p.w(\"Please pass id to play\");return}yield this.playlistManager.setEnabled(!0,{id:e,type:this.type})})}pause(){return c(this,null,function*(){let e=this.type===M.audio?st:it,t=this.store.getState(e.selection);if(!t.id){p.w(\"No item is currently playing to pause\");return}yield this.playlistManager.setEnabled(!1,{id:t.id,type:this.type})})}playNext(){return c(this,null,function*(){yield this.playlistManager.playNext(this.type)})}playPrevious(){return c(this,null,function*(){yield this.playlistManager.playPrevious(this.type)})}seek(e){this.playlistManager.seek(e,this.type),this.syncPlaylistState(`seekOn${this.type}Playlist`)}seekTo(e){this.playlistManager.seekTo(e,this.type),this.syncPlaylistState(`seekToOn${this.type}Playlist`)}setVolume(e){this.playlistManager.setVolume(e,this.type),this.syncPlaylistState(`setVolumeOn${this.type}Playlist`)}setList(e){this.playlistManager.setList(e),this.syncPlaylistState(`setListOn${this.type}Playlist`)}stop(){return c(this,null,function*(){yield this.playlistManager.stop(this.type),this.syncPlaylistState(`stop${this.type}Playlist`)})}setIsAutoplayOn(e){this.playlistManager.setIsAutoplayOn(this.type,e)}setPlaybackRate(e){this.playlistManager.setPlaybackRate(this.type,e),this.syncPlaylistState(`set${this.type}PlaybackRate`)}removeItem(e){return c(this,null,function*(){let t=yield this.playlistManager.removeItem(e,this.type);return t&&this.syncPlaylistState(`remove${this.type}PlaylistItem`),t})}clearList(){return c(this,null,function*(){yield this.playlistManager.clearList(this.type),this.syncPlaylistState(`clear${this.type}Playlist`)})}};var le={[_100mslive_hms_video__WEBPACK_IMPORTED_MODULE_0__.HMSPeerUpdate.PEER_JOINED]:m.PEER_JOINED,[_100mslive_hms_video__WEBPACK_IMPORTED_MODULE_0__.HMSPeerUpdate.PEER_LEFT]:m.PEER_LEFT,[_100mslive_hms_video__WEBPACK_IMPORTED_MODULE_0__.HMSPeerUpdate.ROLE_UPDATED]:m.ROLE_UPDATED,[_100mslive_hms_video__WEBPACK_IMPORTED_MODULE_0__.HMSPeerUpdate.NAME_UPDATED]:m.NAME_UPDATED,[_100mslive_hms_video__WEBPACK_IMPORTED_MODULE_0__.HMSPeerUpdate.METADATA_UPDATED]:m.METADATA_UPDATED},Se={[_100mslive_hms_video__WEBPACK_IMPORTED_MODULE_0__.HMSTrackUpdate.TRACK_ADDED]:m.TRACK_ADDED,[_100mslive_hms_video__WEBPACK_IMPORTED_MODULE_0__.HMSTrackUpdate.TRACK_REMOVED]:m.TRACK_REMOVED,[_100mslive_hms_video__WEBPACK_IMPORTED_MODULE_0__.HMSTrackUpdate.TRACK_MUTED]:m.TRACK_MUTED,[_100mslive_hms_video__WEBPACK_IMPORTED_MODULE_0__.HMSTrackUpdate.TRACK_UNMUTED]:m.TRACK_UNMUTED,[_100mslive_hms_video__WEBPACK_IMPORTED_MODULE_0__.HMSTrackUpdate.TRACK_DEGRADED]:m.TRACK_DEGRADED,[_100mslive_hms_video__WEBPACK_IMPORTED_MODULE_0__.HMSTrackUpdate.TRACK_RESTORED]:m.TRACK_RESTORED,[_100mslive_hms_video__WEBPACK_IMPORTED_MODULE_0__.HMSTrackUpdate.TRACK_DESCRIPTION_CHANGED]:m.TRACK_DESCRIPTION_CHANGED};var Ie=class{constructor(e,t,i){this.hmsSDKTracks={};this.hmsSDKPeers={};this.isRoomJoinCalled=!1;this.ignoredMessageTypes=[];this.setProgress=({type:e,progress:t})=>{this.setState(i=>{i.playlist[e].progress=t,i.playlist[e].currentTime=this.sdk.getPlaylistManager().getCurrentTime(e)},\"playlistProgress\")};this.syncPlaylistState=e=>{this.setState(t=>{Object.assign(t.playlist,g.convertPlaylist(this.sdk.getPlaylistManager()))},e)};this.sendPeerUpdateNotification=(e,t)=>{let i=this.store.getState(x(t.peerId)),o=le[e]||\"peerUpdate\";this.syncRoomState(o),i||(i=this.store.getState(x(t.peerId))),this.hmsNotifications.sendPeerUpdate(e,i)};this.setState=(e,t)=>this.store.namedSetState(e,t);this.store=e,this.sdk=t,this.hmsNotifications=i}refreshDevices(){return c(this,null,function*(){yield this.sdk.refreshDevices()})}unblockAudio(){return c(this,null,function*(){yield this.sdk.getAudioOutput().unblockAutoplay()})}setVolume(e,t){t?this.setTrackVolume(e,t):(this.sdk.getAudioOutput().setVolume(e),this.syncRoomState(\"setOutputVolume\"))}setAudioOutputDevice(e){this.sdk.getAudioOutput().setDevice(e)&&this.setState(i=>{i.settings.audioOutputDeviceId=e},\"setAudioOutputDevice\")}setPreferredLayer(e,t){let i=this.hmsSDKTracks[e];i?i instanceof _100mslive_hms_video__WEBPACK_IMPORTED_MODULE_0__.HMSRemoteVideoTrack?(i.preferLayer(t),this.updateVideoLayer(e,\"setPreferredLayer\")):p.w(`track ${e} is not an video track`):this.logPossibleInconsistency(`track ${e} not present, unable to set preffer layer`)}preview(e){return c(this,null,function*(){if(this.isRoomJoinCalled){this.logPossibleInconsistency(\"attempting to call preview after join was called\");return}let t=this.store.getState(E);if(t===h.Preview||t===h.Connecting){this.logPossibleInconsistency(\"attempting to call preview while room is in preview/connecting\");return}try{this.setState(i=>{i.room.roomState=h.Connecting},\"connecting\"),yield this.sdkPreviewWithListeners(e)}catch(i){throw p.e(\"Cannot show preview. Failed to connect to room - \",i),i}})}join(e){if(this.isRoomJoinCalled){this.logPossibleInconsistency(\"room join is called again\");return}try{this.isRoomJoinCalled=!0,this.setState(t=>{t.room.roomState=h.Connecting},\"join\"),this.sdkJoinWithListeners(e)}catch(t){throw this.isRoomJoinCalled=!1,p.e(\"Failed to connect to room - \",t),t}}leave(){return c(this,null,function*(){if(!this.store.getState(We)){this.logPossibleInconsistency(\"room leave is called when no room is connected\");return}let t=this.store.getState(E);return this.setState(i=>{i.room.roomState=h.Disconnecting},\"leaving\"),this.sdk.leave().then(()=>{this.resetState(\"leave\"),p.i(\"left room\")}).catch(i=>{p.e(\"error in leaving room - \",i),this.setState(o=>{o.room.roomState=t},\"revertLeave\")})})}setScreenShareEnabled(e,t){return c(this,null,function*(){let i={audioOnly:!1,videoOnly:!1};typeof t==\"object\"?Object.assign(i,t):typeof t==\"boolean\"&&(i.audioOnly=t);try{e?yield this.startScreenShare(i):yield this.stopScreenShare()}catch(o){throw this.hmsNotifications.sendError(g.convertException(o)),o}})}addTrack(e,t=\"regular\"){return c(this,null,function*(){yield this.sdk.addTrack(e,t),this.syncRoomState(\"addTrack\")})}removeTrack(e){return c(this,null,function*(){yield this.sdk.removeTrack(e),this.syncRoomState(\"removeTrack\")})}setLocalAudioEnabled(e){return c(this,null,function*(){let t=this.store.getState(A);t&&(yield this.setEnabledTrack(t,e))})}setLocalVideoEnabled(e){return c(this,null,function*(){let t=this.store.getState(L);t&&(yield this.setEnabledTrack(t,e))})}setEnabledTrack(e,t){return c(this,null,function*(){var r;if(((r=this.store.getState().tracks[e])==null?void 0:r.enabled)===t){this.logPossibleInconsistency(`local track[${e}] enabled state - ${t}`);return}this.setState(n=>{n.tracks[e]?n.tracks[e].displayEnabled=t:this.logPossibleInconsistency(\"track id not found for setEnabled\")},\"displayEnabled\");try{yield this.setEnabledSDKTrack(e,t),this.syncRoomState(\"setEnabled\")}catch(n){throw this.setState(a=>{a.tracks[e].displayEnabled=!t},\"rollbackDisplayEnabled\"),this.hmsNotifications.sendError(g.convertException(n)),n}let o=t?_100mslive_hms_video__WEBPACK_IMPORTED_MODULE_0__.HMSTrackUpdate.TRACK_UNMUTED:_100mslive_hms_video__WEBPACK_IMPORTED_MODULE_0__.HMSTrackUpdate.TRACK_MUTED;this.hmsNotifications.sendTrackUpdate(o,e)})}setAudioSettings(e){return c(this,null,function*(){let t=this.store.getState(A);t&&(yield this.setSDKLocalAudioTrackSettings(t,e),this.syncRoomState(\"setAudioSettings\"))})}setVideoSettings(e){return c(this,null,function*(){let t=this.store.getState(L);t&&(yield this.setSDKLocalVideoTrackSettings(t,e),this.syncRoomState(\"setVideoSettings\"))})}sendMessage(e){this.sendBroadcastMessage(e)}sendBroadcastMessage(e,t){return c(this,null,function*(){let i=yield this.sdk.sendBroadcastMessage(e,t);this.updateMessageInStore(i,{message:e,type:t})})}sendGroupMessage(e,t,i){return c(this,null,function*(){let o=this.store.getState(_),r=t.map(a=>o[a]),n=yield this.sdk.sendGroupMessage(e,r,i);this.updateMessageInStore(n,{message:e,recipientRoles:t,type:i})})}sendDirectMessage(e,t,i){return c(this,null,function*(){let o=this.hmsSDKPeers[t],r=yield this.sdk.sendDirectMessage(e,o,i);this.updateMessageInStore(r,{message:e,recipientPeer:o.peerId,type:i})})}updateMessageInStore(e,t){if(!e)throw p.w(\"sendMessage\",\"Failed to send message\",t),Error(`sendMessage Failed - ${JSON.stringify(t)}`);let i=g.convertMessage(e);return i.read=!0,i.senderName=\"You\",i.ignored=this.ignoredMessageTypes.includes(i.type),this.putMessageInStore(i),i}setMessageRead(e,t){this.setState(i=>{t?i.messages.byID[t]?i.messages.byID[t].read=e:this.logPossibleInconsistency(\"no message with id is found\"):i.messages.allIDs.forEach(o=>{i.messages.byID[o].read=e})},\"setMessageRead\")}attachVideo(e,t){return c(this,null,function*(){if(this.localAndVideoUnmuting(e))return new Promise(i=>{let o=this.store.subscribe(r=>c(this,null,function*(){r&&(yield this.attachVideoInternal(e,t),o(),i())}),He)});yield this.attachVideoInternal(e,t)})}detachVideo(e,t){return c(this,null,function*(){let i=this.hmsSDKTracks[e];(i==null?void 0:i.type)===\"video\"?(i.removeSink(t),this.updateVideoLayer(e,\"detachVideo\")):(t&&(t.srcObject=null),this.logPossibleInconsistency(\"no video track found to remove sink\"))})}addPluginToVideoTrack(e,t){return c(this,null,function*(){return this.addRemoveVideoPlugin(e,\"add\",t)})}addPluginToAudioTrack(e){return c(this,null,function*(){return this.addRemoveAudioPlugin(e,\"add\")})}validateVideoPluginSupport(e){let t={};if(t.isSupported=!1,!e)return p.w(\"no plugin passed in for checking support\"),t.errMsg=\"no plugin passed in for checking support\",t;let i=this.store.getState(L);if(i){let o=this.hmsSDKTracks[i];o?t=o.validatePlugin(e):(p.w(`track ${i} not present, unable to validate plugin`),t.errMsg=`track ${i} not present, unable to validate plugin`)}return t}validateAudioPluginSupport(e){let t={};if(t.isSupported=!1,!e)return p.w('no plugin passed in for checking support\"'),t.errMsg='no plugin passed in for checking support\"',t;let i=this.store.getState(A);if(i){let o=this.hmsSDKTracks[i];o?t=o.validatePlugin(e):(p.w(`track ${i} not present, unable to validate plugin`),t.errMsg=`track ${i} not present, unable to validate plugin`)}return t}removePluginFromVideoTrack(e){return c(this,null,function*(){return this.addRemoveVideoPlugin(e,\"remove\")})}removePluginFromAudioTrack(e){return c(this,null,function*(){return this.addRemoveAudioPlugin(e,\"remove\")})}changeRole(e,t,i=!1){return c(this,null,function*(){let o=this.hmsSDKPeers[e];if(!o){this.logPossibleInconsistency(`Unknown peer ID given ${e} for changerole`);return}yield this.sdk.changeRole(o,t,i)})}acceptChangeRole(e){return c(this,null,function*(){let t=e.requestedBy?this.hmsSDKPeers[e.requestedBy.id]:void 0;t||p.w(`peer for which role change is requested no longer available - ${e.requestedBy}`);let i={requestedBy:t,role:e.role,token:e.token};yield this.sdk.acceptChangeRole(i),this.removeRoleChangeRequest(e)})}initAppData(e){this.setState(t=>{t.appData=e},\"initAppData\")}setAppData(e,t,i){let o=(t==null?void 0:t.constructor.name)===\"Object\";this.setState(r=>{if(r.appData)i&&o?Object.assign(r.appData[e],t):r.appData[e]=t;else{let n={[e]:t};r.appData=n}},`setAppData-${e}`)}rejectChangeRole(e){this.removeRoleChangeRequest(e)}endRoom(e,t){return c(this,null,function*(){let i=this.store.getState(Qe);if(!(i==null?void 0:i.endRoom)){p.w(\"You are not allowed to perform this action - endRoom\");return}let o=this.store.getState(E);this.setState(r=>{r.room.roomState=h.Disconnecting},\"endingRoom\");try{yield this.sdk.endRoom(e,t),this.resetState(\"endRoom\")}catch(r){p.e(\"error in ending room - \",r),this.setState(n=>{n.room.roomState=o},\"revertEndRoom\")}})}removePeer(e,t){return c(this,null,function*(){let i=this.hmsSDKPeers[e];if(i&&!i.isLocal)yield this.sdk.removePeer(i,t);else{this.logPossibleInconsistency(`No remote peer found for peerID - ${e}`);return}})}startRTMPOrRecording(e){return c(this,null,function*(){yield this.sdk.startRTMPOrRecording(e)})}stopRTMPAndRecording(){return c(this,null,function*(){yield this.sdk.stopRTMPAndRecording()})}startHLSStreaming(e){return c(this,null,function*(){yield this.sdk.startHLSStreaming(e)})}stopHLSStreaming(e){return c(this,null,function*(){yield this.sdk.stopHLSStreaming(e)})}sendHLSTimedMetadata(e){return c(this,null,function*(){yield this.sdk.sendHLSTimedMetadata(e)})}changeName(e){return c(this,null,function*(){yield this.sdk.changeName(e)})}changeMetadata(e){return c(this,null,function*(){typeof e!=\"string\"&&(e=JSON.stringify(e)),yield this.sdk.changeMetadata(e)})}setRemoteTrackEnabled(e,t){return c(this,null,function*(){if(typeof e==\"string\"){let i=this.hmsSDKTracks[e];i&&ut(i)?yield this.sdk.changeTrackState(i,t):this.logPossibleInconsistency(`No remote track with ID ${e} found for change track state`)}else Array.isArray(e)&&e.forEach(i=>this.setRemoteTrackEnabled(i,t))})}setRemoteTracksEnabled(e){return c(this,null,function*(){let t={enabled:e.enabled,type:e.type,source:e.source};if(e.roles){let i=this.store.getState(_);t.roles=e.roles.map(o=>i[o])}yield this.sdk.changeMultiTrackState(t)})}setLogLevel(e){p.level=e,this.sdk.setLogLevel(e)}ignoreMessageTypes(e,t=!1){if(t)this.ignoredMessageTypes=e;else for(let i of e)this.ignoredMessageTypes.includes(i)||this.ignoredMessageTypes.push(i)}resetState(e=\"resetState\"){this.isRoomJoinCalled=!1,this.hmsSDKTracks={},p.cleanUp(),this.setState(t=>{Object.assign(t,ie())},e)}sdkJoinWithListeners(e){this.sdk.join(e,{onJoin:this.onJoin.bind(this),onRoomUpdate:this.onRoomUpdate.bind(this),onPeerUpdate:this.onPeerUpdate.bind(this),onTrackUpdate:this.onTrackUpdate.bind(this),onMessageReceived:this.onMessageReceived.bind(this),onError:this.onError.bind(this),onReconnected:this.onReconnected.bind(this),onReconnecting:this.onReconnecting.bind(this),onRoleChangeRequest:this.onRoleChangeRequest.bind(this),onRoleUpdate:this.onRoleUpdate.bind(this),onDeviceChange:this.onDeviceChange.bind(this),onChangeTrackStateRequest:this.onChangeTrackStateRequest.bind(this),onChangeMultiTrackStateRequest:this.onChangeMultiTrackStateRequest.bind(this),onRemovedFromRoom:this.onRemovedFromRoom.bind(this),onNetworkQuality:this.onNetworkQuality.bind(this)}),this.sdk.addAudioListener({onAudioLevelUpdate:this.onAudioLevelUpdate.bind(this)}),this.sdk.addConnectionQualityListener({onConnectionQualityUpdate:this.onConnectionQualityUpdate.bind(this)})}onRemovedFromRoom(e){var o;let t=this.store.getState(x((o=e.requestedBy)==null?void 0:o.peerId));this.hmsNotifications.sendLeaveRoom(F(w({},e),{requestedBy:t||void 0}));let i=e.roomEnded||!t?\"roomEnded\":\"removedFromRoom\";p.i(`resetting state after peer removed ${i}`,e),this.resetState(i)}onDeviceChange(e){let t=e.devices;if(!t)return;let i=this.store.getState(b);if(this.setState(o=>{U(o.devices.audioInput,t.audioInput)||(o.devices.audioInput=t.audioInput),U(o.devices.videoInput,t.videoInput)||(o.devices.videoInput=t.videoInput),U(o.devices.audioOutput,t.audioOutput)||(o.devices.audioOutput=t.audioOutput),this.hmsSDKPeers[i==null?void 0:i.id]&&Object.assign(o.settings,this.getMediaSettings(this.hmsSDKPeers[i==null?void 0:i.id]))},\"deviceChange\"),e.selection){let o=g.convertDeviceChangeUpdate(e);this.hmsNotifications.sendDeviceChange(o)}}sdkPreviewWithListeners(e){return c(this,null,function*(){yield this.sdk.preview(e,{onPreview:this.onPreview.bind(this),onError:this.onError.bind(this),onReconnected:this.onReconnected.bind(this),onReconnecting:this.onReconnecting.bind(this),onDeviceChange:this.onDeviceChange.bind(this),onRoomUpdate:this.onRoomUpdate.bind(this),onPeerUpdate:this.onPeerUpdate.bind(this),onNetworkQuality:this.onNetworkQuality.bind(this)}),this.sdk.addAudioListener({onAudioLevelUpdate:this.onAudioLevelUpdate.bind(this)})})}onNetworkQuality(e){this.setState(t=>{var o;let i=t.room.localPeer||((o=this.sdk.getLocalPeer())==null?void 0:o.peerId);i&&(t.connectionQualities[i]={peerID:i,downlinkQuality:e})},\"ConnectionQuality\")}startScreenShare(e){return c(this,null,function*(){this.store.getState(ye)?this.logPossibleInconsistency(\"start screenshare is called while it's on\"):(yield this.sdk.startScreenShare(()=>this.syncRoomState(\"screenshareStopped\"),e),this.syncRoomState(\"startScreenShare\"))})}stopScreenShare(){return c(this,null,function*(){this.store.getState(ye)?(yield this.sdk.stopScreenShare(),this.syncRoomState(\"stopScreenShare\")):this.logPossibleInconsistency(\"stop screenshare is called while it's not on\")})}attachVideoInternal(e,t){return c(this,null,function*(){let i=this.hmsSDKTracks[e];i&&i.type===\"video\"?(i.addSink(t),this.updateVideoLayer(e,\"attachVideo\")):this.logPossibleInconsistency(\"no video track found to add sink\")})}syncRoomState(e){e=`${e}_fullSync`,p.time(`store-sync-${e}`);let t={},i=[],o={},r={},n={},a=this.sdk.getPeers();for(let f of a){let N=g.convertPeer(f);t[N.id]=N,i.push(N.id),this.hmsSDKPeers[N.id]=f;let J=[f.audioTrack,f.videoTrack,...f.auxiliaryTracks];for(let se of J){if(!se)continue;let Ce=g.convertTrack(se);o[Ce.id]=Ce,r[se.trackId]=se}N.isLocal&&Object.assign(n,this.getMediaSettings(f))}let d=this.sdk.getRecordingState(),P=this.sdk.getRTMPState(),q=this.sdk.getHLSState();this.setState(f=>{f.room.peers=i;let N=f.peers,J=f.tracks;Oe(N,t),Ne(J,o),Object.assign(f.settings,n),this.hmsSDKTracks=r,Object.assign(f.roles,g.convertRoles(this.sdk.getRoles())),Object.assign(f.playlist,g.convertPlaylist(this.sdk.getPlaylistManager())),Object.assign(f.room,g.convertRecordingStreamingState(d,P,q))},e),p.timeEnd(`store-sync-${e}`)}onPreview(e){this.setState(t=>{Object.assign(t.room,g.convertRoom(e)),t.room.roomState=h.Preview},\"previewStart\"),this.syncRoomState(\"previewSync\")}onJoin(e){let t=this.sdk.getPlaylistManager();this.audioPlaylist=new ce(t,M.audio,this.syncPlaylistState.bind(this),this.store),this.videoPlaylist=new ce(t,M.video,this.syncRoomState.bind(this),this.store),this.syncRoomState(\"joinSync\"),this.setState(i=>{Object.assign(i.room,g.convertRoom(e)),i.room.isConnected=!0,i.room.roomState=h.Connected},\"joined\"),t.onProgress(this.setProgress),t.onNewTrackStart(i=>{this.syncPlaylistState(`${i.type}PlaylistUpdate`)}),t.onPlaylistEnded(i=>{this.syncPlaylistState(`${i}PlaylistEnded`)}),t.onCurrentTrackEnded(i=>{this.hmsNotifications.sendPlaylistTrackEnded(g.convertPlaylistItem(t,i)),this.syncPlaylistState(`${i.type}PlaylistItemEnded`)})}onRoomUpdate(e,t){this.setState(i=>{Object.assign(i.room,g.convertRoom(t))},e)}onPeerUpdate(e,t){if(![_100mslive_hms_video__WEBPACK_IMPORTED_MODULE_0__.HMSPeerUpdate.BECAME_DOMINANT_SPEAKER,_100mslive_hms_video__WEBPACK_IMPORTED_MODULE_0__.HMSPeerUpdate.RESIGNED_DOMINANT_SPEAKER].includes(e)){if(Array.isArray(t)){this.syncRoomState(\"peersJoined\");let i=[];for(let o of t){let r=this.store.getState(x(o.peerId));r&&i.push(r)}this.hmsNotifications.sendPeerList(i);return}this.sendPeerUpdateNotification(e,t)}}onTrackUpdate(e,t,i){if(e===_100mslive_hms_video__WEBPACK_IMPORTED_MODULE_0__.HMSTrackUpdate.TRACK_REMOVED)this.hmsNotifications.sendTrackUpdate(e,t.trackId),this.handleTrackRemove(t,i);else{let o=Se[e]||\"trackUpdate\";this.syncRoomState(o),this.hmsNotifications.sendTrackUpdate(e,t.trackId)}}onMessageReceived(e){let t=g.convertMessage(e);t.read=!1,t.ignored=this.ignoredMessageTypes.includes(t.type),this.putMessageInStore(t),this.hmsNotifications.sendMessageReceived(t)}putMessageInStore(e){e.ignored||this.setState(t=>{e.id=String(this.store.getState(Fe)+1),t.messages.byID[e.id]=e,t.messages.allIDs.push(e.id)},\"newMessage\")}onAudioLevelUpdate(e){this.setState(t=>{let i={};e.forEach(r=>{if(!r.track||!r.peer)return;let n=r.track.trackId;i[n]=r.audioLevel,t.speakers[n]||(t.speakers[n]={audioLevel:r.audioLevel,peerID:r.peer.peerId,trackID:n})});let o=Object.entries(t.speakers);for(let[r,n]of o)n.audioLevel=i[r]||0,n.audioLevel===0&&delete t.speakers[r]},\"audioLevel\")}onConnectionQualityUpdate(e){this.setState(t=>{let i=new Set;e.forEach(r=>{let n=r.peerID;!n||(i.add(n),t.connectionQualities[n]?Object.assign(t.connectionQualities[n],r):t.connectionQualities[n]=r)});let o=Object.keys(t.connectionQualities);for(let r of o)i.has(r)||delete t.connectionQualities[r]},\"connectionQuality\")}onChangeTrackStateRequest(e){var r;let t=this.store.getState(x((r=e.requestedBy)==null?void 0:r.peerId)),i=this.getStoreLocalTrackIDfromSDKTrack(e.track),o=this.store.getState(ee(i));if(!o)return this.logPossibleInconsistency(`Not found track for which track state change was requested, ${e.track}`);e.enabled||this.syncRoomState(\"changeTrackStateRequest\"),this.hmsNotifications.sendChangeTrackStateRequest({requestedBy:t||void 0,track:o,enabled:e.enabled})}onChangeMultiTrackStateRequest(e){var r;let t=this.store.getState(x((r=e.requestedBy)==null?void 0:r.peerId));e.enabled||this.syncRoomState(\"changeMultiTrackStateRequest\");let i=[],o=this.store.getState(H);for(let n of e.tracks){let a=this.getStoreLocalTrackIDfromSDKTrack(n);a&&o[a]&&i.push(o[a])}this.hmsNotifications.sendChangeMultiTrackStateRequest({requestedBy:t||void 0,tracks:i,enabled:e.enabled,type:e.type,source:e.source})}onReconnected(){this.syncRoomState(\"reconnectedSync\"),this.hmsNotifications.sendReconnected(),this.setState(e=>{e.room.roomState=e.room.isConnected?h.Connected:h.Preview},\"reconnected\")}onReconnecting(e){let t=g.convertException(e);p.e(\"Reconnection: received error from sdk\",t),this.hmsNotifications.sendReconnecting(t),this.setState(i=>{i.room.roomState=h.Reconnecting,i.errors.push(t)},\"reconnecting\")}onError(e){let t=g.convertException(e);t.isTerminal?(this.leave().then(()=>p.e(\"error from SDK, left room.\")),this.setState(i=>{i.room.roomState=h.Failed,i.errors.push(t)},\"errorTerminal\")):this.store.getState().errors.length<50&&this.setState(o=>{o.errors.push(t)},\"error\"),this.syncRoomState(\"errorSync\"),this.hmsNotifications.sendError(t),p.e(\"received error from sdk\",t)}updateVideoLayer(e,t){let i=this.hmsSDKTracks[e];if(i&&i instanceof _100mslive_hms_video__WEBPACK_IMPORTED_MODULE_0__.HMSRemoteVideoTrack){let o=this.store.getState(ee(e));((o==null?void 0:o.layer)!==i.getSimulcastLayer()||(o==null?void 0:o.degraded)!==i.degraded)&&this.setState(n=>{n.tracks[e].layer=i.getSimulcastLayer(),n.tracks[e].degraded=i.degraded},t)}}handleTrackRemove(e,t){this.setState(i=>{let o=i.peers[t.peerId],r=i.tracks,n=e.trackId;if(this.isSameStoreSDKTrack(n,o==null?void 0:o.audioTrack))o==null||delete o.audioTrack;else if(this.isSameStoreSDKTrack(n,o==null?void 0:o.videoTrack))o==null||delete o.videoTrack;else{let a=o==null?void 0:o.auxiliaryTracks.indexOf(n);a>-1&&this.isSameStoreSDKTrack(n,o==null?void 0:o.auxiliaryTracks[a])&&(o==null||o.auxiliaryTracks.splice(a,1))}delete r[n],delete this.hmsSDKTracks[n]},\"trackRemoved\")}setEnabledSDKTrack(e,t){return c(this,null,function*(){let i=this.hmsSDKTracks[e];i?yield i.setEnabled(t):this.logPossibleInconsistency(`track ${e} not present, unable to enabled/disable`)})}setSDKLocalVideoTrackSettings(e,t){return c(this,null,function*(){let i=this.hmsSDKTracks[e];i?yield i.setSettings(t):this.logPossibleInconsistency(`local track ${e} not present, unable to set settings`)})}setSDKLocalAudioTrackSettings(e,t){return c(this,null,function*(){let i=this.hmsSDKTracks[e];i?yield i.setSettings(t):this.logPossibleInconsistency(`local track ${e} not present, unable to set settings`)})}getMediaSettings(e){var r;let t=this.store.getState(qe),i=e.audioTrack,o=e.videoTrack;return{audioInputDeviceId:(i==null?void 0:i.settings.deviceId)||t.audioInputDeviceId,videoInputDeviceId:(o==null?void 0:o.settings.deviceId)||t.videoInputDeviceId,audioOutputDeviceId:(r=this.sdk.getAudioOutput().getDevice())==null?void 0:r.deviceId}}setTrackVolume(e,t){let i=this.hmsSDKTracks[t];i?i instanceof _100mslive_hms_video__WEBPACK_IMPORTED_MODULE_0__.HMSAudioTrack?(i.setVolume(e),this.setState(o=>{let r=o.tracks[t];r&&(r.volume=e)},\"trackVolume\")):p.w(`track ${t} is not an audio track`):this.logPossibleInconsistency(`track ${t} not present, unable to set volume`)}localAndVideoUnmuting(e){if(this.store.getState(b).videoTrack!==e)return!1;let i=this.store.getState($e),o=this.store.getState(He);return i&&!o}logPossibleInconsistency(e){p.w(\"possible inconsistency detected - \",e)}addRemoveVideoPlugin(e,t,i){return c(this,null,function*(){if(!e){p.w(\"Invalid plugin received in store\");return}let o=this.store.getState(L);if(o){let r=this.hmsSDKTracks[o];r?(t===\"add\"?yield r.addPlugin(e,i):t===\"remove\"&&(yield r.removePlugin(e)),this.syncRoomState(`${t}VideoPlugin`)):this.logPossibleInconsistency(`track ${o} not present, unable to remove plugin`)}})}addRemoveAudioPlugin(e,t){return c(this,null,function*(){if(!e){p.w(\"Invalid plugin received in store\");return}let i=this.store.getState(A);if(i){let o=this.hmsSDKTracks[i];o?(t===\"add\"?yield o.addPlugin(e):t===\"remove\"&&(yield o.removePlugin(e)),this.syncRoomState(`${t}AudioPlugin`)):this.logPossibleInconsistency(`track ${i} not present, unable to remove plugin`)}})}isSameStoreSDKTrack(e,t){var i;return t?((i=this.hmsSDKTracks[t])==null?void 0:i.trackId)===e:!1}onRoleChangeRequest(e){this.setState(t=>{t.roleChangeRequests.length===0&&t.roleChangeRequests.push(g.convertRoleChangeRequest(e))},\"roleChangeRequest\")}removeRoleChangeRequest(e){this.setState(t=>{let i=t.roleChangeRequests.findIndex(o=>o.token===e.token);i!==-1&&t.roleChangeRequests.splice(i,1)},\"removeRoleChangeRequest\")}onRoleUpdate(){this.syncRoomState(\"roleUpdate\")}getStoreLocalTrackIDfromSDKTrack(e){return this.store.getState(je).find(i=>this.hmsSDKTracks[i].trackId===e.trackId)}};var ve=\"hmsNotification\",De=class{constructor(e){this.id=0;this.onNotification=(e,t)=>{let i=o=>{if(t){let r;if(Array.isArray(t)?r=t.includes(o.type):r=t===o.type,!r)return}e(o)};return this.eventEmitter.addListener(ve,i),()=>{this.eventEmitter.removeListener(ve,i)}};this.store=e,this.eventEmitter=new eventemitter2__WEBPACK_IMPORTED_MODULE_2__.EventEmitter2}sendPlaylistTrackEnded(e){let t=this.createNotification(m.PLAYLIST_TRACK_ENDED,e,R.INFO);this.emitEvent(t)}sendDeviceChange(e){var i;let t=this.createNotification(m.DEVICE_CHANGE_UPDATE,e,e.error?R.ERROR:R.INFO,`Selected ${e.type} device - ${(i=e.selection)==null?void 0:i.label}`);this.emitEvent(t)}sendLeaveRoom(e){var o;let t=(o=e.requestedBy)==null?void 0:o.name,i=this.createNotification(e.roomEnded||!t?m.ROOM_ENDED:m.REMOVED_FROM_ROOM,e,R.INFO,`${e.roomEnded?\"Room ended\":\"Removed from room\"} ${t?`by ${t}`:\"\"}`);this.emitEvent(i)}sendPeerList(e){let t=this.createNotification(m.PEER_LIST,e,R.INFO);this.emitEvent(t)}sendPeerUpdate(e,t){let i=this.store.getState(x(t==null?void 0:t.id))||t,o=le[e];if(o){let r=this.createNotification(o,i,R.INFO);this.emitEvent(r)}}sendTrackUpdate(e,t){let i=this.store.getState(ee(t)),o=Se[e];if(o){let r=this.createNotification(o,i,R.INFO);this.emitEvent(r)}}sendMessageReceived(e){let t=this.createNotification(m.NEW_MESSAGE,e,R.INFO);this.emitEvent(t)}sendError(e){let t=this.createNotification(m.ERROR,e,R.ERROR);this.emitEvent(t)}sendReconnecting(e){let t=this.createNotification(m.RECONNECTING,e,R.ERROR);this.emitEvent(t)}sendReconnected(){let e=this.createNotification(m.RECONNECTED,null,R.INFO);this.emitEvent(e)}sendChangeTrackStateRequest(e){let t=this.createNotification(m.CHANGE_TRACK_STATE_REQUEST,e,R.INFO);this.emitEvent(t)}sendChangeMultiTrackStateRequest(e){let t=this.createNotification(m.CHANGE_MULTI_TRACK_STATE_REQUEST,e,R.INFO);this.emitEvent(t)}emitEvent(e){this.eventEmitter.emit(ve,e)}createNotification(e,t,i,o=\"\"){return this.id++,{id:this.id,type:e,message:o,data:t,severity:i}}};var de=s=>_100mslive_hms_video__WEBPACK_IMPORTED_MODULE_0__.isBrowser?`${s} ${document.title}`:s;var Mt=(s,e,t)=>{let i;t.getState(E)===h.Connected&&(i=mt(s,e,t)),t.subscribe(o=>{[h.Connected,h.Reconnecting].includes(o)?i||(i=mt(s,e,t)):i&&(Zt(e),i())},E)},mt=(s,e,t)=>{var r,n;let i=Xt(t,e);(r=s.getWebrtcInternals())==null||r.start();let o=(n=s.getWebrtcInternals())==null?void 0:n.onStatsChange(a=>zt(e,a,t));return()=>{i(),o&&o()}},Xt=(s,e)=>{let t,i,o;return s.getState($)?e.namedSetState(r=>{r.localPeer.id=s.getState($)},\"localpeer-id\"):t=s.subscribe(r=>{r&&e.namedSetState(n=>{n.localPeer.id=r},\"localpeer-id\")},$),s.getState(L)?e.namedSetState(r=>{r.localPeer.videoTrack=s.getState(L)},\"localpeer-videotrack-id\"):i=s.subscribe(r=>{r&&e.namedSetState(n=>{n.localPeer.videoTrack=r},\"localpeer-videotrack-id\")},L),s.getState(A)?e.namedSetState(r=>{r.localPeer.videoTrack=s.getState(A)},\"localpeer-audiotrack-id\"):o=s.subscribe(r=>{r&&e.namedSetState(n=>{n.localPeer.videoTrack=r},\"localpeer-audiotrack-id\")},A),()=>{t==null||t(),i==null||i(),o==null||o()}},zt=(s,e,t)=>{let i=t.getState(H);s.namedSetState(o=>{let r={},n=Object.keys(i);for(let P of n){let q=e.getTrackStats(P);q&&(r[P]=q)}pe(o.trackStats,r);let d={[t.getState($)]:e.getLocalPeerStats()};pe(o.peerStats,d)},\"webrtc-stats\")},Zt=(s,e=\"resetState\")=>{s.namedSetState(t=>{Object.assign(t,oe())},e)};var ue=class{constructor(e,t){this.hmsStore=e;this.sdk=t;this.store=O.createNewHMSStore(de(\"HMSStatsStore\"),oe),this.getState=this.store.getState,this.subscribe=this.store.subscribe,this.getPublishPeerConnection=()=>new Promise(i=>{var o,r;this.hmsStore.getState(E)===\"Connected\"?i((r=(o=this.sdk)==null?void 0:o.getWebrtcInternals())==null?void 0:r.getPublishPeerConnection()):this.hmsStore.subscribe(n=>{var a,d;n===\"Connected\"&&i((d=(a=this.sdk)==null?void 0:a.getWebrtcInternals())==null?void 0:d.getPublishPeerConnection())},E)}),this.getSubscribePeerConnection=()=>new Promise(i=>{var o,r;this.hmsStore.getState(E)===\"Connected\"?i((r=(o=this.sdk)==null?void 0:o.getWebrtcInternals())==null?void 0:r.getSubscribePeerConnection()):this.hmsStore.subscribe(n=>{var a,d;n===\"Connected\"&&i((d=(a=this.sdk)==null?void 0:a.getWebrtcInternals())==null?void 0:d.getSubscribePeerConnection())},E)}),!!this.sdk&&Mt(this.sdk,this.store,this.hmsStore)}};var es=s=>s.localPeer.id,ts=s=>s.localPeer.audioTrack,ss=s=>s.localPeer.videoTrack,is=(s,e)=>e,os=(s,e)=>e,be=s=>s.trackStats,gt=s=>s.peerStats,V=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)([gt,es],(s,e)=>s[e]),rs=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(V,s=>{var e;return(e=s==null?void 0:s.subscribe)==null?void 0:e.packetsLost}),ns=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(V,s=>{var e;return(e=s==null?void 0:s.subscribe)==null?void 0:e.jitter}),as=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(V,s=>{var e;return(e=s==null?void 0:s.publish)==null?void 0:e.bitrate}),cs=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(V,s=>{var e;return(e=s==null?void 0:s.subscribe)==null?void 0:e.bitrate}),ls=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(V,s=>{var e;return(e=s==null?void 0:s.publish)==null?void 0:e.availableOutgoingBitrate}),Ss=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(V,s=>{var e;return(e=s==null?void 0:s.subscribe)==null?void 0:e.availableIncomingBitrate}),ds=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(V,s=>{var e;return(e=s==null?void 0:s.publish)==null?void 0:e.bytesSent}),us=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(V,s=>{var e;return(e=s==null?void 0:s.subscribe)==null?void 0:e.bytesReceived}),ps=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)([gt,is],(s,e)=>e?s[e]:void 0),G=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)([be,os],(s,e)=>e?s[e]:void 0),Ms=u(ps),ms=u(G),gs=u((0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(G,s=>s==null?void 0:s.bitrate)),hs=u((0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(G,s=>s==null?void 0:s.bytesReceived)),Ts=u((0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(G,s=>s==null?void 0:s.framesPerSecond)),Hs=u((0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(G,s=>s==null?void 0:s.jitter)),ys=u((0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(G,s=>s==null?void 0:s.packetsLost)),Ee=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)([be,ts],(s,e)=>e?s[e]:void 0),te=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)([be,ss],(s,e)=>e?s[e]:void 0),fs=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(Ee,s=>s==null?void 0:s.bitrate),ks=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(te,s=>s==null?void 0:s.bitrate),Ps=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(Ee,s=>s==null?void 0:s.bytesSent),Rs=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(te,s=>s==null?void 0:s.bytesSent),Is=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(te,s=>s==null?void 0:s.framesPerSecond),vs=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.createSelector)(te,s=>s==null?void 0:s.qualityLimitationReason),Ds={localPeerStats:V,packetsLost:rs,jitter:ns,publishBitrate:as,subscribeBitrate:cs,availablePublishBitrate:ls,availableSubscribeBitrate:Ss,totalBytesSent:ds,totalBytesReceived:us,peerStatsByID:Ms,trackStatsByID:ms,bitrateByTrackID:gs,bytesReceivedByTrackID:hs,framerateByTrackID:Ts,jitterByTrackID:Hs,packetsLostByTrackID:ys,localAudioTrackStats:Ee,localVideoTrackStats:te,localAudioTrackBitrate:fs,localVideoTrackBitrate:ks,localAudioTrackBytesSent:Ps,localVideoTrackBytesSent:Rs,localVideoTrackFramerate:Is,localVideoTrackQualityLimitationReason:vs};var O=class{constructor(e,t,i){this.getStats=()=>(this.stats||(this.stats=new ue(this.store,this.sdk)),this.stats);e?this.store=e:this.store=O.createNewHMSStore(de(\"HMSStore\"),ie),i?this.notifications=i:this.notifications=new De(this.store),t?this.actions=t:(this.sdk=new _100mslive_hms_video__WEBPACK_IMPORTED_MODULE_0__.HMSSdk,this.actions=new Ie(this.store,this.sdk,this.notifications)),this.initialTriggerOnSubscribe=!1,_100mslive_hms_video__WEBPACK_IMPORTED_MODULE_0__.isBrowser&&(window.__hms=this)}triggerOnSubscribe(){this.initialTriggerOnSubscribe||(O.makeStoreTriggerOnSubscribe(this.store),this.initialTriggerOnSubscribe=!0)}getStore(){return this.store}getHMSActions(){return this.actions}getActions(){return this.actions}getNotifications(){return{onNotification:this.notifications.onNotification}}static createNewHMSStore(e,t){let i=(0,zustand_vanilla__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(()=>t()),o=i.setState;i.setState=a=>{let d=typeof a==\"function\"?(0,immer__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(a):a;o(d)};let r=i.getState;i.getState=a=>{if(a){let d=a.name||\"byIDSelector\";window.selectorsCount||(window.selectorsCount={}),window.selectorsCount[d]=(window.selectorsCount[d]||0)+1;let P=performance.now(),q=a(r()),f=performance.now()-P;return f>1&&(window.expensiveSelectors=window.expensiveSelectors||new Map,window.expensiveSelectors.set(d,f)),q}return r()},O.compareWithShallowCheckInSubscribe(i);let n=O.setUpDevtools(i,e);return F(w({},i),{namedSetState:n})}static makeStoreTriggerOnSubscribe(e){let t=e.subscribe;e.subscribe=(i,o,r)=>(i(e.getState(o),void 0),t(i,o,r))}static compareWithShallowCheckInSubscribe(e){let t=e.subscribe;e.subscribe=(i,o,r)=>(o||(o=n=>n),r=r||zustand_shallow__WEBPACK_IMPORTED_MODULE_5__[\"default\"],t(i,o,r))}static setUpDevtools(e,t){let i;try{i=window.__REDUX_DEVTOOLS_EXTENSION__||window.top.__REDUX_DEVTOOLS_EXTENSION__}catch(n){}if(!i)return n=>{e.setState(n)};let o=i.connect(O.devtoolsOptions(t));o.prefix=t?`${t} > `:\"\";let r=e.setState;return e.setState=n=>{r(n),o.send(`${o.prefix}setState`,e.getState())},o.subscribe(O.devtoolsSubscribe(o,e,r)),o.send(\"setUpStore\",e.getState()),(n,a)=>{r(n);let d=a||`${o.prefix}action`;o.send(d,e.getState())}}static devtoolsOptions(e){return{name:e,actionsBlacklist:[\"audioLevel\",\"playlistProgress\",\"connectionQuality\"]}}static devtoolsSubscribe(e,t,i){return o=>{var r,n,a,d;if(o.type===\"DISPATCH\"&&o.state)[\"JUMP_TO_ACTION\",\"JUMP_TO_STATE\"].includes(o.payload.type)?i(JSON.parse(o.state)):t.setState(JSON.parse(o.state));else if(o.type===\"DISPATCH\"&&((r=o.payload)==null?void 0:r.type)===\"COMMIT\")e.init(t.getState());else if(o.type===\"DISPATCH\"&&((n=o.payload)==null?void 0:n.type)===\"IMPORT_STATE\"){let P=(a=o.payload.nextLiftedState)==null?void 0:a.actionsById;(((d=o.payload.nextLiftedState)==null?void 0:d.computedStates)||[]).forEach(({state:f},N)=>{let J=P[N]||`${e.prefix}setState`;N===0?e.init(f):(i(f),e.send(J,t.getState()))})}}}};\n//# sourceMappingURL=index.js.map\n\n\n//# sourceURL=webpack://100-ms-demo/./node_modules/@100mslive/hms-video-store/dist/index.js?");

/***/ }),

/***/ "./node_modules/@100mslive/hms-video/dist/index.js":
/*!*********************************************************!*\
  !*** ./node_modules/@100mslive/hms-video/dist/index.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"HMSAudioCodec\": () => (/* binding */ We),\n/* harmony export */   \"HMSAudioContextHandler\": () => (/* binding */ dt),\n/* harmony export */   \"HMSAudioPluginType\": () => (/* binding */ Ut),\n/* harmony export */   \"HMSAudioPluginsManager\": () => (/* binding */ at),\n/* harmony export */   \"HMSAudioTrack\": () => (/* binding */ Ne),\n/* harmony export */   \"HMSException\": () => (/* binding */ v),\n/* harmony export */   \"HMSLocalAudioTrack\": () => (/* binding */ He),\n/* harmony export */   \"HMSLocalVideoTrack\": () => (/* binding */ de),\n/* harmony export */   \"HMSLogLevel\": () => (/* binding */ F),\n/* harmony export */   \"HMSPeerUpdate\": () => (/* binding */ $),\n/* harmony export */   \"HMSPlaylistType\": () => (/* binding */ M),\n/* harmony export */   \"HMSPluginUnsupportedTypes\": () => (/* binding */ re),\n/* harmony export */   \"HMSRemoteAudioTrack\": () => (/* binding */ Ht),\n/* harmony export */   \"HMSRemoteVideoTrack\": () => (/* binding */ me),\n/* harmony export */   \"HMSRoomType\": () => (/* binding */ vr),\n/* harmony export */   \"HMSRoomUpdate\": () => (/* binding */ ne),\n/* harmony export */   \"HMSSdk\": () => (/* binding */ Di),\n/* harmony export */   \"HMSSimulcastLayer\": () => (/* binding */ U),\n/* harmony export */   \"HMSTrack\": () => (/* binding */ he),\n/* harmony export */   \"HMSTrackType\": () => (/* binding */ _),\n/* harmony export */   \"HMSTrackUpdate\": () => (/* binding */ N),\n/* harmony export */   \"HMSVideoCodec\": () => (/* binding */ Ge),\n/* harmony export */   \"HMSVideoPluginCanvasContextType\": () => (/* binding */ Fe),\n/* harmony export */   \"HMSVideoPluginType\": () => (/* binding */ we),\n/* harmony export */   \"HMSVideoPluginsManager\": () => (/* binding */ ot),\n/* harmony export */   \"HMSVideoTrack\": () => (/* binding */ Oe),\n/* harmony export */   \"HMSWebrtcInternals\": () => (/* binding */ mt),\n/* harmony export */   \"HMSWebrtcStats\": () => (/* binding */ ht),\n/* harmony export */   \"getAnalyticsDeviceId\": () => (/* binding */ hr),\n/* harmony export */   \"getLocalDevices\": () => (/* binding */ wc),\n/* harmony export */   \"getLocalScreen\": () => (/* binding */ Hc),\n/* harmony export */   \"getLocalStream\": () => (/* binding */ Vr),\n/* harmony export */   \"isBrowser\": () => (/* binding */ se),\n/* harmony export */   \"isMobile\": () => (/* binding */ pr),\n/* harmony export */   \"isNode\": () => (/* binding */ fe),\n/* harmony export */   \"isPageHidden\": () => (/* binding */ mr),\n/* harmony export */   \"isSupported\": () => (/* binding */ ji),\n/* harmony export */   \"parsedUserAgent\": () => (/* binding */ _e),\n/* harmony export */   \"userAgent\": () => (/* binding */ pe),\n/* harmony export */   \"validateDeviceAV\": () => (/* binding */ qh)\n/* harmony export */ });\n/* harmony import */ var webrtc_adapter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! webrtc-adapter */ \"./node_modules/webrtc-adapter/src/js/adapter_core.js\");\n/* harmony import */ var ua_parser_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ua-parser-js */ \"./node_modules/ua-parser-js/src/ua-parser.js\");\n/* harmony import */ var ua_parser_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(ua_parser_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! uuid */ \"./node_modules/uuid/dist/esm-browser/v4.js\");\n/* harmony import */ var sdp_transform__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! sdp-transform */ \"./node_modules/sdp-transform/lib/index.js\");\n/* harmony import */ var eventemitter2__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! eventemitter2 */ \"./node_modules/eventemitter2/lib/eventemitter2.js\");\n/* harmony import */ var eventemitter2__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(eventemitter2__WEBPACK_IMPORTED_MODULE_4__);\nvar ri=Object.defineProperty,ii=Object.defineProperties;var ai=Object.getOwnPropertyDescriptors;var Ve=Object.getOwnPropertySymbols;var cr=Object.prototype.hasOwnProperty,dr=Object.prototype.propertyIsEnumerable;var lr=(s,e,t)=>e in s?ri(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,S=(s,e)=>{for(var t in e||(e={}))cr.call(e,t)&&lr(s,t,e[t]);if(Ve)for(var t of Ve(e))dr.call(e,t)&&lr(s,t,e[t]);return s},D=(s,e)=>ii(s,ai(e));var Pt=(s,e)=>{var t={};for(var r in s)cr.call(s,r)&&e.indexOf(r)<0&&(t[r]=s[r]);if(s!=null&&Ve)for(var r of Ve(s))e.indexOf(r)<0&&dr.call(s,r)&&(t[r]=s[r]);return t};var c=(s,e,t)=>new Promise((r,i)=>{var a=l=>{try{d(t.next(l))}catch(u){i(u)}},n=l=>{try{d(t.throw(l))}catch(u){i(u)}},d=l=>l.done?r(l.value):Promise.resolve(l.value).then(a,n);d((t=t.apply(s,e)).next())});var ee=class{constructor(e){this.key=e;this.storage=null}getStorage(){return se&&!this.storage&&(ur(),this.storage=window.localStorage),this.storage}get(){var r;let e=(r=this.getStorage())==null?void 0:r.getItem(this.key);return e?JSON.parse(e):void 0}set(e){var r;let t=JSON.stringify(e);(r=this.getStorage())==null||r.setItem(this.key,t)}clear(){var e;(e=this.getStorage())==null||e.removeItem(this.key)}};var It=\"0.4.0\";var F;(function(l){l[l.VERBOSE=0]=\"VERBOSE\",l[l.DEBUG=1]=\"DEBUG\",l[l.INFO=2]=\"INFO\",l[l.WARN=3]=\"WARN\",l[l.TIME=4]=\"TIME\",l[l.TIMEEND=5]=\"TIMEEND\",l[l.ERROR=6]=\"ERROR\",l[l.NONE=7]=\"NONE\"})(F||(F={}));var ni=typeof window!=\"undefined\"&&typeof window.expect!=\"undefined\",o=class{static v(e,...t){this.log(0,e,...t)}static d(e,...t){this.log(1,e,...t)}static i(e,...t){this.log(2,e,...t)}static w(e,...t){this.log(3,e,...t)}static e(e,...t){this.log(6,e,...t)}static time(e){this.log(4,\"[HMSPerformanceTiming]\",e)}static timeEnd(e){this.log(5,\"[HMSPerformanceTiming]\",e,e)}static cleanUp(){performance.clearMarks(),performance.clearMeasures()}static log(e,t,...r){if(!(this.level.valueOf()>e.valueOf()))switch(e){case 0:{console.log(t,...r);break}case 1:{console.debug(t,...r);break}case 2:{console.info(t,...r);break}case 3:{console.warn(t,...r);break}case 6:{console.error(t,...r);break}case 4:{performance.mark(r[0]);break}case 5:{let i=r[0];try{let a=performance.measure(i,i);this.log(1,t,i,a==null?void 0:a.duration),performance.clearMarks(i),performance.clearMeasures(i)}catch(a){this.log(1,t,i,a)}break}}}};o.level=ni?7:0;var _e=new ua_parser_js__WEBPACK_IMPORTED_MODULE_1__.UAParser,gr,fe=typeof window==\"undefined\"&&!((gr=_e.getBrowser().name)==null?void 0:gr.toLowerCase().includes(\"electron\")),se=typeof window!=\"undefined\",di=()=>!fe,ji=di();function li(){if(fe)return`hmsclient/${It} web_nodejs`;let s=_e.getOS(),e=_e.getDevice(),t=_e.getBrowser(),r=`hmsclient/${It}`,a=`web_${bt(`${s.name}/${s.version}`)}`,n=bt(`${t.name}_${t.version}`),d=n;return e.type&&(d=`${bt(`${e.vendor}_${e.type}`)}/${n}`),`${r} ${a} ${d}`}function bt(s){return s.replace(/ /g,\"_\")}var pr=()=>_e.getDevice().type===\"mobile\",pe=li();o.d(\"[Util]\",\"userAgent\",pe);var hr=()=>{let s,e=new ee(\"hms-analytics-deviceId\"),t=e.get();return t?s=t:(s=(0,uuid__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(),e.set(s)),s},mr=()=>typeof document!=\"undefined\"&&document.hidden;var Sr=class{constructor(){this.valuesMap=new Map}getItem(e){return this.valuesMap.has(e)?String(this.valuesMap.get(e)):null}setItem(e,t){this.valuesMap.set(e,t)}removeItem(e){this.valuesMap.delete(e)}clear(){this.valuesMap.clear()}key(e){if(arguments.length===0)throw new TypeError(\"Failed to execute 'key' on 'Storage': 1 argument required, but only 0 present.\");return Array.from(this.valuesMap.keys())[e]}get length(){return this.valuesMap.size}},ur=()=>{se&&typeof localStorage===void 0&&(window.localStorage=new Sr)};var ne;(function(a){a.RECORDING_STATE_UPDATED=\"RECORDING_STATE_UPDATED\",a.BROWSER_RECORDING_STATE_UPDATED=\"BROWSER_RECORDING_STATE_UPDATED\",a.SERVER_RECORDING_STATE_UPDATED=\"SERVER_RECORDING_STATE_UPDATED\",a.RTMP_STREAMING_STATE_UPDATED=\"RTMP_STREAMING_STATE_UPDATED\",a.HLS_STREAMING_STATE_UPDATED=\"HLS_STREAMING_STATE_UPDATED\"})(ne||(ne={}));var $;(function(T){T[T.PEER_JOINED=0]=\"PEER_JOINED\",T[T.PEER_LEFT=1]=\"PEER_LEFT\",T[T.AUDIO_TOGGLED=2]=\"AUDIO_TOGGLED\",T[T.VIDEO_TOGGLED=3]=\"VIDEO_TOGGLED\",T[T.BECAME_DOMINANT_SPEAKER=4]=\"BECAME_DOMINANT_SPEAKER\",T[T.RESIGNED_DOMINANT_SPEAKER=5]=\"RESIGNED_DOMINANT_SPEAKER\",T[T.STARTED_SPEAKING=6]=\"STARTED_SPEAKING\",T[T.STOPPED_SPEAKING=7]=\"STOPPED_SPEAKING\",T[T.ROLE_UPDATED=8]=\"ROLE_UPDATED\",T[T.PEER_LIST=9]=\"PEER_LIST\",T[T.NAME_UPDATED=10]=\"NAME_UPDATED\",T[T.METADATA_UPDATED=11]=\"METADATA_UPDATED\"})($||($={}));var N;(function(d){d[d.TRACK_ADDED=0]=\"TRACK_ADDED\",d[d.TRACK_REMOVED=1]=\"TRACK_REMOVED\",d[d.TRACK_MUTED=2]=\"TRACK_MUTED\",d[d.TRACK_UNMUTED=3]=\"TRACK_UNMUTED\",d[d.TRACK_DESCRIPTION_CHANGED=4]=\"TRACK_DESCRIPTION_CHANGED\",d[d.TRACK_DEGRADED=5]=\"TRACK_DEGRADED\",d[d.TRACK_RESTORED=6]=\"TRACK_RESTORED\"})(N||(N={}));var vr;(function(e){e[e.DEFAULT=0]=\"DEFAULT\"})(vr||(vr={}));var U;(function(i){i.NONE=\"none\",i.LOW=\"low\",i.MEDIUM=\"medium\",i.HIGH=\"high\"})(U||(U={}));var Tr={f:U.HIGH,h:U.MEDIUM,q:U.LOW};var Ge;(function(r){r.VP8=\"vp8\",r.VP9=\"vp9\",r.H264=\"h264\"})(Ge||(Ge={}));var We;(function(e){e.OPUS=\"opus\"})(We||(We={}));var M;(function(t){t.audio=\"audio\",t.video=\"video\"})(M||(M={}));var q;(function(t){t[t.Publish=0]=\"Publish\",t[t.Subscribe=1]=\"Subscribe\"})(q||(q={}));var E={WebSocketConnectionErrors:{FAILED_TO_CONNECT:1e3,WEBSOCKET_CONNECTION_LOST:1003},InitAPIErrors:{SERVER_ERRORS:2e3,INIT_CONFIG_NOT_AVAILABLE:2002,ENDPOINT_UNREACHABLE:2003,INVALID_TOKEN_FORMAT:2004},TracksErrors:{GENERIC_TRACK:3e3,CANT_ACCESS_CAPTURE_DEVICE:3001,DEVICE_NOT_AVAILABLE:3002,DEVICE_IN_USE:3003,DEVICE_LOST_MIDWAY:3008,NOTHING_TO_RETURN:3005,INVALID_VIDEO_SETTINGS:3006,CODEC_CHANGE_NOT_PERMITTED:3007,AUTOPLAY_ERROR:3008,OVER_CONSTRAINED:3009,NO_AUDIO_DETECTED:3010,SYSTEM_DENIED_PERMISSION:3011},WebrtcErrors:{CREATE_OFFER_FAILED:4001,CREATE_ANSWER_FAILED:4002,SET_LOCAL_DESCRIPTION_FAILED:4003,SET_REMOTE_DESCRIPTION_FAILED:4004,ICE_FAILURE:4005},WebsocketMethodErrors:{SERVER_ERRORS:5e3,ALREADY_JOINED:5001,CANNOT_JOIN_PREVIEW_IN_PROGRESS:5002},GenericErrors:{NOT_CONNECTED:6e3,SIGNALLING:6001,UNKNOWN:6002,NOT_READY:6003,JSON_PARSING_FAILED:6004,TRACK_METADATA_MISSING:6005,RTC_TRACK_MISSING:6006,PEER_METADATA_MISSING:6007,INVALID_ROLE:6008,PREVIEW_IN_PROGRESS:6009,MISSING_MEDIADEVICES:6010,MISSING_RTCPEERCONNECTION:6011},PlaylistErrors:{NO_ENTRY_TO_PLAY:8001,NO_ENTRY_IS_PLAYING:8002}};var v=class extends Error{constructor(e,t,r,i,a,n=!1){super(i);this.code=e;this.name=t;this.message=i;this.description=a;this.isTerminal=n;Object.setPrototypeOf(this,v.prototype),this.action=r.toString()}toAnalyticsProperties(){return{error_name:this.name,error_code:this.code,error_message:this.message,error_description:this.description,action:this.action,is_terminal:this.isTerminal}}addNativeError(e){this.nativeError=e}};var p;(function(R){R.NONE=\"NONE\",R.TRACK=\"TRACK\",R.INIT=\"INIT\",R.PUBLISH=\"PUBLISH\",R.UNPUBLISH=\"UNPUBLISH\",R.JOIN=\"JOIN\",R.SUBSCRIBE=\"SUBSCRIBE\",R.DATA_CHANNEL_SEND=\"DATA_CHANNEL_SEND\",R.RESTART_ICE=\"RESTART_ICE\",R.VIDEO_PLUGINS=\"VIDEO_PLUGINS\",R.AUDIO_PLUGINS=\"AUDIO_PLUGINS\",R.AUTOPLAY=\"AUTOPLAY\",R.RECONNECT_SIGNAL=\"RECONNECT_SIGNAL\",R.VALIDATION=\"VALIDATION\",R.PLAYLIST=\"PLAYLIST\",R.PREVIEW=\"PREVIEW\"})(p||(p={}));var h={WebSocketConnectionErrors:{FailedToConnect(s,e=\"\"){return new v(E.WebSocketConnectionErrors.FAILED_TO_CONNECT,\"WebsocketFailedToConnect\",s,`[WS]: ${e}`,`[WS]: ${e}`)},WebSocketConnectionLost(s,e=\"\"){return new v(E.WebSocketConnectionErrors.WEBSOCKET_CONNECTION_LOST,\"WebSocketConnectionLost\",s,\"Network connection lost \",e)}},InitAPIErrors:{ServerErrors(s,e,t=\"\"){return new v(s,\"ServerErrors\",e,`[INIT]: Server error ${t}`,t,!0)},EndpointUnreachable(s,e=\"\"){return new v(E.InitAPIErrors.ENDPOINT_UNREACHABLE,\"EndpointUnreachable\",s,`Endpoint is not reachable - ${e}`,e)},InvalidTokenFormat(s,e=\"\"){return new v(E.InitAPIErrors.INVALID_TOKEN_FORMAT,\"InvalidTokenFormat\",s,`Token is not in proper JWT format - ${e}`,e,!0)},InitConfigNotAvailable(s,e=\"\"){return new v(E.InitAPIErrors.INIT_CONFIG_NOT_AVAILABLE,\"InitError\",s,`[INIT]: ${e}`,`[INIT]: ${e}`)}},TracksErrors:{GenericTrack(s,e=\"\"){return new v(E.TracksErrors.GENERIC_TRACK,\"GenericTrack\",s,`[TRACK]: ${e}`,`[TRACK]: ${e}`)},CantAccessCaptureDevice(s,e,t=\"\"){return new v(E.TracksErrors.CANT_ACCESS_CAPTURE_DEVICE,\"CantAccessCaptureDevice\",s,`User denied permission to access capture device - ${e}`,t)},DeviceNotAvailable(s,e,t=\"\"){return new v(E.TracksErrors.DEVICE_NOT_AVAILABLE,\"DeviceNotAvailable\",s,`[TRACK]: Capture device is no longer available - ${e}`,t)},DeviceInUse(s,e,t=\"\"){return new v(E.TracksErrors.DEVICE_IN_USE,\"DeviceInUse\",s,`[TRACK]: Capture device is in use by another application - ${e}`,t)},DeviceLostMidway(s,e,t=\"\"){return new v(E.TracksErrors.DEVICE_LOST_MIDWAY,\"DeviceLostMidway\",s,`Lost access to capture device midway - ${e}`,t)},NothingToReturn(s,e=\"\"){return new v(E.TracksErrors.NOTHING_TO_RETURN,\"NothingToReturn\",s,\"There is no media to return. Please select either video or audio or both.\",e)},InvalidVideoSettings(s,e=\"\"){return new v(E.TracksErrors.INVALID_VIDEO_SETTINGS,\"InvalidVideoSettings\",s,\"Cannot enable simulcast when no video settings are provided\",e)},AutoplayBlocked(s,e=\"\"){return new v(E.TracksErrors.AUTOPLAY_ERROR,\"AutoplayBlocked\",s,\"Autoplay blocked because the user didn't interact with the document first\",e)},CodecChangeNotPermitted(s,e=\"\"){return new v(E.TracksErrors.CODEC_CHANGE_NOT_PERMITTED,\"CodecChangeNotPermitted\",s,\"Codec can't be changed mid call.\",e)},OverConstrained(s,e,t=\"\"){return new v(E.TracksErrors.OVER_CONSTRAINED,\"OverConstrained\",s,`[TRACK]: Requested constraints cannot be satisfied with the device hardware - ${e}`,t)},NoAudioDetected(s,e=\"Please check the mic or use another audio input\"){return new v(E.TracksErrors.NO_AUDIO_DETECTED,\"NoAudioDetected\",s,\"No audio input detected from microphone\",e)},SystemDeniedPermission(s,e,t=\"\"){return new v(E.TracksErrors.SYSTEM_DENIED_PERMISSION,\"SystemDeniedPermission\",s,`Operating System denied permission to access capture device - ${e}`,t)}},WebrtcErrors:{CreateOfferFailed(s,e=\"\"){return new v(E.WebrtcErrors.CREATE_OFFER_FAILED,\"CreateOfferFailed\",s,`[${s.toString()}]: Failed to create offer. `,e)},CreateAnswerFailed(s,e=\"\"){return new v(E.WebrtcErrors.CREATE_ANSWER_FAILED,\"CreateAnswerFailed\",s,`[${s.toString()}]: Failed to create answer. `,e)},SetLocalDescriptionFailed(s,e=\"\"){return new v(E.WebrtcErrors.SET_LOCAL_DESCRIPTION_FAILED,\"SetLocalDescriptionFailed\",s,`[${s.toString()}]: Failed to set offer. `,e)},SetRemoteDescriptionFailed(s,e=\"\"){return new v(E.WebrtcErrors.SET_REMOTE_DESCRIPTION_FAILED,\"SetRemoteDescriptionFailed\",s,`[${s.toString()}]: Failed to set answer. `,e)},ICEFailure(s,e=\"\"){return new v(E.WebrtcErrors.ICE_FAILURE,\"ICEFailure\",s,`[${s.toString()}]: Ice connection state FAILED`,e)}},WebsocketMethodErrors:{ServerErrors(s,e,t){return new v(s,\"ServerErrors\",e,t,t,!0)},AlreadyJoined(s,e=\"\"){return new v(E.WebsocketMethodErrors.ALREADY_JOINED,\"AlreadyJoined\",s,\"[JOIN]: You have already joined this room.\",e)},CannotJoinPreviewInProgress(s,e=\"\"){return new v(E.WebsocketMethodErrors.CANNOT_JOIN_PREVIEW_IN_PROGRESS,\"CannotJoinPreviewInProgress\",s,\"[JOIN]: Cannot join if preview is in progress\",e)}},GenericErrors:{NotConnected(s,e=\"\"){return new v(E.GenericErrors.NOT_CONNECTED,\"NotConnected\",s,\"Client is not connected\",e)},Signalling(s,e){return new v(E.GenericErrors.SIGNALLING,\"Signalling\",s,`Unknown signalling error: ${s.toString()} ${e} `,e)},Unknown(s,e){return new v(E.GenericErrors.UNKNOWN,\"Unknown\",s,`Unknown exception: ${e}`,e)},NotReady(s,e=\"\"){return new v(E.GenericErrors.NOT_READY,\"NotReady\",s,e,e)},JsonParsingFailed(s,e,t=\"\"){return new v(E.GenericErrors.JSON_PARSING_FAILED,\"JsonParsingFailed\",s,`Failed to parse JSON message - ${e}`,t)},TrackMetadataMissing(s,e=\"\"){return new v(E.GenericErrors.TRACK_METADATA_MISSING,\"TrackMetadataMissing\",s,\"Track Metadata Missing\",e)},RTCTrackMissing(s,e=\"\"){return new v(E.GenericErrors.RTC_TRACK_MISSING,\"RTCTrackMissing\",s,\"RTC Track missing\",e)},PeerMetadataMissing(s,e=\"\"){return new v(E.GenericErrors.PEER_METADATA_MISSING,\"PeerMetadataMissing\",s,\"Peer Metadata Missing\",e)},ValidationFailed(s,e){return new v(E.GenericErrors.INVALID_ROLE,\"ValidationFailed\",p.VALIDATION,s,e?JSON.stringify(e):\"\")},InvalidRole(s,e){return new v(E.GenericErrors.INVALID_ROLE,\"InvalidRole\",s,\"Invalid role. Join with valid role\",e,!0)},PreviewAlreadyInProgress(s,e=\"\"){return new v(E.GenericErrors.PREVIEW_IN_PROGRESS,\"PreviewAlreadyInProgress\",s,\"[Preview]: Cannot join if preview is in progress\",e)},MissingMediaDevices(){return new v(E.GenericErrors.MISSING_MEDIADEVICES,\"MissingMediaDevices\",p.JOIN,\"navigator.mediaDevices is undefined. 100ms SDK won't work on this website as WebRTC is not supported on HTTP endpoints(missing navigator.mediaDevices). Please ensure you're using the SDK either on localhost or a valid HTTPS endpoint.\",\"\",!0)},MissingRTCPeerConnection(){return new v(E.GenericErrors.MISSING_RTCPEERCONNECTION,\"MissingRTCPeerConnection\",p.JOIN,\"RTCPeerConnection which is a core requirement for WebRTC call was not found, this could be due to an unsupported browser or browser extensions blocking WebRTC\",\"\",!0)}},MediaPluginErrors:{PlatformNotSupported(s,e=\"\"){return new v(7001,\"PlatformNotSupported\",s,\"Check HMS Docs to see the list of supported platforms\",e)},InitFailed(s,e=\"\"){return new v(7002,\"InitFailed\",s,\"Plugin init failed\",e)},ProcessingFailed(s,e=\"\"){return new v(7003,\"ProcessingFailed\",s,\"Plugin processing failed\",e)},AddAlreadyInProgress(s,e=\"\"){return new v(7004,\"AddAlreadyInProgress\",s,\"Plugin add already in progress\",e)},DeviceNotSupported(s,e=\"\"){return new v(7005,\"DeviceNotSupported\",s,\"Check HMS Docs to see the list of supported devices\",e)}},PlaylistErrors:{NoEntryToPlay(s,e){return new v(E.PlaylistErrors.NO_ENTRY_TO_PLAY,\"NoEntryToPlay\",s,\"Reached end of playlist\",e)},NoEntryPlaying(s,e){return new v(E.PlaylistErrors.NO_ENTRY_IS_PLAYING,\"NoEntryIsPlaying\",s,\"No entry is playing at this time\",e)}}};var fr=\"VALIDATIONS\";function te(s){return s!=null}var Rt=()=>{if(!te(RTCPeerConnection)){let s=h.GenericErrors.MissingRTCPeerConnection();throw o.e(fr,s),s}},Ct=()=>{if(!te(navigator.mediaDevices)){let s=h.GenericErrors.MissingMediaDevices();throw o.e(fr,s),s}};function Er(s,e){var i;let t=(0,sdp_transform__WEBPACK_IMPORTED_MODULE_3__.parse)(s.sdp);if(!((i=t.origin)==null?void 0:i.username.startsWith(\"mozilla\")))return s;let r=e?Array.from(e.values()):[];return t.media.forEach(a=>{var l,u,m;let n=(l=a.msid)==null?void 0:l.split(\" \")[0],d=(u=r.find(g=>g.type===a.type&&g.stream_id===n))==null?void 0:u.track_id;d&&(a.msid=(m=a.msid)==null?void 0:m.replace(/\\s(.+)/,` ${d}`))}),{type:s.type,sdp:(0,sdp_transform__WEBPACK_IMPORTED_MODULE_3__.write)(t)}}function kr(s,e){var a;if(!(s==null?void 0:s.sdp)||!e)return;let r=(0,sdp_transform__WEBPACK_IMPORTED_MODULE_3__.parse)(s.sdp).media.find(n=>te(n.mid)&&parseInt(n.mid)===parseInt(e));return(a=r==null?void 0:r.msid)==null?void 0:a.split(\" \")[1]}function Mr(s){return s.sdp.includes(\"usedtx=1\")?s:{type:s.type,sdp:s.sdp.replace(\"useinbandfec=1\",\"useinbandfec=1;usedtx=1\")}}var Ee=\"HMSConnection\",ke=class{constructor(e,t){this.candidates=new Array;this.role=e,this.signal=t}get iceConnectionState(){return this.nativeConnection.iceConnectionState}get connectionState(){return this.nativeConnection.connectionState}get action(){return this.role===q.Publish?p.PUBLISH:p.SUBSCRIBE}addTransceiver(e,t){return this.nativeConnection.addTransceiver(e,t)}createOffer(e,t){return c(this,null,function*(){try{let r=yield this.nativeConnection.createOffer(t);return o.d(Ee,`[role=${this.role}] createOffer offer=${JSON.stringify(r,null,1)}`),Mr(Er(r,e))}catch(r){throw h.WebrtcErrors.CreateOfferFailed(this.action,r.message)}})}createAnswer(e=void 0){return c(this,null,function*(){try{let t=yield this.nativeConnection.createAnswer(e);return o.d(Ee,`[role=${this.role}] createAnswer answer=${JSON.stringify(t,null,1)}`),t}catch(t){throw h.WebrtcErrors.CreateAnswerFailed(this.action,t.message)}})}setLocalDescription(e){return c(this,null,function*(){try{o.d(Ee,`[role=${this.role}] setLocalDescription description=${JSON.stringify(e,null,1)}`),yield this.nativeConnection.setLocalDescription(e)}catch(t){throw h.WebrtcErrors.SetLocalDescriptionFailed(this.action,t.message)}})}setRemoteDescription(e){return c(this,null,function*(){try{o.d(Ee,`[role=${this.role}] setRemoteDescription description=${JSON.stringify(e,null,1)}`),yield this.nativeConnection.setRemoteDescription(e)}catch(t){throw h.WebrtcErrors.SetRemoteDescriptionFailed(this.action,t.message)}})}addIceCandidate(e){return c(this,null,function*(){o.d(Ee,`[role=${this.role}] addIceCandidate candidate=${JSON.stringify(e,null,1)}`),yield this.nativeConnection.addIceCandidate(e)})}get remoteDescription(){return this.nativeConnection.remoteDescription}getSenders(){return this.nativeConnection.getSenders()}removeTrack(e){this.nativeConnection.removeTrack(e)}setMaxBitrate(e,t){return c(this,null,function*(){let r=this.getSenders().find(i=>{var a;return((a=i==null?void 0:i.track)==null?void 0:a.id)===t.getTrackIDBeingSent()});if(r){let i=r.getParameters();i.encodings.length>0&&(i.encodings[0].maxBitrate=e*1e3),yield r.setParameters(i)}else o.w(Ee,`no sender found to setMaxBitrate for track - ${t.trackId}, sentTrackId - ${t.getTrackIDBeingSent()}`)})}getStats(){return c(this,null,function*(){return yield this.nativeConnection.getStats()})}close(){return c(this,null,function*(){this.nativeConnection.close()})}};var Me=\"renegotiation-callback-id\",$e=\"ion-sfu\",Ke=100,De=5,Ar=60,Pr=12e3,Ir=1e3,br=5,ye=\"SUBSCRIBE_ICE_CONNECTION_CALLBACK_ID\",Rr=6e4,Cr=1e3,Hr=!1,wr=\"https://event.100ms.live/v2/client/report\",Lr=\"https://event-nonprod.100ms.live/v2/client/report\",_r=100,V={DEVICE_CHANGE:\"device-change\",LOCAL_AUDIO_ENABLED:\"local-audio-enabled\",LOCAL_VIDEO_ENABLED:\"local-video-enabled\",STATS_UPDATE:\"stats-update\",RTC_STATS_UPDATE:\"rtc-stats-update\",TRACK_DEGRADED:\"track-degraded\",TRACK_RESTORED:\"track-restored\",TRACK_AUDIO_LEVEL_UPDATE:\"track-audio-level-update\",LOCAL_AUDIO_SILENCE:\"local-audio-silence\",ANALYTICS:\"analytics\",AUDIO_PLUGIN_FAILED:\"audio-plugin-failed\",POLICY_CHANGE:\"policy-change\",LOCAL_ROLE_UPDATE:\"local-role-update\",AUDIO_TRACK_UPDATE:\"audio-track-update\",AUDIO_TRACK_ADDED:\"audio-track-added\",AUDIO_TRACK_REMOVED:\"audio-track-removed\",AUTOPLAY_ERROR:\"autoplay-error\"};var pi=\"HMSPublishConnection\",qe=class extends ke{constructor(e,t,r,i){super(q.Publish,e);this.observer=r,this.transport=i,this.nativeConnection=new RTCPeerConnection(t),this.nativeConnection.createDataChannel($e,{protocol:\"SCTP\"}),this.nativeConnection.onicecandidate=({candidate:a})=>{a&&e.trickle(this.role,a)},this.nativeConnection.oniceconnectionstatechange=()=>{this.observer.onIceConnectionChange(this.nativeConnection.iceConnectionState)},this.nativeConnection.onconnectionstatechange=()=>{this.observer.onConnectionStateChange(this.nativeConnection.connectionState)}}initAfterJoin(){this.nativeConnection.onnegotiationneeded=()=>c(this,null,function*(){o.d(pi,\"onnegotiationneeded\"),yield this.observer.onRenegotiationNeeded()})}trackUpdate(e){this.transport.trackUpdate(e)}};var Ae=class{constructor(e){this.tracks=new Array;this.nativeStream=e,this.id=e.id}};var Pe=class extends Ae{constructor(e,t){super(e);this.audio=!0;this.video=U.NONE;this.connection=t}setAudio(e){this.audio!==e&&(this.audio=e,this.syncWithApiChannel(!1))}setVideoLayerLocally(e,t){this.video=e,o.d(`[Remote stream] ${t} - ${this.id}`,`Setting layer field to - ${e}`)}setVideoLayer(e,t){this.setVideoLayerLocally(e,t),o.d(`[Remote stream] ${t} - ${this.id}`,`Switching to ${e} layer`),this.syncWithApiChannel()}getSimulcastLayer(){return this.video}isAudioSubscribed(){return this.audio}syncWithApiChannel(e=!0){let t={streamId:this.id,audio:this.audio};e&&(t.video=this.video,t.framerate=this.video),this.connection.sendOverApiDataChannel(JSON.stringify(t))}};var je=class{constructor(e,t,r=\"\"){this.TAG=\"HMSDataChannel\";this.nativeChannel=e,this.observer=t,this.metadata=r,e.onmessage=i=>{this.observer.onMessage(i.data)}}get id(){return this.nativeChannel.id}get label(){return this.nativeChannel.label}get readyState(){return this.nativeChannel.readyState}send(e){o.d(this.TAG,`[${this.metadata}] Sending [size=${e.length}] message=${e}`),this.nativeChannel.send(e)}close(){this.nativeChannel.close()}};var he=class{constructor(e,t,r){this.logIdentifier=\"\";this.stream=e,this.nativeTrack=t,this.source=r}get enabled(){return this.nativeTrack.enabled}get trackId(){return this.firstTrackId||this.sdpTrackId||this.nativeTrack.id}getMediaTrackSettings(){return this.nativeTrack.getSettings()}setEnabled(e){return c(this,null,function*(){this.nativeTrack.enabled=e})}setSdpTrackId(e){this.sdpTrackId=e}setFirstTrackId(e){this.firstTrackId=e}cleanup(){var e;(e=this.nativeTrack)==null||e.stop()}};var _;(function(t){t.AUDIO=\"audio\",t.VIDEO=\"video\"})(_||(_={}));var Ne=class extends he{constructor(e,t,r){super(e,t,r);this.type=_.AUDIO;this.audioElement=null;if(t.kind!==\"audio\")throw new Error(\"Expected 'track' kind = 'audio'\")}getVolume(){return this.audioElement?this.audioElement.volume*100:null}setVolume(e){if(e<0||e>100)throw Error(\"Please pass a valid number between 0-100\");this.subscribeToAudio(e===0?!1:this.enabled),this.audioElement&&(this.audioElement.volume=e/100)}setAudioElement(e){this.audioElement=e}getAudioElement(){return this.audioElement}getOutputDevice(){return this.outputDevice}cleanup(){super.cleanup(),this.audioElement&&(this.audioElement.srcObject=null,this.audioElement.remove(),this.audioElement=null)}setOutputDevice(e){return c(this,null,function*(){var t;if(!this.audioElement){o.d(\"audio-track\",\"no audio element to set output\");return}try{typeof this.audioElement.setSinkId==\"function\"&&(yield(t=this.audioElement)==null?void 0:t.setSinkId(e.deviceId),this.outputDevice=e)}catch(r){o.d(\"audio-track\",r)}})}removeSink(){var e;this.audioElement&&((e=window.HMS)==null?void 0:e.AUDIO_SINK)&&(this.audioElement.srcObject=null,this.subscribeToAudio(!1))}addSink(){var t,r;if(!this.nativeTrack||!this.audioElement||!((t=window.HMS)==null?void 0:t.AUDIO_SINK))return;let e=this.audioElement.srcObject;e instanceof MediaStream&&((r=e.getAudioTracks()[0])==null?void 0:r.id)===this.nativeTrack.id||(this.audioElement.srcObject=new MediaStream([this.nativeTrack]),this.subscribeToAudio(!0))}subscribeToAudio(e){this.stream instanceof Pe&&this.stream.setAudio(e)}};var Ht=class extends Ne{setEnabled(e){var t=r=>super[r];return c(this,null,function*(){e!==this.enabled&&(yield t(\"setEnabled\").call(this,e),this.subscribeToAudio(e))})}};var Oe=class extends he{constructor(e,t,r){super(e,t,r);this.type=_.VIDEO;this.sinkCount=0;if(t.kind!==\"video\")throw new Error(\"Expected 'track' kind = 'video'\")}hasSinks(){return this.sinkCount>0}addSink(e){this.addSinkInternal(e,this.nativeTrack)}removeSink(e){e.srcObject!==null&&(e.srcObject=null,this.sinkCount>0&&this.sinkCount--)}addSinkInternal(e,t){var i;let r=e.srcObject;r!==null&&r instanceof MediaStream&&((i=r.getVideoTracks()[0])==null?void 0:i.id)===t.id||(e.srcObject=new MediaStream([t]),this.sinkCount++)}};var me=class extends Oe{constructor(){super(...arguments);this._degraded=!1;this._degradedAt=null;this._layerDefinitions=[];this.history=new Dr}get degraded(){return this._degraded}get degradedAt(){return this._degradedAt}setEnabled(e){var t=r=>super[r];return c(this,null,function*(){e!==this.enabled&&(yield t(\"setEnabled\").call(this,e))})}preferLayer(e){!this.shouldSendVideoLayer(e,\"preferLayer\")||(this.stream.setVideoLayer(e,this.logIdentifier),this.pushInHistory(`uiPreferLayer-${e}`))}getSimulcastLayer(){return this.stream.getSimulcastLayer()}addSink(e){super.addSink(e),this.updateLayer(\"addSink\"),this.pushInHistory(\"uiSetLayer-high\")}removeSink(e){super.removeSink(e),this.updateLayer(\"removeSink\"),this._degraded=!1,this.pushInHistory(\"uiSetLayer-none\")}getSimulcastDefinitions(){return[...this._layerDefinitions]}setSimulcastDefinitons(e){this._layerDefinitions=e}setLayerFromServer(e,t){this._degraded=t,this._degradedAt=t?new Date:this._degradedAt,this.stream.setVideoLayerLocally(e,this.logIdentifier),this.pushInHistory(`sfuLayerUpdate-${e}`)}setDegradedFromSdk(e){this._degraded=e,this._degradedAt=e?new Date:this._degradedAt,this.updateLayer(\"sdkDegradation\"),this.pushInHistory(e?\"sdkDegraded-none\":\"sdkRecovered-high\")}updateLayer(e){let t=this.degraded||!this.hasSinks()?U.NONE:U.HIGH;!this.shouldSendVideoLayer(t,e)||this.stream.setVideoLayer(t,this.logIdentifier)}pushInHistory(e){Hr&&this.history.push({name:e,layer:this.getSimulcastLayer(),degraded:this.degraded})}shouldSendVideoLayer(e,t){let r=this.getSimulcastLayer();return this.degraded&&e===U.NONE?!0:r===e?(o.d(`[Remote Track] ${this.logIdentifier}`,`Not sending update, already on layer ${e}, source=${t}`),!1):!0}},Dr=class{constructor(){this.history=[]}push(e){e.time=new Date().toISOString().split(\"T\")[1],this.history.push(e)}};var Je=class extends ke{constructor(e,t,r){super(q.Subscribe,e);this.TAG=\"[HMSSubscribeConnection]\";this.remoteStreams=new Map;this.pendingMessageQueue=[];this.handlePendingApiMessages=()=>{this.pendingMessageQueue.length>0&&(o.d(this.TAG,\"Found pending message queue, sending messages\"),this.pendingMessageQueue.forEach(e=>this.sendOverApiDataChannel(e)),this.pendingMessageQueue.length=0)};this.observer=r,this.nativeConnection=new RTCPeerConnection(t),this.initNativeConnectionCallbacks()}initNativeConnectionCallbacks(){this.nativeConnection.oniceconnectionstatechange=()=>{this.observer.onIceConnectionChange(this.nativeConnection.iceConnectionState)},this.nativeConnection.onconnectionstatechange=()=>{this.observer.onConnectionStateChange(this.nativeConnection.connectionState)},this.nativeConnection.ondatachannel=e=>{e.channel.label===$e&&(this.apiChannel=new je(e.channel,{onMessage:t=>{this.observer.onApiChannelMessage(t)}},`role=${this.role}`),e.channel.onopen=this.handlePendingApiMessages)},this.nativeConnection.onicecandidate=e=>{e.candidate!==null&&this.signal.trickle(this.role,e.candidate)},this.nativeConnection.ontrack=e=>{var l;let t=e.streams[0],r=t.id;if(!this.remoteStreams.has(r)){let u=new Pe(t,this);this.remoteStreams.set(r,u),t.onremovetrack=m=>{let g=u.tracks.findIndex(T=>T.nativeTrack.id===m.track.id);if(g>=0){let T=u.tracks[g];this.observer.onTrackRemove(T),u.tracks.splice(g,1),u.tracks.length===0&&this.remoteStreams.delete(r)}}}let i=this.remoteStreams.get(r),a=e.track.kind===\"audio\"?Ht:me,n=new a(i,e.track),d=kr(this.remoteDescription,(l=e.transceiver)==null?void 0:l.mid);d&&n.setSdpTrackId(d),i.tracks.push(n),this.observer.onTrackAdd(n)}}sendOverApiDataChannel(e){this.apiChannel&&this.apiChannel.readyState===\"open\"?this.apiChannel.send(e):(o.w(this.TAG,`API Data channel not ${this.apiChannel?\"open\":\"present\"}, queueing`,e),this.pendingMessageQueue.push(e))}close(){var e=t=>super[t];return c(this,null,function*(){var r;yield e(\"close\").call(this),(r=this.apiChannel)==null||r.close()})}};var wt=\"InitService\",Qe=class{static handleError(e,t){switch(e.status){case 404:throw h.InitAPIErrors.EndpointUnreachable(p.INIT,t.message||e.statusText);case 200:break;default:throw h.InitAPIErrors.ServerErrors(t.code||e.status,p.INIT,t.message||(e==null?void 0:e.statusText))}}static fetchInitConfig(e,t,r=\"https://prod-init.100ms.live\",i=\"\"){return c(this,null,function*(){o.d(wt,`fetchInitConfig: initEndpoint=${r} token=${e} peerId=${t} region=${i} `);let a=hi(r,t,i);try{let n=yield fetch(a,{headers:{Authorization:`Bearer ${e}`}}),d=yield n.json();return this.handleError(n,d),o.d(wt,`config is ${JSON.stringify(d,null,2)}`),mi(d)}catch(n){let d=n;throw[\"Failed to fetch\",\"NetworkError\"].some(l=>d.message.includes(l))?h.InitAPIErrors.EndpointUnreachable(p.INIT,d.message):d}})}};function hi(s,e,t){try{let r=new URL(\"/init\",s);return t&&t.trim().length>0&&r.searchParams.set(\"region\",t.trim()),r.searchParams.set(\"peer_id\",e),r.searchParams.set(\"user_agent\",pe),r.toString()}catch(r){let i=r;throw o.e(wt,i.name,i.message),i}}function mi(s){var e;return D(S({},s),{rtcConfiguration:D(S({},s.rtcConfiguration),{iceServers:(e=s.rtcConfiguration)==null?void 0:e.ice_servers})})}var w;(function(k){k.JOIN=\"join\",k.OFFER=\"offer\",k.ANSWER=\"answer\",k.TRICKLE=\"trickle\",k.TRACK_UPDATE=\"track-update\",k.BROADCAST=\"broadcast\",k.ANALYTICS=\"analytics\",k.SERVER_ERROR=\"on-error\",k.SERVER_WARNING=\"on-warning\",k.SDK_NOTIFICATION=\"sdk-notification\",k.LEAVE=\"leave\",k.END_ROOM=\"end-room\",k.PING=\"ping\",k.ROLE_CHANGE_REQUEST=\"role-change-request\",k.ROLE_CHANGE=\"role-change\",k.TRACK_UPDATE_REQUEST=\"track-update-request\",k.PEER_LEAVE_REQUEST=\"peer-leave-request\",k.CHANGE_TRACK_MUTE_STATE_REQUEST=\"change-track-mute-state-request\",k.START_RTMP_OR_RECORDING_REQUEST=\"rtmp-start\",k.STOP_RTMP_AND_RECORDING_REQUEST=\"rtmp-stop\",k.UPDATE_PEER_METADATA=\"peer-update\",k.START_HLS_STREAMING=\"hls-start\",k.STOP_HLS_STREAMING=\"hls-stop\",k.HLS_TIMED_METADATA=\"hls-timed-metadata\"})(w||(w={}));function Nr(s){switch(s){case w.JOIN:return p.JOIN;case w.OFFER:return p.PUBLISH;case w.ANSWER:return p.SUBSCRIBE;case w.TRACK_UPDATE:return p.TRACK;default:return p.NONE}}var ge=class{constructor(e=1/0){this.capacity=e;this.storage=[]}size(){return this.storage.length}toList(){return this.storage.slice(0)}enqueue(e){this.size()===this.capacity&&this.dequeue(),this.storage.push(e)}dequeue(){return this.storage.shift()}aggregate(e){return e(this.storage)}};function j(s){if(s<0)throw Error(\"`ms` should be a positive integer\");return new Promise(e=>setTimeout(e,s))}var Ye=class{constructor(e){this.TAG=\"[ SIGNAL ]: \";this.pongResponseTimes=new ge(br);this.isJoinCompleted=!1;this.pendingTrickle=[];this.socket=null;this.callbacks=new Map;this._isConnected=!1;this.id=0;this.observer=e,window.addEventListener(\"offline\",()=>{o.d(this.TAG,\"Window network offline\"),this.setIsConnected(!1,\"Window network offline\")}),window.addEventListener(\"online\",()=>{o.d(this.TAG,\"Window network online\"),this.observer.onNetworkOnline()}),this.onCloseHandler=this.onCloseHandler.bind(this),this.onMessageHandler=this.onMessageHandler.bind(this)}get isConnected(){return this._isConnected}setIsConnected(e,t=\"\"){o.d(this.TAG,`isConnected set id: ${this.id}, oldValue: ${this._isConnected}, newValue: ${e} }`),this._isConnected!==e&&(this._isConnected&&!e?(this._isConnected=e,this.observer.onOffline(t)):!this._isConnected&&e&&(this._isConnected=e,this.observer.onOnline()))}getPongResponseTimes(){return this.pongResponseTimes.toList()}internalCall(e,t){return c(this,null,function*(){var a;let r=(0,uuid__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(),i={method:e,params:t,id:r,jsonrpc:\"2.0\"};(a=this.socket)==null||a.send(JSON.stringify(i));try{return yield new Promise((d,l)=>{this.callbacks.set(r,{resolve:d,reject:l})})}catch(n){let d=n;throw h.WebsocketMethodErrors.ServerErrors(Number(d.code),Nr(e),d.message)}})}notify(e,t){var i;let r={method:e,params:t};(i=this.socket)==null||i.send(JSON.stringify(r))}open(e){return new Promise((t,r)=>{this.socket&&(this.socket.removeEventListener(\"close\",this.onCloseHandler),this.socket.removeEventListener(\"message\",this.onMessageHandler)),this.socket=new WebSocket(e);let i=n=>{o.e(this.TAG,\"Error from websocket\",n),r(h.WebSocketConnectionErrors.FailedToConnect(p.JOIN,`Error opening websocket connection - ${n}`))};this.socket.addEventListener(\"error\",i);let a=()=>{var n,d;t(),this.setIsConnected(!0),this.id++,(n=this.socket)==null||n.removeEventListener(\"open\",a),(d=this.socket)==null||d.removeEventListener(\"error\",i),this.pingPongLoop(this.id)};this.socket.addEventListener(\"open\",a),this.socket.addEventListener(\"close\",this.onCloseHandler),this.socket.addEventListener(\"message\",this.onMessageHandler)})}close(){return c(this,null,function*(){this.socket?(this.socket.close(1e3,\"Normal Close\"),this.setIsConnected(!1,\"code: 1000, normal websocket close\"),this.socket.removeEventListener(\"close\",this.onCloseHandler),this.socket.removeEventListener(\"message\",this.onMessageHandler)):this.setIsConnected(!1,\"websocket not connected yet\")})}join(e,t,r,i,a){return c(this,null,function*(){if(!this.isConnected)throw h.WebSocketConnectionErrors.WebSocketConnectionLost(p.JOIN,\"Failed to send join over WS connection\");let n={name:e,disableVidAutoSub:r,data:t,offer:a,server_sub_degrade:i},d=yield this.internalCall(w.JOIN,n);return this.isJoinCompleted=!0,this.pendingTrickle.forEach(({target:l,candidate:u})=>this.trickle(l,u)),this.pendingTrickle.length=0,o.d(this.TAG,`join: response=${JSON.stringify(d,null,1)}`),d})}trickle(e,t){this.isJoinCompleted?this.notify(w.TRICKLE,{target:e,candidate:t}):this.pendingTrickle.push({target:e,candidate:t})}offer(e,t){return c(this,null,function*(){return yield this.call(w.OFFER,{desc:e,tracks:Object.fromEntries(t)})})}answer(e){this.notify(w.ANSWER,{desc:e})}trackUpdate(e){this.notify(w.TRACK_UPDATE,{version:\"1.0\",tracks:Object.fromEntries(e)})}broadcast(e){return c(this,null,function*(){return yield this.call(w.BROADCAST,S({version:\"1.0\"},e.toSignalParams()))})}leave(){this.notify(w.LEAVE,{version:\"1.0\"})}endRoom(e,t){return c(this,null,function*(){yield this.call(w.END_ROOM,{lock:e,reason:t})})}sendEvent(e){if(!this.isConnected)throw Error(`${this.TAG} not connected. Could not send event ${e}`);this.notify(w.ANALYTICS,e.toSignalParams())}ping(e){let t=Date.now(),r=new Promise(a=>{setTimeout(()=>{a(Date.now()-t)},e+1)}),i=this.internalCall(w.PING,{timestamp:t}).then(()=>Date.now()-t).catch(()=>Date.now()-t);return Promise.race([r,i])}requestRoleChange(e){return c(this,null,function*(){yield this.call(w.ROLE_CHANGE_REQUEST,e)})}acceptRoleChangeRequest(e){return c(this,null,function*(){yield this.call(w.ROLE_CHANGE,e)})}requestTrackStateChange(e){return c(this,null,function*(){yield this.call(w.TRACK_UPDATE_REQUEST,e)})}requestMultiTrackStateChange(e){return c(this,null,function*(){yield this.call(w.CHANGE_TRACK_MUTE_STATE_REQUEST,e)})}removePeer(e){return c(this,null,function*(){yield this.call(w.PEER_LEAVE_REQUEST,e)})}startRTMPOrRecording(e){return c(this,null,function*(){yield this.call(w.START_RTMP_OR_RECORDING_REQUEST,S({version:\"1.0\"},e))})}stopRTMPAndRecording(){return c(this,null,function*(){yield this.call(w.STOP_RTMP_AND_RECORDING_REQUEST,{version:\"1.0\"})})}startHLSStreaming(e){return c(this,null,function*(){yield this.call(w.START_HLS_STREAMING,S({version:\"1.0\"},e))})}stopHLSStreaming(e){return c(this,null,function*(){yield this.call(w.STOP_HLS_STREAMING,S({version:\"1.0\"},e))})}sendHLSTimedMetadata(e){return c(this,null,function*(){yield this.call(w.HLS_TIMED_METADATA,S({version:\"1.0\"},e))})}updatePeer(e){return c(this,null,function*(){yield this.call(w.UPDATE_PEER_METADATA,S({version:\"1.0\"},e))})}onCloseHandler(e){o.d(`Websocket closed code=${e.code}`),this.setIsConnected(!1,`code: ${e.code}${e.code!==1e3?\", unexpected websocket close\":\"\"}`)}onMessageHandler(e){let t=e.data,r=JSON.parse(t);if(r.id)this.handleResponseWithId(r);else if(r.method)this.handleResponseWithMethod(r);else throw Error(`WebSocket message has no 'method' or 'id' field, message=${r}`)}handleResponseWithId(e){let t=e,r=t.id;if(this.callbacks.has(r)){let i=this.callbacks.get(r);this.callbacks.delete(r),t.result?i.resolve(t.result):i.reject(t.error)}else this.observer.onNotification(t)}handleResponseWithMethod(e){switch(e.method){case w.OFFER:this.observer.onOffer(e.params);break;case w.TRICKLE:this.observer.onTrickle(e.params);break;case w.SERVER_ERROR:this.observer.onServerError(h.WebsocketMethodErrors.ServerErrors(Number(e.params.code),p.NONE,e.params.message));break;case w.SERVER_WARNING:o.w(this.TAG,e.params);break;default:this.observer.onNotification(e);break}}pingPongLoop(e){return c(this,null,function*(){var r,i;let t=((r=window.HMS)==null?void 0:r.PING_TIMEOUT)||Pr;if(this.isConnected){let a=yield this.ping(t);this.pongResponseTimes.enqueue(a),a>t?(o.d(this.TAG,`Pong timeout ${e}, pageHidden=${mr()}`),this.id===e&&this.setIsConnected(!1,\"ping pong failure\")):setTimeout(()=>this.pingPongLoop(e),((i=window.HMS)==null?void 0:i.PING_INTERVAL)||Ir)}})}call(e,t){return c(this,null,function*(){let r=3,i=h.WebsocketMethodErrors.ServerErrors(500,e,`Default ${e} error`);for(let a=0;a<r;a++)try{return o.d(this.TAG,`Try number ${a+1} sending ${e}`,t),yield this.internalCall(e,t)}catch(n){if(i=n,o.e(this.TAG,`Failed sending ${e}`,{method:e,try:a+1,params:t,error:i}),!(parseInt(`${i.code/100}`)===5||i.code===429))break;let l=(2+Math.random()*2)*1e3;yield j(l)}throw o.e(`Sending ${e} over WS failed after ${r} retries`,{method:e,params:t,error:i}),i})}};var J=class{constructor(){this._volume=1;this._codec=We.OPUS;this._maxBitrate=32;this._deviceId=\"default\";this._advanced=[{googEchoCancellation:{exact:!0}},{googExperimentalEchoCancellation:{exact:!0}},{autoGainControl:{exact:!0}},{noiseSuppression:{exact:!0}},{googHighpassFilter:{exact:!0}},{googAudioMirroring:{exact:!0}}]}volume(e){if(!(0<=e&&e<=1))throw Error(\"volume can only be in range [0.0, 1.0]\");return this._volume=e,this}codec(e){return this._codec=e,this}maxBitrate(e){if(e&&e<=0)throw Error(\"maxBitrate should be >= 1\");return this._maxBitrate=e,this}deviceId(e){return this._deviceId=e,this}advanced(e){return this._advanced=e,this}build(){return new Ie(this._volume,this._codec,this._maxBitrate,this._deviceId,this._advanced)}},Ie=class{constructor(e,t,r,i,a){this.volume=e,this.codec=t,this.maxBitrate=r,this.deviceId=i,this.advanced=a}toConstraints(){return{deviceId:this.deviceId,advanced:this.advanced}}toAnalyticsProperties(){return{audio_bitrate:this.maxBitrate,audio_codec:this.codec}}};var G=class{constructor(){this._width=320;this._height=180;this._codec=Ge.VP8;this._maxFramerate=30;this._maxBitrate=150;this._advanced=[]}setWidth(e){return this._width=e,this}setHeight(e){return this._height=e,this}codec(e){return this._codec=e,this}maxFramerate(e){if(e&&e<=0)throw Error(\"maxFramerate should be >= 1\");return this._maxFramerate=e,this}maxBitrate(e,t=!0){if(typeof e==\"number\"&&e<=0)throw Error(\"maxBitrate should be >= 1\");return this._maxBitrate=e,!this._maxBitrate&&t&&(this._maxBitrate=15e4),this}deviceId(e){return this._deviceId=e,this}advanced(e){return this._advanced=e,this}build(){return new be(this._width,this._height,this._codec,this._maxFramerate,this._deviceId,this._advanced,this._maxBitrate)}},be=class{constructor(e,t,r,i,a,n,d){this.width=e,this.height=t,this.codec=r,this.maxFramerate=i,this.maxBitrate=d,this.deviceId=a,this.advanced=n}toConstraints(){return{width:this.width,height:this.height,frameRate:this.maxFramerate,deviceId:this.deviceId}}toAnalyticsProperties(){return{width:this.width,height:this.height,video_bitrate:this.maxBitrate,framerate:this.maxFramerate,video_codec:this.codec}}};var ze=class{constructor(){this._video=new G().build();this._audio=new J().build();this._screen=new G().build();this._simulcast=!1}video(e){return this._video=e,this}audio(e){return this._audio=e,this}screen(e){return this._screen=e,this}simulcast(e){return this._simulcast=e,this}build(){if(this._audio===null&&this._video===null)throw h.TracksErrors.NothingToReturn(p.TRACK);if(this._video===null&&this._simulcast)throw h.TracksErrors.InvalidVideoSettings(p.TRACK,\"Cannot enable simulcast when no video settings are provided\");return new Re(this._video,this._audio,this._simulcast,this._screen||void 0)}},Re=class{constructor(e,t,r,i=null){this.video=e,this.audio=t,this.simulcast=r,this.screen=i}toAnalyticsProperties(){let e={audio_enabled:this.audio!==null,video_enabled:this.video!==null};return this.audio&&(e=S(S({},this.audio.toAnalyticsProperties()),e)),this.video&&(e=S(S({},this.video.toAnalyticsProperties()),e)),e}};var y;(function(f){f.ROOM_STATE=\"room-state\",f.PEER_JOIN=\"on-peer-join\",f.PEER_LEAVE=\"on-peer-leave\",f.PEER_LIST=\"peer-list\",f.TRACK_METADATA_ADD=\"on-track-add\",f.TRACK_UPDATE=\"on-track-update\",f.CHANGE_TRACK_MUTE_STATE_UPDATE=\"on-change-track-mute-state-request\",f.ACTIVE_SPEAKERS=\"active-speakers\",f.CONNECTION_QUALITY=\"on-connection-quality-update\",f.SFU_STATS=\"sfu-stats\",f.ON_SFU_TRACK_LAYER_UPDATE=\"on-track-layer-update\",f.BROADCAST=\"on-broadcast\",f.ROLE_CHANGE=\"on-role-change\",f.POLICY_CHANGE=\"on-policy-change\",f.ROLE_CHANGE_REQUEST=\"on-role-change-request\",f.TRACK_UPDATE_REQUEST=\"on-track-update-request\",f.PEER_UPDATE=\"on-peer-update\",f.PEER_LEAVE_REQUEST=\"on-peer-leave-request\",f.UNSUPPORTED=\"unsupported\",f.RTMP_START=\"on-rtmp-start\",f.RTMP_STOP=\"on-rtmp-stop\",f.RECORDING_START=\"on-record-start\",f.RECORDING_STOP=\"on-record-stop\",f.HLS_START=\"on-hls-start\",f.HLS_STOP=\"on-hls-stop\"})(y||(y={}));var Lt=class{constructor(e,t,r){this.store=e;this.listener=t;this.audioListener=r}handleActiveSpeakers(e){var a,n,d;let t=e[\"speaker-list\"],r=t.map(l=>({audioLevel:l.level,peer:this.store.getPeerById(l.peer_id),track:this.store.getTrackById(l.track_id)}));(a=this.audioListener)==null||a.onAudioLevelUpdate(r),this.store.updateSpeakers(r);let i=t[0];if(i){let l=this.store.getPeerById(i.peer_id);(n=this.listener)==null||n.onPeerUpdate($.BECAME_DOMINANT_SPEAKER,l)}else(d=this.listener)==null||d.onPeerUpdate($.RESIGNED_DOMINANT_SPEAKER,null)}};var Ce=class{constructor({sender:e,message:t,type:r=\"chat\",recipientPeer:i,recipientRoles:a,time:n}){this.sender=e,this.message=t,this.type=r,this.recipientPeer=i,this.recipientRoles=a,this.time=n}toSignalParams(){var i,a;let e=(i=this.recipientRoles)==null?void 0:i.map(n=>n.name),t=(a=this.recipientPeer)==null?void 0:a.peerId,r={info:{message:this.message,type:this.type}};return(e==null?void 0:e.length)&&(r.roles=e),t&&(r.peer_id=t),r}};var oe=class{constructor({peerId:e,name:t,isLocal:r,customerUserId:i,metadata:a,role:n,joinedAt:d}){this.customerUserId=\"\";this.metadata=\"\";this.auxiliaryTracks=[];this.name=t,this.peerId=e,this.isLocal=r,this.customerUserId=i,this.metadata=a,this.joinedAt=d,n&&(this.role=n)}updateRole(e){this.role=e}updateName(e){this.name=e}updateMetadata(e){this.metadata=e}};var xe=class{};xe.makePeerId=()=>(0,uuid__WEBPACK_IMPORTED_MODULE_2__[\"default\"])();var Ze=class extends oe{constructor(e){super(D(S({},e),{peerId:xe.makePeerId(),isLocal:!0}));this.isLocal=!0;this.auxiliaryTracks=[]}};var Xe=class extends oe{constructor(e){super(D(S({},e),{isLocal:!1}));this.isLocal=!1;this.auxiliaryTracks=[];this.fromRoomState=!1;this.fromRoomState=!!e.fromRoomState}};var _t=class{constructor(e,t){this.store=e;this.listener=t}get TAG(){return`[${this.constructor.name}]`}handleNotification(e,t){e===y.BROADCAST&&this.handleBroadcast(t)}handleBroadcast(e){var u;let t=e.peer,r=e.info,i=e.roles,a=this.getSender(t),n=e.private?this.store.getLocalPeer():void 0,d=[];if(i==null?void 0:i.length){let m=this.store.getKnownRoles();for(let g of i)m[g]&&d.push(m[g])}let l=new Ce(D(S({},r),{sender:a,recipientRoles:d,recipientPeer:n,time:new Date(e.timestamp)}));o.d(this.TAG,`Received Message from sender=${t==null?void 0:t.peer_id}: `,l),(u=this.listener)==null||u.onMessageReceived(l)}getSender(e){let t=e?this.store.getPeerById(e.peer_id):void 0;return!t&&e&&(t=new oe({peerId:e.peer_id,name:e.info.name,isLocal:!1,customerUserId:e.info.user_id,metadata:e.info.data})),t}};var Dt=class{constructor(e,t,r,i){this.store=e;this.peerManager=t;this.trackManager=r;this.listener=i;this.handleInitialPeerList=e=>{let t=Object.values(e.peers);this.peerManager.handlePeerList(t)};this.handleReconnectPeerList=e=>{this.handleRepeatedPeerList(e.peers)};this.handlePreviewRoomState=e=>{if(!this.store.hasRoleDetailsArrived())return;let t=e.peers;if(t==null){e.peer_count===0&&this.handleRepeatedPeerList({});return}Object.keys(t).forEach(r=>{t[r].tracks={},t[r].is_from_room_state=!0}),this.handleRepeatedPeerList(t)};this.handleRepeatedPeerList=e=>{let t=this.store.getRemotePeers(),r=Object.values(e),i=t.filter(a=>!e[a.peerId]);o.d(this.TAG,{peersToRemove:i}),i.forEach(a=>{var d;let n={peer_id:a.peerId,role:((d=a.role)==null?void 0:d.name)||\"\",info:{name:a.name,data:a.metadata||\"\",user_id:a.customerUserId||\"\"},tracks:{}};this.peerManager.handlePeerLeave(n)}),r.forEach(a=>{let n=this.store.getPeerById(a.peer_id),d=Object.values(a.tracks);n?(this.store.getPeerTracks(n.peerId).forEach(u=>{var m;a.tracks[u.trackId]||(this.removePeerTrack(n,u.trackId),(m=this.listener)==null||m.onTrackUpdate(N.TRACK_REMOVED,u,n))}),d.forEach(u=>{this.store.getTrackById(u.track_id)||this.store.setTrackState({peerId:n.peerId,trackInfo:u})}),this.trackManager.handleTrackUpdate({peer:{info:a.info,peer_id:a.peer_id},tracks:a.tracks}),this.peerManager.handlePeerUpdate(a)):this.peerManager.handlePeerJoin(a)})}}get TAG(){return`[${this.constructor.name}]`}handleNotification(e,t,r){if(e===y.PEER_LIST){let i=t;r?(o.d(this.TAG,\"RECONNECT_PEER_LIST event\",i),this.handleReconnectPeerList(i)):(o.d(this.TAG,\"PEER_LIST event\",i),this.handleInitialPeerList(i))}else if(e===y.ROOM_STATE){let i=t;this.handlePreviewRoomState(i)}}removePeerTrack(e,t){var r,i;if(((r=e.audioTrack)==null?void 0:r.trackId)===t)e.audioTrack=void 0;else if(((i=e.videoTrack)==null?void 0:i.trackId)===t)e.videoTrack=void 0;else{let a=e.auxiliaryTracks.findIndex(n=>n.trackId===t);a>=0&&e.auxiliaryTracks.splice(a,1)}}};var Q=s=>s?new Date(s):void 0;var Nt=class{constructor(e,t,r){this.store=e;this.trackManager=t;this.listener=r;this.handlePeerList=e=>{var i;if(e.length===0)return;let t=[],r=new Set(e.map(a=>a.peer_id));this.store.getRemotePeers().forEach(({peerId:a,fromRoomState:n})=>{!r.has(a)&&n&&this.store.removePeer(a)});for(let a of e)t.push(this.makePeer(a));(i=this.listener)==null||i.onPeerUpdate($.PEER_LIST,t),this.trackManager.processPendingTracks()};this.handlePeerJoin=e=>{var r;let t=this.makePeer(e);(r=this.listener)==null||r.onPeerUpdate($.PEER_JOINED,t),this.trackManager.processPendingTracks()};this.handlePeerLeave=e=>{var r,i,a,n;let t=this.store.getPeerById(e.peer_id);this.store.removePeer(e.peer_id),o.d(this.TAG,\"PEER_LEAVE event\",e,this.store.getPeers()),!!t&&(t.audioTrack&&((r=this.listener)==null||r.onTrackUpdate(N.TRACK_REMOVED,t.audioTrack,t)),t.videoTrack&&((i=this.listener)==null||i.onTrackUpdate(N.TRACK_REMOVED,t.videoTrack,t)),(a=t.auxiliaryTracks)==null||a.forEach(d=>{var l;(l=this.listener)==null||l.onTrackUpdate(N.TRACK_REMOVED,d,t)}),(n=this.listener)==null||n.onPeerUpdate($.PEER_LEFT,t))}}get TAG(){return`[${this.constructor.name}]`}handleNotification(e,t){switch(e){case y.PEER_JOIN:{let r=t;this.handlePeerJoin(r);break}case y.PEER_LEAVE:{let r=t;this.handlePeerLeave(r);break}case y.PEER_UPDATE:this.handlePeerUpdate(t);break;default:break}}handlePeerUpdate(e){var r;let t=this.store.getPeerById(e.peer_id);if(!!t){if(t.role&&t.role.name!==e.role){let i=this.store.getPolicyForRole(e.role);t.updateRole(i),(r=this.listener)==null||r.onPeerUpdate($.ROLE_UPDATED,t)}this.handlePeerInfoUpdate(S({peer:t},e.info))}}handlePeerInfoUpdate({peer:e,name:t,data:r}){var i,a;!e||(t&&e.name!==t&&(e.updateName(t),(i=this.listener)==null||i.onPeerUpdate($.NAME_UPDATED,e)),r&&e.metadata!==r&&(e.updateMetadata(r),(a=this.listener)==null||a.onPeerUpdate($.METADATA_UPDATED,e)))}makePeer(e){let t=new Xe({peerId:e.peer_id,name:e.info.name,customerUserId:e.info.user_id,metadata:e.info.data,role:this.store.getPolicyForRole(e.role),joinedAt:Q(e.joined_at),fromRoomState:!!e.is_from_room_state});this.store.addPeer(t),o.d(this.TAG,\"adding to the peerList\",t);for(let r in e.tracks)this.store.setTrackState({peerId:e.peer_id,trackInfo:e.tracks[r]});return t}};var Ot=class{constructor(e,t){this.store=e;this.eventBus=t}handlePolicyChange(e){var i;let t=this.store.getLocalPeer();if(t&&!t.role){let a=e.known_roles[e.name];t.updateRole(a)}this.store.setKnownRoles(e.known_roles),this.store.getRoom().templateId=e.template_id;let r=(i=e.known_roles[e.name])==null?void 0:i.publishParams;if(this.store.setPublishParams(r),this.setSimulcastLayers(r),(t==null?void 0:t.role)&&t.role.name!==e.name){let a=this.store.getPolicyForRole(e.name),n=t.role;t.updateRole(a),this.eventBus.localRoleUpdate.publish({oldRole:n,newRole:a})}this.eventBus.policyChange.publish(e)}setSimulcastLayers(e){if(e&&Object.keys(e).length>0){let{videoSimulcastLayers:t,screenSimulcastLayers:r}=e;this.store.setVideoSimulcastLayers(t),this.store.setScreenshareSimulcastLayers(r)}}};var xt=class{constructor(e,t){this.store=e;this.listener=t}handleNotification(e,t){switch(e){case y.ROLE_CHANGE_REQUEST:this.handleRoleChangeRequest(t);break;case y.TRACK_UPDATE_REQUEST:this.handleTrackUpdateRequest(t);break;case y.CHANGE_TRACK_MUTE_STATE_UPDATE:this.handleChangeTrackStateRequest(t);break;default:return}}handleRoleChangeRequest(e){var r;let t={requestedBy:e.requested_by?this.store.getPeerById(e.requested_by):void 0,role:this.store.getPolicyForRole(e.role),token:e.token};(r=this.listener)==null||r.onRoleChangeRequest(t)}handleTrackUpdateRequest(e){let{requested_by:t,track_id:r,mute:i}=e,a=t?this.store.getPeerById(t):void 0,n=this.store.getLocalPeerTracks().find(l=>l.publishedTrackId===r);if(!n)return;let d=()=>{var l;(l=this.listener)==null||l.onChangeTrackStateRequest({requestedBy:a,track:n,enabled:!i})};if(i){if(n.enabled===!i)return;n.setEnabled(!i).then(d)}else d()}handleChangeTrackStateRequest(e){var u;let{type:t,source:r,value:i,requested_by:a}=e,n=a?this.store.getPeerById(a):void 0,d=!i,l=this.getTracksToBeUpdated({type:t,source:r,enabled:d});if(l.length!==0)if(d)(u=this.listener)==null||u.onChangeMultiTrackStateRequest({requestedBy:n,tracks:l,type:t,source:r,enabled:!0});else{let m=[];for(let g of l)m.push(g.setEnabled(!1));Promise.all(m).then(()=>{var g;(g=this.listener)==null||g.onChangeMultiTrackStateRequest({requestedBy:n,tracks:l,enabled:!1})})}}getTracksToBeUpdated({type:e,source:t,enabled:r}){let a=this.store.getLocalPeerTracks();return e&&(a=a.filter(n=>n.type===e)),t&&(a=a.filter(n=>n.source===t)),a.filter(n=>n.enabled!==r)}};var Ft=class{constructor(e,t){this.store=e;this.listener=t;this.TAG=\"RoomUpdateManager\"}handleNotification(e,t){switch(e){case y.PEER_LIST:this.onRoomState(t.room);break;case y.RTMP_START:this.onRTMPStart(t);break;case y.RTMP_STOP:this.onRTMPStop(t);break;case y.RECORDING_START:this.onRecordingStart(t);break;case y.RECORDING_STOP:this.onRecordingStop(t);break;case y.ROOM_STATE:this.handlePreviewRoomState(t);break;default:this.onHLS(e,t);break}}handlePreviewRoomState(e){let{room:t}=e;this.onRoomState(t,e.peer_count)}onRoomState(e,t){var u,m,g;let{recording:r,streaming:i,session_id:a,started_at:n,name:d}=e,l=this.store.getRoom();l.peerCount=t,l.name=d,l.recording.server.running=!!(r==null?void 0:r.sfu.enabled),l.recording.browser.running=!!(r==null?void 0:r.browser.enabled),l.rtmp.running=!!((u=i==null?void 0:i.rtmp)==null?void 0:u.enabled),l.rtmp.startedAt=Q((m=i==null?void 0:i.rtmp)==null?void 0:m.started_at),l.recording.server.startedAt=Q(r==null?void 0:r.sfu.started_at),l.recording.browser.startedAt=Q(r==null?void 0:r.browser.started_at),l.recording.hls=this.getPeerListHLSRecording(r),l.hls=this.convertHls(i==null?void 0:i.hls),l.sessionId=a,l.startedAt=Q(n),(g=this.listener)==null||g.onRoomUpdate(ne.RECORDING_STATE_UPDATED,l)}onRTMPStart(e){var t;this.setRTMPStatus(!((t=e.error)==null?void 0:t.code),e)}onRTMPStop(e){this.setRTMPStatus(!1,e)}onRecordingStart(e){var t;this.setRecordingStatus(!((t=e.error)==null?void 0:t.code),e)}onRecordingStop(e){this.setRecordingStatus(!1,e)}onHLS(e,t){var i,a;if(![y.HLS_START,y.HLS_STOP].includes(e))return;let r=this.store.getRoom();t.enabled=e===y.HLS_START&&!((i=t.error)==null?void 0:i.code),r.hls=this.convertHls(t),r.recording.hls=this.getHLSRecording(t),(a=this.listener)==null||a.onRoomUpdate(ne.HLS_STREAMING_STATE_UPDATED,r)}convertHls(e){var r;let t={running:!!(e==null?void 0:e.enabled),variants:[],error:this.toSdkError(e==null?void 0:e.error)};return(r=e==null?void 0:e.variants)==null||r.forEach(i=>{t.variants.push({meetingURL:i.meeting_url,url:i.url,metadata:i.metadata,startedAt:Q(i.started_at)})}),t}getHLSRecording(e){var r,i,a;let t={running:!1};return(e==null?void 0:e.hls_recording)&&(t={running:!!(e==null?void 0:e.enabled),singleFilePerLayer:!!((r=e.hls_recording)==null?void 0:r.single_file_per_layer),hlsVod:!!((i=e.hls_recording)==null?void 0:i.hls_vod),startedAt:Q((a=e==null?void 0:e.variants)==null?void 0:a[0].started_at),error:this.toSdkError(e.error)}),t}getPeerListHLSRecording(e){var r,i;let t=e==null?void 0:e.hls;return{running:!!(t==null?void 0:t.enabled),startedAt:Q(t==null?void 0:t.started_at),singleFilePerLayer:!!((r=t==null?void 0:t.config)==null?void 0:r.single_file_per_layer),hlsVod:!!((i=t==null?void 0:t.config)==null?void 0:i.hls_vod)}}setRecordingStatus(e,t){var a;let r=this.store.getRoom(),i;t.type===\"sfu\"?(r.recording.server={running:e,startedAt:e?Q(t.started_at):void 0,error:this.toSdkError(t.error)},i=ne.SERVER_RECORDING_STATE_UPDATED):(r.recording.browser={running:e,startedAt:e?Q(t.started_at):void 0,error:this.toSdkError(t.error)},i=ne.BROWSER_RECORDING_STATE_UPDATED),(a=this.listener)==null||a.onRoomUpdate(i,r)}setRTMPStatus(e,t){var i;let r=this.store.getRoom();r.rtmp={running:e,startedAt:e?Q(t.started_at):void 0,error:this.toSdkError(t.error)},(i=this.listener)==null||i.onRoomUpdate(ne.RTMP_STREAMING_STATE_UPDATED,r)}toSdkError(e){if(!(e==null?void 0:e.code))return;let t=e.message||\"error in streaming/recording\",r=new v(e.code,\"ServerErrors\",p.NONE,t,t);return o.e(this.TAG,\"error in streaming/recording\",r),r}};var W;(function(a){a.UNKNOWN=\"unknown(video or audio)\",a.AUDIO=\"audio\",a.VIDEO=\"video\",a.AV=\"audio, video\",a.SCREEN=\"screen\"})(W||(W={}));function vi(s,e){let t=s.toLowerCase();return t.includes(\"device not found\")?h.TracksErrors.DeviceNotAvailable(p.TRACK,e,s):t.includes(\"permission denied\")?h.TracksErrors.CantAccessCaptureDevice(p.TRACK,e,s):h.TracksErrors.GenericTrack(p.TRACK,s)}function Ti(s,e=\"\"){if(webrtc_adapter__WEBPACK_IMPORTED_MODULE_0__[\"default\"].browserDetails.browser===\"chrome\"&&s.name===\"NotAllowedError\"&&s.message.includes(\"denied by system\"))return h.TracksErrors.SystemDeniedPermission(p.TRACK,e,s.message);if(webrtc_adapter__WEBPACK_IMPORTED_MODULE_0__[\"default\"].browserDetails.browser===\"firefox\"&&s.name===\"NotFoundError\"){let r=h.TracksErrors.SystemDeniedPermission(p.TRACK,e,s.message);return r.description=`Capture device is either blocked at Operating System level or not available - ${e}`,r}switch(s.name){case\"OverconstrainedError\":return h.TracksErrors.OverConstrained(p.TRACK,e,s.constraint);case\"NotAllowedError\":return h.TracksErrors.CantAccessCaptureDevice(p.TRACK,e,s.message);case\"NotFoundError\":return h.TracksErrors.DeviceNotAvailable(p.TRACK,e,s.message);case\"NotReadableError\":return h.TracksErrors.DeviceInUse(p.TRACK,e,s.message);case\"TypeError\":return h.TracksErrors.NothingToReturn(p.TRACK,s.message);default:return vi(s.message,e)}}function Z(s,e){let t=Ti(s,e);return t.addNativeError(s),t}function et(s){return c(this,null,function*(){try{return(yield navigator.mediaDevices.getUserMedia({audio:s?s.toConstraints():!1})).getAudioTracks()[0]}catch(e){throw Z(e,W.AUDIO)}})}function tt(s){return c(this,null,function*(){try{return(yield navigator.mediaDevices.getUserMedia({video:s?s.toConstraints():!1})).getVideoTracks()[0]}catch(e){throw Z(e,W.VIDEO)}})}function rt(s){return\"canvas\"in s||s.label===\"MediaStreamAudioDestinationNode\"||s.label===\"\"}var fi=35,Ei=5,Bt=class{constructor(e,t,r){this.track=e;this.audioLevelEvent=t;this.silenceEvent=r;this.TAG=\"[TrackAudioLevelMonitor]\";this.audioLevel=0;this.isMonitored=!1;this.interval=100;this.historyInterval=700;this.history=new ge(this.historyInterval/this.interval);this.detectSilence=()=>c(this,null,function*(){let e=30,t=10,r=0;for(;this.isMonitored;){if(this.track.enabled)if(this.isSilentThisInstant()){if(r++,r>t){this.silenceEvent.publish({track:this.track});break}}else break;yield j(e)}});try{let i=new MediaStream([this.track.nativeTrack]);this.analyserNode=this.createAnalyserNodeForStream(i)}catch(i){o.w(this.TAG,\"Unable to initialize AudioContext\",i)}}start(){this.stop(),this.isMonitored=!0,o.d(this.TAG,\"Starting track Monitor\",this.track),this.loop().then(()=>o.d(this.TAG,\"Stopping track Monitor\",this.track))}stop(){if(!this.analyserNode){o.d(this.TAG,\"AudioContext not initialized\");return}this.sendAudioLevel(0),this.isMonitored=!1}loop(){return c(this,null,function*(){for(;this.isMonitored;)this.sendAudioLevel(this.getMaxAudioLevelOverPeriod()),yield j(this.interval)})}sendAudioLevel(e=0){if(e=e>fi?e:0,Math.abs(this.audioLevel-e)>Ei){this.audioLevel=e;let r={track:this.track,audioLevel:this.audioLevel};this.audioLevelEvent.publish(r)}}getMaxAudioLevelOverPeriod(){if(!this.analyserNode){o.d(this.TAG,\"AudioContext not initialized\");return}let e=this.calculateAudioLevel();return e!==void 0&&this.history.enqueue(e),this.history.aggregate(t=>Math.max(...t))}calculateAudioLevel(){if(!this.analyserNode){o.d(this.TAG,\"AudioContext not initialized\");return}let e=new Uint8Array(this.analyserNode.fftSize);this.analyserNode.getByteTimeDomainData(e);let t=.009,r=t;for(let n of e)r=Math.max(r,(n-128)/128);let i=(Math.log(t)-Math.log(r))/Math.log(t);return Math.ceil(Math.min(Math.max(i*100,0),100))}isSilentThisInstant(){if(!this.analyserNode){o.d(this.TAG,\"AudioContext not initialized\");return}let e=new Uint8Array(this.analyserNode.fftSize);return this.analyserNode.getByteTimeDomainData(e),!e.some(t=>t!==128&&t!==0)}createAnalyserNodeForStream(e){let t=new AudioContext,r=t.createAnalyser();return t.createMediaStreamSource(e).connect(r),r}};var Ut;(function(t){t.TRANSFORM=\"TRANSFORM\",t.ANALYZE=\"ANALYZE\"})(Ut||(Ut={}));var re;(function(t){t.PLATFORM_NOT_SUPPORTED=\"PLATFORM_NOT_SUPPORTED\",t.DEVICE_NOT_SUPPORTED=\"DEVICE_NOT_SUPPORTED\"})(re||(re={}));var Se;(function(r){r.CUSTOM=\"CUSTOM\",r.LOCAL=\"LOCAL\",r.HMS=\"HMS\"})(Se||(Se={}));function ki(){if(se&&window){let s=window.location.hostname;return s===\"localhost\"||s===\"127.0.0.1\"?Se.LOCAL:s.includes(\"app.100ms.live\")?Se.HMS:Se.CUSTOM}return Se.CUSTOM}var xr=ki();var O=class{constructor({name:e,level:t,properties:r,includesPII:i,timestamp:a}){this.metadata={peer:{}};this.name=e,this.level=t,this.includesPII=i||!1,this.properties=r||{},this.timestamp=a||new Date().getTime(),this.event_id=(0,uuid__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(),this.device_id=hr()}toSignalParams(){return{name:this.name,info:D(S({},this.properties),{timestamp:this.timestamp,domain:xr}),timestamp:new Date().getTime()}}};var it;(function(i){i[i.VERBOSE=0]=\"VERBOSE\",i[i.INFO=1]=\"INFO\",i[i.ERROR=2]=\"ERROR\",i[i.OFF=3]=\"OFF\"})(it||(it={}));var L;(function(i){i[i.VERBOSE=0]=\"VERBOSE\",i[i.INFO=1]=\"INFO\",i[i.ERROR=2]=\"ERROR\",i[i.OFF=3]=\"OFF\"})(L||(L={}));var ce=class{static failure(e,t){let r=\"mediaPlugin.failed\",i=L.ERROR,a=S({plugin_name:e},t.toAnalyticsProperties());return new O({name:r,level:i,properties:a})}static audioPluginFailure(e,t,r){let i=\"mediaPlugin.failed\",a=L.ERROR,n=S({plugin_name:e,sampleRate:t},r.toAnalyticsProperties());return new O({name:i,level:a,properties:n})}static audioPluginStats({pluginName:e,duration:t,loadTime:r,sampleRate:i}){let a=\"mediaPlugin.stats\",n=L.INFO,d={plugin_name:e,duration:t,load_time:r,sampleRate:i};return new O({name:a,level:n,properties:d})}static stats({pluginName:e,duration:t,loadTime:r,avgPreProcessingTime:i,avgProcessingTime:a,inputFrameRate:n,pluginFrameRate:d}){let l=\"mediaPlugin.stats\",u=L.INFO,m={plugin_name:e,duration:t,load_time:r,avg_preprocessing_time:i,avg_processing_time:a,input_frame_rate:n,plugin_frame_rate:d};return new O({name:l,level:u,properties:m})}};var Vt=\"AudioPluginsAnalytics\",Gt=class{constructor(e){this.eventBus=e;this.initTime={},this.addedTimestamps={},this.pluginAdded={},this.pluginSampleRate={}}added(e,t){this.pluginAdded[e]=!0,this.addedTimestamps[e]=Date.now(),this.initTime[e]=0,this.pluginSampleRate[e]=t}removed(e){if(this.pluginAdded[e]){let t={pluginName:e,duration:Math.floor((Date.now()-this.addedTimestamps[e])/1e3),loadTime:this.initTime[e],sampleRate:this.pluginSampleRate[e]};this.eventBus.analytics.publish(ce.audioPluginStats(t)),this.clean(e)}}failure(e,t){this.pluginAdded[e]&&(this.eventBus.analytics.publish(ce.audioPluginFailure(e,this.pluginSampleRate[e],t)),this.clean(e))}initWithTime(e,t){return c(this,null,function*(){if(this.initTime[e]){o.i(Vt,`Plugin Already loaded ${e}, time it took: ${this.initTime[e]}`);return}let r;try{r=yield this.timeInMs(t),o.i(Vt,`Time taken for Plugin ${e} initialization : ${r}`)}catch(i){let a=h.MediaPluginErrors.InitFailed(p.AUDIO_PLUGINS,`failed during initialization of plugin${i.message||i}`);throw o.e(Vt,a),this.failure(e,a),a}r&&(this.initTime[e]=r)})}timeInMs(e){return c(this,null,function*(){let t=Date.now();return yield e(),Math.floor(Date.now()-t)})}clean(e){delete this.addedTimestamps[e],delete this.initTime[e],delete this.pluginAdded[e],delete this.pluginSampleRate[e]}};var ie=\"AudioPluginsManager\",yi=48e3,Ai=()=>navigator.userAgent.indexOf(\"Firefox\")!==-1,at=class{constructor(e,t){this.pluginAddInProgress=!1;this.hmsTrack=e,this.pluginsMap=new Map,this.analytics=new Gt(t),this.createAudioContext()}getPlugins(){return Array.from(this.pluginsMap.keys())}addPlugin(e){return c(this,null,function*(){var r;let t=(r=e.getName)==null?void 0:r.call(e);if(!t){o.w(\"no name provided by the plugin\");return}if(this.pluginAddInProgress){let i=h.MediaPluginErrors.AddAlreadyInProgress(p.AUDIO_PLUGINS,\"Add Plugin is already in Progress\");throw this.analytics.added(t,this.audioContext.sampleRate),this.analytics.failure(t,i),o.w(\"can't add another plugin when previous add is in progress\"),i}this.pluginAddInProgress=!0;try{yield this.addPluginInternal(e)}finally{this.pluginAddInProgress=!1}})}addPluginInternal(e){return c(this,null,function*(){var r;let t=(r=e.getName)==null?void 0:r.call(e);if(this.pluginsMap.get(t)){o.w(ie,`plugin - ${t} already added.`);return}yield this.validateAndThrow(t,e);try{this.pluginsMap.size===0?yield this.initAudioNodes():this.prevAudioNode&&this.prevAudioNode.disconnect(),this.analytics.added(t,this.audioContext.sampleRate),yield this.analytics.initWithTime(t,()=>c(this,null,function*(){return e.init()})),this.pluginsMap.set(t,e),yield this.processPlugin(e),yield this.connectToDestination()}catch(i){throw o.e(ie,\"failed to add plugin\",i),i}})}validatePlugin(e){return e.checkSupport(this.audioContext)}validateAndThrow(e,t){return c(this,null,function*(){let r=this.validatePlugin(t);if(r.isSupported)o.i(ie,`plugin is supported,- ${t.getName()}`);else if(this.analytics.added(e,this.audioContext.sampleRate),r.errType===re.PLATFORM_NOT_SUPPORTED){let i=h.MediaPluginErrors.PlatformNotSupported(p.AUDIO_PLUGINS,\"platform not supported, see docs\");throw this.analytics.failure(e,i),yield this.cleanup(),i}else if(r.errType===re.DEVICE_NOT_SUPPORTED){let i=h.MediaPluginErrors.DeviceNotSupported(p.AUDIO_PLUGINS,\"audio device not supported, see docs\");throw this.analytics.failure(e,i),yield this.cleanup(),i}})}removePlugin(e){return c(this,null,function*(){yield this.removePluginInternal(e),this.pluginsMap.size===0?(yield this.cleanup(),o.i(ie,\"No plugins left, stopping plugins loop\"),yield this.hmsTrack.setProcessedTrack(void 0)):yield this.reprocessPlugins()})}cleanup(){return c(this,null,function*(){var e,t,r;for(let i of this.pluginsMap.values())yield this.removePluginInternal(i);yield this.hmsTrack.setProcessedTrack(void 0),(e=this.sourceNode)==null||e.disconnect(),(t=this.prevAudioNode)==null||t.disconnect(),(r=this.outputTrack)==null||r.stop(),this.sourceNode=void 0,this.destinationNode=void 0,this.prevAudioNode=void 0,this.outputTrack=void 0})}closeContext(){return c(this,null,function*(){var e;(e=this.audioContext)==null||e.close(),this.audioContext=void 0})}reprocessPlugins(){return c(this,null,function*(){if(this.pluginsMap.size===0||!this.sourceNode)return;let e=Array.from(this.pluginsMap.values());yield this.cleanup(),yield this.initAudioNodes();for(let t of e)yield this.addPlugin(t)})}initAudioNodes(){return c(this,null,function*(){if(this.audioContext){if(!this.sourceNode){let e=new MediaStream([this.hmsTrack.nativeTrack]);this.sourceNode=this.audioContext.createMediaStreamSource(e)}if(!this.destinationNode){this.destinationNode=this.audioContext.createMediaStreamDestination(),this.outputTrack=this.destinationNode.stream.getAudioTracks()[0];try{yield this.hmsTrack.setProcessedTrack(this.outputTrack)}catch(e){throw o.e(ie,\"error in setting processed track\",e),e}}}})}processPlugin(e){return c(this,null,function*(){try{let t=yield e.processAudioTrack(this.audioContext,this.prevAudioNode||this.sourceNode);this.prevAudioNode&&this.prevAudioNode.connect(t),this.prevAudioNode=t}catch(t){let r=e.getName();o.e(ie,`error in processing plugin ${r}`,t),yield this.removePluginInternal(e)}})}connectToDestination(){return c(this,null,function*(){try{this.prevAudioNode&&this.destinationNode&&this.prevAudioNode.context===this.destinationNode.context&&this.prevAudioNode.connect(this.destinationNode)}catch(e){o.e(ie,\"error in connecting to destination node\",e)}})}removePluginInternal(e){return c(this,null,function*(){var r;let t=(r=e.getName)==null?void 0:r.call(e);if(!this.pluginsMap.get(t)){o.w(ie,`plugin - ${t} not found to remove.`);return}o.i(ie,`removing plugin ${t}`),this.pluginsMap.delete(t),e.stop(),this.analytics.removed(t)})}createAudioContext(){this.audioContext||(Ai()?this.audioContext=new AudioContext:this.audioContext=new AudioContext({sampleRate:yi}))}};var Fr=class{constructor(){this.storage=new ee(\"hms-device-selection\");this.remember=!1;this.TAG=\"HMSDeviceStorage\"}setDevices(e){this.devices=e}rememberDevices(e){this.remember=e}updateSelection(e,{deviceId:t,groupId:r}){if(!this.devices||!this.remember)return;let i=this.devices[e].find(n=>this.isSame({deviceId:t,groupId:r},n));if(!i){o.w(this.TAG,`Could not find device with deviceId: ${t}, groupId: ${r}`);return}let a=this.storage.get()||{};a[e]=i,this.storage.set(a)}getSelection(){if(!!this.remember)return this.storage.get()}cleanup(){this.remember=!1,this.devices=void 0}isSame(e,t){return e.deviceId===t.deviceId&&(e.groupId===t.groupId||!e.groupId)}},Y=new Fr;function Br(s,e){return function(r){return r in s&&s[r]!==e[r]}}var Pi=\"HMSLocalAudioTrack\",He=class extends Ne{constructor(e,t,r,i,a=new J().build()){super(e,t,r);this.eventBus=i;this.handleSettingsChange=e=>c(this,null,function*(){let t=this.stream,r=Br(e,this.settings);r(\"maxBitrate\")&&e.maxBitrate&&(yield t.setMaxBitrate(e.maxBitrate,this)),r(\"advanced\")&&(yield this.nativeTrack.applyConstraints(e.toConstraints()))});this.handleDeviceChange=(e,t=!1)=>c(this,null,function*(){Br(e,this.settings)(\"deviceId\")&&(yield this.replaceTrackWith(e),t||Y.updateSelection(\"audioInput\",{deviceId:e.deviceId,groupId:this.nativeTrack.getSettings().groupId}))});e.tracks.push(this),this.settings=a,a.deviceId===\"default\"&&!rt(t)&&(this.settings=this.buildNewSettings({deviceId:t.getSettings().deviceId})),this.pluginsManager=new at(this,i),this.setFirstTrackId(t.id)}replaceTrackWith(e){return c(this,null,function*(){let t=this.nativeTrack,r=this.enabled,i=Boolean(this.audioLevelMonitor);t==null||t.stop();let a=yield et(e);a.enabled=r;let n=this.stream;yield n.replaceSenderTrack(t,this.processedTrack||a),yield n.replaceStreamTrack(t,a),this.nativeTrack=a,i&&this.initAudioLevelMonitor();try{yield this.pluginsManager.reprocessPlugins()}catch(d){this.eventBus.audioPluginFailed.publish(d)}})}setEnabled(e){var t=r=>super[r];return c(this,null,function*(){e!==this.enabled&&(e&&rt(this.nativeTrack)&&(yield this.replaceTrackWith(this.settings)),yield t(\"setEnabled\").call(this,e),e&&(this.settings=this.buildNewSettings({deviceId:this.nativeTrack.getSettings().deviceId})),this.eventBus.localAudioEnabled.publish({enabled:e,track:this}),this.stream.trackUpdate(this))})}isPublishedTrackId(e){return this.publishedTrackId===e}setSettings(e,t=!1){return c(this,null,function*(){let r=this.buildNewSettings(e);if(yield this.handleDeviceChange(r,t),rt(this.nativeTrack)){this.settings=r;return}yield this.handleSettingsChange(r),this.settings=r})}getPlugins(){return this.pluginsManager.getPlugins()}addPlugin(e){return c(this,null,function*(){return this.pluginsManager.addPlugin(e)})}removePlugin(e){return c(this,null,function*(){return this.pluginsManager.removePlugin(e)})}validatePlugin(e){return this.pluginsManager.validatePlugin(e)}setProcessedTrack(e){return c(this,null,function*(){if(!e){this.processedTrack&&(yield this.stream.replaceSenderTrack(this.processedTrack,this.nativeTrack)),this.processedTrack=void 0;return}e!==this.processedTrack&&(this.processedTrack?yield this.stream.replaceSenderTrack(this.processedTrack,e):yield this.stream.replaceSenderTrack(this.nativeTrack,e),this.processedTrack=e)})}initAudioLevelMonitor(){this.audioLevelMonitor&&this.destroyAudioLevelMonitor(),o.d(Pi,\"Monitor Audio Level for\",this,this.getMediaTrackSettings().deviceId),this.audioLevelMonitor=new Bt(this,this.eventBus.trackAudioLevelUpdate,this.eventBus.localAudioSilence),this.audioLevelMonitor.start(),this.audioLevelMonitor.detectSilence()}destroyAudioLevelMonitor(){var e;(e=this.audioLevelMonitor)==null||e.stop(),this.audioLevelMonitor=void 0}cleanup(){var e=t=>super[t];return c(this,null,function*(){var r;e(\"cleanup\").call(this),yield this.pluginsManager.cleanup(),yield this.pluginsManager.closeContext(),(r=this.processedTrack)==null||r.stop(),this.destroyAudioLevelMonitor()})}getTrackIDBeingSent(){return this.processedTrack?this.processedTrack.id:this.nativeTrack.id}getTrackBeingSent(){return this.processedTrack||this.nativeTrack}buildNewSettings(e){let{volume:t,codec:r,maxBitrate:i,deviceId:a,advanced:n}=S(S({},this.settings),e);return new Ie(t,r,i,a,n)}};var we;(function(t){t.TRANSFORM=\"TRANSFORM\",t.ANALYZE=\"ANALYZE\"})(we||(we={}));var Fe;(function(t){t[\"2D\"]=\"2d\",t.WEBGL=\"webgl\",t.WEBGL2=\"webgl2\"})(Fe||(Fe={}));var st=class{constructor(){this.total=0;this.count=0}add(e){this.count++,this.total+=e}getAvg(){return Math.floor(this.total/this.count)}reset(){this.total=0,this.count=0}};var nt=\"VideoPluginsAnalytics\",Wt=class{constructor(e){this.eventBus=e;this.initTime={},this.preProcessingAvgs=new st,this.addedTimestamps={},this.processingAvgs={},this.pluginAdded={},this.pluginInputFrameRate={},this.pluginFrameRate={}}added(e,t,r){this.pluginAdded[e]=!0,this.addedTimestamps[e]=Date.now(),this.initTime[e]=0,this.processingAvgs[e]=new st,this.pluginInputFrameRate[e]=t,this.pluginFrameRate[e]=r||t}removed(e){var t;if(this.pluginAdded[e]){let r={pluginName:e,duration:Math.floor((Date.now()-this.addedTimestamps[e])/1e3),loadTime:this.initTime[e],avgPreProcessingTime:this.preProcessingAvgs.getAvg(),avgProcessingTime:(t=this.processingAvgs[e])==null?void 0:t.getAvg(),inputFrameRate:this.pluginInputFrameRate[e],pluginFrameRate:this.pluginFrameRate[e]};this.eventBus.analytics.publish(ce.stats(r)),this.clean(e)}}failure(e,t){this.pluginAdded[e]&&(this.eventBus.analytics.publish(ce.failure(e,t)),this.clean(e))}initWithTime(e,t){return c(this,null,function*(){if(this.initTime[e]){o.i(nt,`Plugin Already loaded ${e}, time it took: ${this.initTime[e]}`);return}let r;try{r=yield this.timeInMs(t),o.i(nt,`Time taken for Plugin ${e} initialization : ${r}`)}catch(i){let a=h.MediaPluginErrors.InitFailed(p.VIDEO_PLUGINS,`failed during initialization of plugin${i.message||i}`);throw o.e(nt,a),this.failure(e,a),a}r&&(this.initTime[e]=r)})}preProcessWithTime(e){return c(this,null,function*(){let t=yield this.timeInMs(e);this.preProcessingAvgs.add(t)})}processWithTime(e,t){return c(this,null,function*(){var i;let r;try{r=yield this.timeInMs(t)}catch(a){let n=h.MediaPluginErrors.ProcessingFailed(p.VIDEO_PLUGINS,`Failed during processing of plugin${a.message||a}`);throw o.e(nt,n),this.failure(e,n),n}r&&((i=this.processingAvgs[e])==null||i.add(r))})}timeInMs(e){return c(this,null,function*(){let t=Date.now();return yield e(),Math.floor(Date.now()-t)})}clean(e){delete this.addedTimestamps[e],delete this.initTime[e],delete this.processingAvgs[e],delete this.pluginAdded[e],delete this.pluginInputFrameRate[e],delete this.pluginFrameRate[e]}};var Ur=24,Ii=320,bi=240,K=\"VideoPluginsManager\",ot=class{constructor(e,t){this.pluginsLoopRunning=!1;this.pluginsLoopState=\"paused\";this.pluginAddInProgress=!1;this.hmsTrack=e,this.pluginsMap=new Map,this.pluginNumFramesToSkip={},this.pluginNumFramesSkipped={},this.analytics=new Wt(t),this.canvases=new Array}getPlugins(){return Array.from(this.pluginsMap.keys())}addPlugin(e,t){return c(this,null,function*(){var r;if(this.pluginAddInProgress){let i=(r=e.getName)==null?void 0:r.call(e);if(!i||i===\"\"){o.w(\"no name provided by the plugin\");return}let a=h.MediaPluginErrors.AddAlreadyInProgress(p.VIDEO_PLUGINS,\"Add Plugin is already in Progress\");throw this.analytics.failure(i,a),o.w(\"can't add another plugin when previous add is in progress\"),a}this.pluginAddInProgress=!0;try{yield this.addPluginInternal(e,t)}finally{this.pluginAddInProgress=!1}})}addPluginInternal(e,t){return c(this,null,function*(){var n,d;let r=(n=e.getName)==null?void 0:n.call(e);if(!r||r===\"\"){o.w(\"no name provided by the plugin\");return}if(this.pluginsMap.has(r)){o.w(K,`plugin - ${e.getName()} already added.`);return}let i=this.hmsTrack.getMediaTrackSettings().frameRate||Ur,a=0;t&&t>0?(o.i(K,`adding plugin ${e.getName()} with framerate ${t}`),t<i&&(a=Math.ceil(i/t)-1),this.analytics.added(r,i,t)):(o.i(K,`adding plugin ${e.getName()}`),this.analytics.added(r,i)),o.i(K,\"numFrames to skip processing\",a),this.pluginNumFramesToSkip[r]=a,this.pluginNumFramesSkipped[r]=a,this.validateAndThrow(r,e);try{if(yield this.analytics.initWithTime(r,()=>c(this,null,function*(){return yield e.init()})),this.pluginsMap.set(r,e),this.pluginsMap.size+1>this.canvases.length)for(let l=this.canvases.length;l<=this.pluginsMap.size;l++)this.canvases[l]=document.createElement(\"canvas\");yield this.startPluginsLoop((d=e.getContextType)==null?void 0:d.call(e))}catch(l){throw o.e(K,\"failed to add plugin\",l),yield this.removePlugin(e),l}})}validatePlugin(e){return e.checkSupport()}validateAndThrow(e,t){let r=this.validatePlugin(t);if(r.isSupported)o.i(K,`plugin is supported,- ${t.getName()}`);else{let i;switch(r.errType){case re.PLATFORM_NOT_SUPPORTED:throw i=h.MediaPluginErrors.PlatformNotSupported(p.VIDEO_PLUGINS,\"platform not supported, see docs\"),this.analytics.failure(e,i),i;case re.DEVICE_NOT_SUPPORTED:throw i=h.MediaPluginErrors.DeviceNotSupported(p.VIDEO_PLUGINS,\"video device not supported, see docs\"),this.analytics.failure(e,i),i}}}removePlugin(e){return c(this,null,function*(){let t=e.getName();if(!this.pluginsMap.get(t)){o.w(K,`plugin - ${t} not found to remove.`);return}o.i(K,`removing plugin ${t}`),this.removePluginEntry(t),this.pluginsMap.size===0&&(o.i(K,\"No plugins left, stopping plugins loop\"),yield this.stopPluginsLoop()),e.stop(),this.analytics.removed(t)})}removePluginEntry(e){this.pluginsMap.delete(e),this.pluginNumFramesToSkip[e]&&delete this.pluginNumFramesToSkip[e],this.pluginNumFramesSkipped[e]&&delete this.pluginNumFramesSkipped[e]}waitForRestart(){return c(this,null,function*(){if(!(!this.pluginsLoopRunning||this.pluginsLoopState===\"running\"))for(;this.pluginsLoopState===\"paused\";)yield j(100)})}cleanup(){return c(this,null,function*(){var e;for(let t of this.pluginsMap.values())yield this.removePlugin(t);(e=this.outputTrack)==null||e.stop()})}initElementsAndStream(e){this.inputCanvas||(this.inputCanvas=document.createElement(\"canvas\")),this.outputCanvas=document.createElement(\"canvas\"),this.inputVideo||(this.inputVideo=document.createElement(\"video\")),this.inputCanvas.getContext(\"2d\"),this.outputCanvas.getContext(e||Fe[\"2D\"]);let t=this.outputCanvas.captureStream();this.outputTrack=t.getVideoTracks()[0]}startPluginsLoop(e){return c(this,null,function*(){if(!this.pluginsLoopRunning){this.initElementsAndStream(e),this.pluginsLoopRunning=!0;try{yield this.hmsTrack.setProcessedTrack(this.outputTrack)}catch(t){throw this.pluginsLoopRunning=!1,o.e(K,\"error in setting processed track\",t),t}this.pluginsLoop().then(()=>{o.d(K,\"processLoop stopped\")})}})}stopPluginsLoop(){return c(this,null,function*(){var e;this.pluginsLoopRunning=!1,yield this.hmsTrack.setProcessedTrack(void 0),this.resetCanvases(),(e=this.outputTrack)==null||e.stop(),this.inputVideo&&(this.inputVideo.srcObject=null,this.inputVideo=void 0)})}pluginsLoop(){return c(this,null,function*(){for(;this.pluginsLoopRunning;){let e=this.hmsTrack.getMediaTrackSettings().frameRate||Ur,t=Math.floor(1e3/e);if(!this.hmsTrack.enabled||this.hmsTrack.nativeTrack.readyState===\"ended\"){this.pluginsLoopState===\"running\"&&this.resetCanvases(),this.pluginsLoopState=\"paused\",yield j(t);continue}let r=0;try{yield this.analytics.preProcessWithTime(()=>c(this,null,function*(){return yield this.doPreProcessing()}));let i=Date.now();yield this.processFramesThroughPlugins(),r=Math.floor(Date.now()-i),r>t&&(r=t)}catch(i){o.e(K,\"error in plugins loop\",i)}this.pluginsLoopState=\"running\",yield j(t-r)}})}doPreProcessing(){return c(this,null,function*(){yield this.addTrackToVideo(),yield this.updateInputCanvas()})}processFramesThroughPlugins(){return c(this,null,function*(){this.canvases[0]=this.inputCanvas;let e=0;for(let t of this.pluginsMap.values()){let r=t.getName();if(!!t){try{let i=this.checkIfSkipRequired(r);if(t.getPluginType()===we.TRANSFORM){let a=(n,d)=>c(this,null,function*(){try{yield t.processVideoFrame(n,d,i)}catch(l){o.e(K,`error in processing plugin ${r}`,l)}});if(i)e===this.pluginsMap.size-1?yield a(this.canvases[e],this.outputCanvas):yield a(this.canvases[e],this.canvases[e+1]);else{let n=this.canvases[e],d=this.canvases[e+1];e===this.pluginsMap.size-1?yield this.analytics.processWithTime(r,()=>c(this,null,function*(){return a(n,this.outputCanvas)})):yield this.analytics.processWithTime(r,()=>c(this,null,function*(){return a(n,d)}))}}else t.getPluginType()===we.ANALYZE&&!i&&(yield this.analytics.processWithTime(r,()=>c(this,null,function*(){return yield t.processVideoFrame(this.inputCanvas)})))}catch(i){o.e(K,`error in processing plugin ${r}`,i),yield this.removePlugin(t)}e++}}})}addTrackToVideo(){return c(this,null,function*(){var t;if(!this.inputVideo)return;let e=this.inputVideo.srcObject;e!==null&&e instanceof MediaStream&&((t=e.getVideoTracks()[0])==null?void 0:t.id)===this.hmsTrack.nativeTrack.id||(this.inputVideo.pause(),this.inputVideo.srcObject=new MediaStream([this.hmsTrack.nativeTrack]),this.inputVideo.muted=!0,this.inputVideo.playsInline=!0,this.inputVideo&&(this.inputVideo.oncanplaythrough=()=>{var r;(r=this.inputVideo)==null||r.play()}))})}updateInputCanvas(){return c(this,null,function*(){if(!this.inputCanvas||!this.inputVideo)return;let{width:e=Ii,height:t=bi}=this.hmsTrack.getMediaTrackSettings();this.inputCanvas.height!==t&&(this.inputCanvas.height=t),this.inputCanvas.width!==e&&(this.inputCanvas.width=e),this.inputCanvas.getContext(\"2d\").drawImage(this.inputVideo,0,0,e,t)})}resetCanvases(){if(!this.outputCanvas||!this.inputCanvas)return;let e=this.inputCanvas.getContext(\"2d\");e&&(e.fillStyle=\"rgb(0, 0, 0)\",e.fillRect(0,0,this.outputCanvas.width,this.outputCanvas.height)),this.canvases=[]}checkIfSkipRequired(e){let t=!1;return this.pluginNumFramesSkipped[e]<this.pluginNumFramesToSkip[e]?(this.pluginNumFramesSkipped[e]++,t=!0):(t=!1,this.pluginNumFramesSkipped[e]=0),t}};var ct=\"HMSLocalStream\",ae=class extends Ae{constructor(){super(...arguments);this.connection=null}setConnection(e){this.connection=e}addTransceiver(e,t){let r=[];if(e instanceof de)if(t.length>0)o.v(ct,\"Simulcast enabled with layers\",t),r.push(...t);else{let a={active:this.nativeStream.active};e.settings.maxBitrate&&!fe&&(a.maxBitrate=e.settings.maxBitrate),r.push(a)}let i=this.connection.addTransceiver(e.getTrackBeingSent(),{streams:[this.nativeStream],direction:\"sendonly\",sendEncodings:r});return this.setPreferredCodec(i,e.nativeTrack.kind),i}setMaxBitrate(e,t){return c(this,null,function*(){var r;yield(r=this.connection)==null?void 0:r.setMaxBitrate(e,t)})}setPreferredCodec(e,t){}replaceTrack(e,t){return c(this,null,function*(){yield this.replaceSenderTrack(e,t),e.stop(),this.replaceStreamTrack(e,t)})}replaceStreamTrack(e,t){this.nativeStream.addTrack(t),this.nativeStream.removeTrack(e)}replaceSenderTrack(e,t){return c(this,null,function*(){var i;let r=(i=this.connection)==null?void 0:i.getSenders().find(a=>a.track&&a.track.id===e.id);if(r===void 0){o.w(ct,`No sender found for trackId=${e.id}`);return}yield r.replaceTrack(t)})}removeSender(e){let t=0;this.connection.getSenders().forEach(r=>{var i,a;if(((i=r.track)==null?void 0:i.id)===e.trackId||((a=r.track)==null?void 0:a.id)===e.getTrackIDBeingSent()){this.connection.removeTrack(r),t+=1;let n=this.tracks.indexOf(e);n!==-1?this.tracks.splice(n,1):o.e(ct,`Cannot find ${e.trackId} in locally stored tracks`)}}),t!==1&&o.e(ct,`Removed ${t} sender's, expected to remove 1`)}trackUpdate(e){var t;(t=this.connection)==null||t.trackUpdate(e)}};var P=class{static connect(e,t,r=new Date,i=new Date,a){let n=this.eventNameFor(\"connect\",e===void 0),d=e?L.ERROR:L.INFO,l=this.getPropertiesWithError(D(S({},t),{[this.KEY_REQUESTED_AT]:r==null?void 0:r.getTime(),[this.KEY_RESPONDED_AT]:i==null?void 0:i.getTime(),endpoint:a}),e);return new O({name:n,level:d,properties:l})}static disconnect(e,t){let r=\"disconnected\",i=e?L.ERROR:L.INFO,a=this.getPropertiesWithError(t,e);return new O({name:r,level:i,properties:a})}static preview(r){var i=r,{error:e}=i,t=Pt(i,[\"error\"]);let a=this.eventNameFor(\"preview\",e===void 0),n=e?L.ERROR:L.INFO,d=this.getPropertiesWithError(t,e);return new O({name:a,level:n,properties:d})}static join(r){var i=r,{error:e}=i,t=Pt(i,[\"error\"]);let a=this.eventNameFor(\"join\",e===void 0),n=e?L.ERROR:L.INFO,d=this.getPropertiesWithError(D(S({},t),{is_preview_called:!!t.is_preview_called}),e);return new O({name:a,level:n,properties:d})}static publish({devices:e,settings:t,error:r}){let i=this.eventNameFor(\"publish\",r===void 0),a=r?L.ERROR:L.INFO,n=this.getPropertiesWithError({devices:e,audio:t==null?void 0:t.audio,video:t==null?void 0:t.video},r);return new O({name:i,level:a,properties:n})}static subscribeFail(e){let t=this.eventNameFor(\"subscribe\",!1),r=L.ERROR,i=this.getErrorProperties(e);return new O({name:t,level:r,properties:i})}static leave(){return new O({name:\"leave\",level:L.INFO})}static autoplayError(){return new O({name:\"autoplayError\",level:L.ERROR})}static deviceChange({selection:e,type:t,devices:r,error:i}){let a=this.eventNameFor(i?\"publish\":`device.${t}`,i===void 0),n=i?L.ERROR:L.INFO,d=this.getPropertiesWithError({selection:e,devices:r},i);return new O({name:a,level:n,properties:d})}static performance(e){let t=\"perf.stats\",r=L.INFO,i=e.toAnalyticsProperties();return new O({name:t,level:r,properties:i})}static rtcStats(e){let t=\"rtc.stats\",r=L.INFO,i=e.toAnalyticsProperties();return new O({name:t,level:r,properties:i})}static degradationStats(e,t){let r=\"video.degradation.stats\",i=L.INFO,a={degradedAt:e.degradedAt,trackId:e.trackId};if(!t&&e.degradedAt instanceof Date){let n=new Date,d=n.valueOf()-e.degradedAt.valueOf();a=D(S({},a),{duration:d,restoredAt:n})}return new O({name:r,level:i,properties:a})}static audioDetectionFail(e,t){let r=this.getPropertiesWithError({device:t},e),i=L.ERROR,a=\"audiopresence.failed\";return new O({name:a,level:i,properties:r})}static previewNetworkQuality(e){return new O({name:\"perf.networkquality.preview\",level:e.error?L.ERROR:L.INFO,properties:e})}static HLSError(e,t=!0){return new O({name:`hls.${t?\"start\":\"stop\"}.failed`,level:L.ERROR,properties:this.getPropertiesWithError(e)})}static RTMPError(e,t=!0){return new O({name:`rtmp.${t?\"start\":\"stop\"}.failed`,level:L.ERROR,properties:this.getPropertiesWithError(e)})}static eventNameFor(e,t){return`${e}.${t?\"success\":\"failed\"}`}static getPropertiesWithError(e,t){let r=this.getErrorProperties(t);return e=S(S({},r),e),e}static getErrorProperties(e){return e?e instanceof v?e.toAnalyticsProperties():{error_name:e.name,error_message:e.message,error_description:e.cause}:{}}};P.KEY_REQUESTED_AT=\"requested_at\",P.KEY_RESPONDED_AT=\"responded_at\";function Vr(s){return c(this,null,function*(){try{return yield navigator.mediaDevices.getUserMedia(s)}catch(e){throw Z(e,W.AV)}})}function Hc(s){return c(this,null,function*(){try{return yield navigator.mediaDevices.getDisplayMedia({video:s,audio:!1})}catch(e){throw Z(e,W.SCREEN)}})}function wc(){return c(this,null,function*(){try{let s=yield navigator.mediaDevices.enumerateDevices(),e={audioinput:[],audiooutput:[],videoinput:[]};return s.forEach(t=>e[t.kind].push(t)),e}catch(s){throw Z(s,W.AV)}})}var dt={audioContext:null,getAudioContext(){return this.audioContext||(this.audioContext=new AudioContext),this.audioContext},resumeContext(){this.getAudioContext().resume().catch(s=>{o.e(\"AudioContext\",s)})}};var H;(function(n){n.INIT=\"init_response_time\",n.WEBSOCKET_CONNECT=\"ws_connect_time\",n.ON_POLICY_CHANGE=\"on_policy_change_time\",n.LOCAL_TRACKS=\"local_tracks_time\",n.JOIN=\"join_time\",n.PREVIEW=\"preview_time\"})(H||(H={}));var $t=class{constructor(){this.eventPerformanceMeasures={}}start(e){performance.mark(e)}end(e){var t;try{this.eventPerformanceMeasures[e]=performance.measure(e,e),o.d(\"[HMSPerformanceTiming]\",e,(t=this.eventPerformanceMeasures[e])==null?void 0:t.duration)}catch(r){o.w(\"[AnalyticsTimer]\",`Error in measuring performance for event ${e}`,{error:r})}}getTimeTaken(e){var t;return(t=this.eventPerformanceMeasures[e])==null?void 0:t.duration}getTimes(...e){return e.reduce((t,r)=>D(S({},t),{[r]:this.getTimeTaken(r)}),{})}cleanUp(){this.eventPerformanceMeasures={}}};var Gr={isAudioMuted:!1,isVideoMuted:!1,audioInputDeviceId:\"default\",audioOutputDeviceId:\"default\",videoDeviceId:\"default\"},Be,le=class{constructor(e,t,r,i,a){this.store=e;this.observer=t;this.deviceManager=r;this.eventBus=i;this.analyticsTimer=a;this.TAG=\"[LocalTrackManager]\"}getTracksToPublish(e){return c(this,null,function*(){let t=this.getTrackSettings(e);if(!t)return[];let r=!!t.audio,i=!!t.video,a=[],{videoTrack:n,audioTrack:d}=yield this.updateCurrentLocalTrackSettings(t),l=(n==null?void 0:n.stream)||(d==null?void 0:d.stream),u=Boolean(n&&this.store.getTrackById(n.trackId)),m=Boolean(d&&this.store.getTrackById(d.trackId));if(u&&m)return[];let g={audio:r&&!d&&(e.isAudioMuted?\"empty\":!0),video:i&&!n&&(e.isVideoMuted?\"empty\":!0)};this.analyticsTimer.start(H.LOCAL_TRACKS);try{o.d(this.TAG,\"Init Local Tracks\",{fetchTrackOptions:g}),a=yield this.getLocalTracks(g,t,l)}catch(T){a=yield this.retryGetLocalTracks(T,t,g,l)}return this.analyticsTimer.end(H.LOCAL_TRACKS),n&&i&&!u&&a.push(n),d&&r&&!m&&a.push(d),a})}getLocalTracks(){return c(this,arguments,function*(e={audio:!0,video:!0},t,r){try{let i=yield this.getNativeLocalTracks(e,t);return this.createHMSLocalTracks(i,t,r)}catch(i){throw this.eventBus.analytics.publish(P.publish({devices:this.deviceManager.getDevices(),error:i,settings:t})),i}})}getNativeLocalTracks(){return c(this,arguments,function*(e={audio:!1,video:!1},t){let r=new Re(e.video===!0?t.video:null,e.audio===!0?t.audio:null,t.simulcast),i=[];return(r.audio||r.video)&&i.push(...yield this.getAVTracks(r)),i.push(...this.getEmptyTracks(e)),i})}getLocalScreen(e,t){return c(this,null,function*(){let r={video:e.toConstraints()};if(t){let m=t.toConstraints();delete m.advanced,r.audio=D(S({},m),{autoGainControl:!1,noiseSuppression:!1,googAutoGainControl:!1,echoCancellation:!1})}let i;try{i=yield navigator.mediaDevices.getDisplayMedia(r)}catch(m){throw Z(m,W.SCREEN)}let a=[],n=new ae(i),d=i.getVideoTracks()[0],l=new de(n,d,\"screen\",this.eventBus,e);a.push(l);let u=i.getAudioTracks()[0];if(u){let m=new He(n,u,\"screen\",this.eventBus,t);a.push(m)}return o.v(this.TAG,\"getLocalScreen\",a),a})}requestPermissions(){return c(this,null,function*(){try{(yield navigator.mediaDevices.getUserMedia({audio:!0,video:!0})).getTracks().forEach(t=>t.stop())}catch(e){o.e(this.TAG,e)}})}static getEmptyVideoTrack(e){var l,u,m;let t=((l=e==null?void 0:e.getSettings())==null?void 0:l.width)||320,r=((u=e==null?void 0:e.getSettings())==null?void 0:u.height)||240,i=10;Be||(Be=Object.assign(document.createElement(\"canvas\"),{width:t,height:r}),(m=Be.getContext(\"2d\"))==null||m.fillRect(0,0,t,r));let n=Be.captureStream(i).getVideoTracks()[0],d=setInterval(()=>{if(n.readyState===\"ended\"){clearInterval(d);return}let g=Be.getContext(\"2d\");if(g){let b=g.getImageData(0,0,1,1).data[0]===0?1:0;g.fillStyle=`rgb(${b}, 0, 0)`,g.fillRect(0,0,1,1)}},1e3/i);return n.onended=()=>{clearInterval(d)},n.enabled=!1,n}static getEmptyAudioTrack(){let e=dt.getAudioContext(),t=e.createOscillator(),r=e.createMediaStreamDestination();t.connect(r),t.start();let i=r.stream.getAudioTracks()[0];return i.enabled=!1,i}getAVTracks(e){return c(this,null,function*(){try{let t=yield navigator.mediaDevices.getUserMedia({audio:e.audio?e.audio.toConstraints():!1,video:e.video?e.video.toConstraints():!1});return t.getVideoTracks().concat(t.getAudioTracks())}catch(t){yield this.deviceManager.init();let r=!!(!this.deviceManager.hasWebcamPermission&&e.video),i=!!(!this.deviceManager.hasMicrophonePermission&&e.audio),a=this.getErrorType(r,i);throw Z(t,a)}})}getTrackSettings(e){let t=this.getAudioSettings(e),r=this.getVideoSettings(e);if(!t&&!r)return null;let i=this.getScreenSettings();return new ze().video(r).audio(t).screen(i).build()}retryGetLocalTracks(e,t,r,i){return c(this,null,function*(){if(e instanceof v&&e.action===p.TRACK){this.observer.onFailure(e);let a=e.code===E.TracksErrors.OVER_CONSTRAINED,n=e.message.includes(\"audio\"),d=e.message.includes(\"video\");if(a){let l=new ze().video(new be).audio(new Ie).build();o.w(this.TAG,\"Fetch AV Tracks failed with overconstrained error\",{fetchTrackOptions:r},{error:e});try{return yield this.getLocalTracks(r,l,i)}catch(u){let m=u instanceof v?u.nativeError:u,g=u;if((m==null?void 0:m.name)===\"OverconstrainedError\"){let T=h.TracksErrors.GenericTrack(p.TRACK,\"Overconstrained error after dropping all constraints\");T.addNativeError(m),g=T}return yield this.retryGetLocalTracks(g,t,r,i)}}r.audio=n?\"empty\":r.audio,r.video=d?\"empty\":r.video,o.w(this.TAG,\"Fetch AV Tracks failed\",{fetchTrackOptions:r},e);try{return yield this.getLocalTracks(r,t,i)}catch(l){return o.w(this.TAG,\"Fetch empty tacks failed\",l),r.audio=r.audio&&\"empty\",r.video=r.video&&\"empty\",this.observer.onFailure(l),yield this.getLocalTracks(r,t,i)}}else return o.w(this.TAG,\"Fetch AV Tracks failed - unknown exception\",e),this.observer.onFailure(e),[]})}getErrorType(e,t){return e&&t?W.AV:e?W.VIDEO:t?W.AUDIO:W.UNKNOWN}getEmptyTracks(e){let t=[];return e.audio===\"empty\"&&t.push(le.getEmptyAudioTrack()),e.video===\"empty\"&&t.push(le.getEmptyVideoTrack()),t}updateCurrentLocalTrackSettings(e){return c(this,null,function*(){let t=this.store.getLocalPeerTracks(),r=t.find(n=>n.type===_.VIDEO&&n.source===\"regular\"),i=t.find(n=>n.type===_.AUDIO&&n.source===\"regular\"),a=t.find(n=>n.type===_.VIDEO&&n.source===\"screen\");return(e==null?void 0:e.video)&&(yield r==null?void 0:r.setSettings(e.video)),(e==null?void 0:e.audio)&&(yield i==null?void 0:i.setSettings(e.audio)),(e==null?void 0:e.screen)&&(yield a==null?void 0:a.setSettings(e.screen)),{videoTrack:r,audioTrack:i}})}getAudioSettings(e){var n;let t=this.store.getPublishParams();if(!t||!((n=t.allowed)==null?void 0:n.includes(\"audio\")))return null;let r=this.store.getLocalPeer(),i=r==null?void 0:r.audioTrack,a=(i==null?void 0:i.settings.deviceId)||e.audioInputDeviceId;return new J().codec(t.audio.codec).maxBitrate(t.audio.bitRate).deviceId(a||Gr.audioInputDeviceId).build()}getVideoSettings(e){var u;let t=this.store.getPublishParams();if(!t||!((u=t.allowed)==null?void 0:u.includes(\"video\")))return null;let r=this.store.getLocalPeer(),i=r==null?void 0:r.videoTrack,a=(i==null?void 0:i.settings.deviceId)||e.videoDeviceId,n=t.video,{width:d=n.width,height:l=n.height}=this.store.getSimulcastDimensions(\"regular\")||{};return new G().codec(n.codec).maxBitrate(n.bitRate).maxFramerate(n.frameRate).setWidth(d).setHeight(l).deviceId(a||Gr.videoDeviceId).build()}getScreenSettings(){var a;let e=this.store.getPublishParams();if(!e||!((a=e.allowed)==null?void 0:a.includes(\"screen\")))return null;let t=e.screen,{width:r=t.width,height:i=t.height}=this.store.getSimulcastDimensions(\"screen\")||{};return new G().maxBitrate(t.bitRate,!1).codec(t.codec).maxFramerate(t.frameRate).setWidth(r).setHeight(i).build()}createHMSLocalTracks(e,t,r){let i=e.find(d=>d.kind===\"video\"),a=e.find(d=>d.kind===\"audio\");r?e.forEach(d=>r==null?void 0:r.nativeStream.addTrack(d)):r=new ae(new MediaStream(e));let n=[];if(a&&(t==null?void 0:t.audio)){let d=new He(r,a,\"regular\",this.eventBus,t.audio);n.push(d)}if(i&&(t==null?void 0:t.video)){let d=new de(r,i,\"regular\",this.eventBus,t.video);n.push(d)}return n}};function Wr(s,e){return function(r){return r in s&&s[r]!==e[r]}}var de=class extends Oe{constructor(e,t,r,i,a=new G().build()){super(e,t,r);this.eventBus=i;this.buildNewSettings=e=>{let{width:t,height:r,codec:i,maxFramerate:a,maxBitrate:n,deviceId:d,advanced:l}=S(S({},this.settings),e);return new be(t,r,i,a,d,l,n)};this.handleSettingsChange=e=>c(this,null,function*(){let t=this.stream,r=Wr(e,this.settings);r(\"maxBitrate\")&&e.maxBitrate&&(yield t.setMaxBitrate(e.maxBitrate,this)),(r(\"width\")||r(\"height\")||r(\"advanced\"))&&(yield this.nativeTrack.applyConstraints(e.toConstraints()))});this.handleDeviceChange=(e,t=!1)=>c(this,null,function*(){if(Wr(e,this.settings)(\"deviceId\")&&this.source===\"regular\"){if(this.enabled){let i=yield this.replaceTrackWith(e);yield this.replaceSender(i,this.enabled),this.nativeTrack=i}t||Y.updateSelection(\"videoInput\",{deviceId:e.deviceId,groupId:this.nativeTrack.getSettings().groupId})}});e.tracks.push(this),this.settings=a,a.deviceId===\"default\"&&t.enabled&&(this.settings=this.buildNewSettings({deviceId:t.getSettings().deviceId})),this.pluginsManager=new ot(this,i),this.setFirstTrackId(this.trackId)}setEnabled(e){var t=r=>super[r];return c(this,null,function*(){if(e!==this.enabled){if(this.source===\"regular\"){let i;e?i=yield this.replaceTrackWith(this.settings):i=yield this.replaceTrackWithBlank(),yield this.replaceSender(i,e),this.nativeTrack=i,e&&(yield this.pluginsManager.waitForRestart(),this.settings=this.buildNewSettings({deviceId:i.getSettings().deviceId}))}yield t(\"setEnabled\").call(this,e),this.eventBus.localVideoEnabled.publish({enabled:e,track:this}),this.stream.trackUpdate(this)}})}isPublishedTrackId(e){return this.publishedTrackId===e}addSink(e){this.addSinkInternal(e,this.processedTrack||this.nativeTrack)}setSettings(e,t=!1){return c(this,null,function*(){let r=this.buildNewSettings(e);if(yield this.handleDeviceChange(r,t),!this.enabled){this.settings=r;return}yield this.handleSettingsChange(r),this.settings=r})}getPlugins(){return this.pluginsManager.getPlugins()}addPlugin(e,t){return c(this,null,function*(){return this.pluginsManager.addPlugin(e,t)})}removePlugin(e){return c(this,null,function*(){return this.pluginsManager.removePlugin(e)})}validatePlugin(e){return this.pluginsManager.validatePlugin(e)}cleanup(){var e=t=>super[t];return c(this,null,function*(){var r;e(\"cleanup\").call(this),yield this.pluginsManager.cleanup(),(r=this.processedTrack)==null||r.stop()})}setProcessedTrack(e){return c(this,null,function*(){if(!this.nativeTrack.enabled){this.processedTrack=e;return}if(!e){this.processedTrack&&(yield this.stream.replaceSenderTrack(this.processedTrack,this.nativeTrack)),this.processedTrack=void 0;return}e!==this.processedTrack&&(this.processedTrack?yield this.stream.replaceSenderTrack(this.processedTrack,e):yield this.stream.replaceSenderTrack(this.nativeTrack,e),this.processedTrack=e)})}getTrackIDBeingSent(){return this.getTrackBeingSent().id}getTrackBeingSent(){return this.enabled?this.processedTrack||this.nativeTrack:this.nativeTrack}replaceTrackWith(e){return c(this,null,function*(){let t=this.nativeTrack;t==null||t.stop();let r=yield tt(e);return this.settings.deviceId===\"default\"&&(this.settings=this.buildNewSettings({deviceId:this.nativeTrack.getSettings().deviceId})),r})}replaceTrackWithBlank(){return c(this,null,function*(){let e=this.nativeTrack;return e==null||e.stop(),le.getEmptyVideoTrack(e)})}replaceSender(e,t){return c(this,null,function*(){let r=this.stream;t?yield r.replaceSenderTrack(this.nativeTrack,this.processedTrack||e):yield r.replaceSenderTrack(this.processedTrack||this.nativeTrack,e),yield r.replaceStreamTrack(this.nativeTrack,e)})}};var Kt=class{constructor(e,t,r){this.store=e;this.eventBus=t;this.listener=r;this.tracksToProcess=new Map;this.handleTrackAdd=e=>{o.d(this.TAG,\"ONTRACKADD\",e,e.nativeTrack),this.store.addTrack(e),this.tracksToProcess.set(e.trackId,e),this.processPendingTracks()};this.handleTrackRemove=e=>{var i;o.d(this.TAG,\"ONTRACKREMOVE\",e,e.nativeTrack);let t=this.store.getTrackState(e.trackId);if(!t)return;e.type===_.AUDIO&&this.eventBus.audioTrackRemoved.publish(e);let r=this.store.getPeerById(t.peerId);!r||(this.removePeerTracks(r,e),this.store.removeTrack(e.trackId),(i=this.listener)==null||i.onTrackUpdate(N.TRACK_REMOVED,e,r))};this.handleTrackLayerUpdate=e=>{var t,r;for(let i in e.tracks){let a=e.tracks[i],n=this.store.getTrackById(i);if(!n)continue;let d=this.store.getPeerByTrackId(i);if(!!d&&n instanceof me){let l=this.isTrackDegraded(a.expected_layer,a.current_layer);n.setLayerFromServer(a.current_layer,l),l?(t=this.listener)==null||t.onTrackUpdate(N.TRACK_DEGRADED,n,d):(r=this.listener)==null||r.onTrackUpdate(N.TRACK_RESTORED,n,d)}}};this.handleTrackUpdate=e=>{var r,i;let t=this.store.getPeerById(e.peer.peer_id);if(!!t)for(let a in e.tracks){let n=Object.assign({},(r=this.store.getTrackState(a))==null?void 0:r.trackInfo),d=e.tracks[a],l=this.store.getTrackById(a);if(this.store.setTrackState({peerId:e.peer.peer_id,trackInfo:S(S({},n),d)}),!l||this.tracksToProcess.has(a))this.processPendingTracks();else{l.setEnabled(!d.mute);let u=this.processTrackUpdate(l,n,d);u&&((i=this.listener)==null||i.onTrackUpdate(u,l,t))}}}}get TAG(){return`[${this.constructor.name}]`}isTrackDegraded(e,t){let r=i=>{switch(i){case U.HIGH:return 3;case U.MEDIUM:return 2;case U.LOW:return 1;case U.NONE:return 0}};return r(t)<r(e)}handleTrackMetadataAdd(e){o.d(this.TAG,\"TRACK_METADATA_ADD\",e);for(let t in e.tracks)this.store.setTrackState({peerId:e.peer.peer_id,trackInfo:e.tracks[t]});this.processPendingTracks()}processPendingTracks(){new Map(this.tracksToProcess).forEach(t=>{var a;let r=this.store.getTrackState(t.trackId);if(!r)return;let i=this.store.getPeerById(r.peerId);!i||(t.source=r.trackInfo.source,t.peerId=i.peerId,t.logIdentifier=i.name,t.setEnabled(!r.trackInfo.mute),this.addAudioTrack(i,t),this.addVideoTrack(i,t),t.type===_.AUDIO?this.eventBus.audioTrackAdded.publish({track:t,peer:i}):(a=this.listener)==null||a.onTrackUpdate(N.TRACK_ADDED,t,i),this.tracksToProcess.delete(t.trackId))})}removePeerTracks(e,t){var i,a;let r=e.auxiliaryTracks.indexOf(t);r>-1?e.auxiliaryTracks.splice(r,1):t.type===_.AUDIO&&((i=e.audioTrack)==null?void 0:i.trackId)===t.trackId?e.audioTrack=void 0:t.type===_.VIDEO&&((a=e.videoTrack)==null?void 0:a.trackId)===t.trackId&&(e.videoTrack=void 0)}addAudioTrack(e,t){t.type===_.AUDIO&&(!e.audioTrack&&t.source===\"regular\"?e.audioTrack=t:e.auxiliaryTracks.push(t))}addVideoTrack(e,t){if(t.type!==_.VIDEO)return;let r=t,i=this.store.getSimulcastDefinitionsForPeer(e,r.source);r.setSimulcastDefinitons(i),!e.videoTrack&&t.source===\"regular\"?e.videoTrack=r:e.auxiliaryTracks.push(r)}processTrackUpdate(e,t,r){let i;return e.setEnabled(!r.mute),t.mute!==r.mute?(i=r.mute?N.TRACK_MUTED:N.TRACK_UNMUTED,e.type===_.AUDIO&&this.eventBus.audioTrackUpdate.publish({track:e,enabled:!r.mute})):t.description!==r.description&&(i=N.TRACK_DESCRIPTION_CHANGED),i}};var qt=class{constructor(e){this.listener=e}handleQualityUpdate(e){var i;let r=e.peers.map(a=>({peerID:a.peer_id,downlinkQuality:a.downlink_score}));(i=this.listener)==null||i.onConnectionQualityUpdate(r)}};var lt=class{constructor(e,t,r,i,a){this.store=e;this.listener=r;this.audioListener=i;this.connectionQualityListener=a;this.TAG=\"[HMSNotificationManager]\";this.hasConsistentRoomStateArrived=!1;this.ignoreNotification=e=>{if(e===y.PEER_LIST)this.hasConsistentRoomStateArrived=!0;else if(e===y.ROOM_STATE)return this.hasConsistentRoomStateArrived;return!1};this.handleTrackAdd=e=>{this.trackManager.handleTrackAdd(e)};this.handleTrackRemove=e=>{this.trackManager.handleTrackRemove(e)};this.updateLocalPeer=({name:e,metadata:t})=>{let r=this.store.getLocalPeer();this.peerManager.handlePeerInfoUpdate({peer:r,name:e,data:t})};this.trackManager=new Kt(this.store,t,this.listener),this.peerManager=new Nt(this.store,this.trackManager,this.listener),this.peerListManager=new Dt(this.store,this.peerManager,this.trackManager,this.listener),this.broadcastManager=new _t(this.store,this.listener),this.policyChangeManager=new Ot(this.store,t),this.requestManager=new xt(this.store,this.listener),this.activeSpeakerManager=new Lt(this.store,this.listener,this.audioListener),this.connectionQualityManager=new qt(this.connectionQualityListener),this.roomUpdateManager=new Ft(this.store,this.listener)}setListener(e){this.listener=e,this.trackManager.listener=e,this.peerManager.listener=e,this.peerListManager.listener=e,this.broadcastManager.listener=e,this.requestManager.listener=e,this.activeSpeakerManager.listener=e,this.roomUpdateManager.listener=e}setAudioListener(e){this.audioListener=e,this.activeSpeakerManager.audioListener=e}setConnectionQualityListener(e){this.connectionQualityListener=e,this.connectionQualityManager.listener=e}handleNotification(e,t=!1){var a,n;let r=e.method,i=e.params;[y.ACTIVE_SPEAKERS,y.SFU_STATS,y.CONNECTION_QUALITY].includes(r)||o.d(this.TAG,`Received notification - ${r}`,{notification:i}),r===y.SFU_STATS&&((a=window.HMS)==null?void 0:a.ON_SFU_STATS)&&typeof((n=window.HMS)==null?void 0:n.ON_SFU_STATS)==\"function\"&&window.HMS.ON_SFU_STATS(e.params),!this.ignoreNotification(r)&&(this.roomUpdateManager.handleNotification(r,i),this.peerManager.handleNotification(r,i),this.requestManager.handleNotification(r,i),this.peerListManager.handleNotification(r,i,t),this.broadcastManager.handleNotification(r,i),this.handleIsolatedMethods(r,i))}handleIsolatedMethods(e,t){switch(e){case y.TRACK_METADATA_ADD:{this.trackManager.handleTrackMetadataAdd(t);break}case y.TRACK_UPDATE:{this.trackManager.handleTrackUpdate(t);break}case y.ON_SFU_TRACK_LAYER_UPDATE:{this.trackManager.handleTrackLayerUpdate(t);break}case y.ACTIVE_SPEAKERS:this.activeSpeakerManager.handleActiveSpeakers(t);break;case y.CONNECTION_QUALITY:this.connectionQualityManager.handleQualityUpdate(t);break;case y.POLICY_CHANGE:this.policyChangeManager.handlePolicyChange(t);break;default:break}}};var ut=class{constructor(e){this.type=e.type,this.source=e.source||\"regular\",this.description=\"\",e instanceof he?(this.mute=!e.enabled,this.track_id=e.publishedTrackId,this.stream_id=e.stream.id):(this.mute=e.mute,this.track_id=e.track_id,this.stream_id=e.stream_id)}};var C;(function(d){d.Disconnected=\"Disconnected\",d.Connecting=\"Connecting\",d.Joined=\"Joined\",d.Preview=\"Preview\",d.Failed=\"Failed\",d.Reconnecting=\"Reconnecting\",d.Leaving=\"Leaving\"})(C||(C={}));var jt=class{constructor(e,t,r=\"\",i=\"\",a=\"https://prod-init.100ms.live/init\",n=!1){this.authToken=e;this.peerId=t;this.peerName=r;this.data=i;this.endpoint=a;this.autoSubscribeVideo=n}};var Le;(function(r){r.FLAG_SERVER_SUB_DEGRADATION=\"subscribeDegradation\",r.FLAG_SERVER_SIMULCAST=\"simulcast\",r.FLAG_NON_WEBRTC_DISABLE_OFFER=\"nonWebRTCDisableOffer\"})(Le||(Le={}));var I;(function(a){a[a.ConnectFailed=0]=\"ConnectFailed\",a[a.SignalDisconnect=1]=\"SignalDisconnect\",a[a.JoinWSMessageFailed=2]=\"JoinWSMessageFailed\",a[a.PublishIceConnectionFailed=3]=\"PublishIceConnectionFailed\",a[a.SubscribeIceConnectionFailed=4]=\"SubscribeIceConnectionFailed\"})(I||(I={}));var $r={[0]:[],[1]:[],[2]:[1],[3]:[1],[4]:[1]};var Jt=class{constructor(e){this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r,e(t,r)})}};var ue=\"[RetryScheduler]\",Qt=class{constructor(e,t){this.onStateChange=e;this.sendEvent=t;this.inProgress=new Map;this.retryTaskIds=[]}schedule(d){return c(this,arguments,function*({category:e,error:t,task:r,originalState:i,maxFailedRetries:a=De,changeState:n=!0}){yield this.scheduleTask({category:e,error:t,changeState:n,task:r,originalState:i,maxFailedRetries:a})})}reset(){this.retryTaskIds.forEach(e=>clearTimeout(e)),this.retryTaskIds=[],this.inProgress.clear()}scheduleTask(l){return c(this,arguments,function*({category:e,error:t,changeState:r,task:i,originalState:a,maxFailedRetries:n=De,failedRetryCount:d=0}){if(o.d(ue,\"schedule: \",{category:I[e],error:t}),d===0){let b=this.inProgress.get(e);if(b){o.d(ue,`schedule: Already a task for ${I[e]} scheduled, waiting for its completion`),yield b.promise;return}let x=new Jt((X,R)=>{});this.inProgress.set(e,x),this.sendEvent(t,e)}let u=!1,m=$r[e];for(let b in m){let x=m[parseInt(b)];try{let X=this.inProgress.get(x);X&&(o.d(ue,`schedule: Suspending retry task of ${I[e]}, waiting for ${I[x]} to recover`),yield X.promise,o.d(ue,`schedule: Resuming retry task ${I[e]} as it's dependency ${I[x]} is recovered`))}catch(X){o.d(ue,`schedule: Stopping retry task of ${I[e]} as it's dependency ${I[x]} failed to recover`),u=!0;break}}if(d>=n||u){if(t.description+=`. [${I[e]}] Could not recover after ${d} tries`,u&&(t.description+=` Could not recover all of it's required dependencies - [${m.map(b=>I[b]).toString()}]`),t.isTerminal=!0,this.inProgress.delete(e),this.sendEvent(t,e),this.reset(),r)this.onStateChange(C.Failed,t);else throw t;return}r&&this.onStateChange(C.Reconnecting,t);let g=this.getDelayForRetryCount(e,d);o.i(ue,`schedule: [${I[e]}] [failedRetryCount=${d}] Scheduling retry task in ${g}ms`);let T;try{T=yield this.setTimeoutPromise(i,g)}catch(b){T=!1,o.w(ue,`[${I[e]}] Un-caught exception ${b.name} in retry-task, initiating retry`,b)}if(T){let b=this.inProgress.get(e);this.inProgress.delete(e),b==null||b.resolve(d),r&&this.inProgress.size===0&&this.onStateChange(a),o.i(ue,`schedule: [${I[e]}] [failedRetryCount=${d}] Recovered \\u267B\\uFE0F`)}else yield this.scheduleTask({category:e,error:t,changeState:r,task:i,originalState:a,maxFailedRetries:n,failedRetryCount:d+1})})}getBaseDelayForTask(e,t){return e===I.JoinWSMessageFailed?2:Math.pow(2,t)}getDelayForRetryCount(e,t){let r=this.getBaseDelayForTask(e,t),i=e===I.JoinWSMessageFailed?Math.random()*2:Math.random();return Math.round(Math.min(r+i,Ar)*1e3)}setTimeoutPromise(e,t){return c(this,null,function*(){return new Promise((r,i)=>{let a=window.setTimeout(()=>c(this,null,function*(){try{let n=yield e();n&&this.retryTaskIds.splice(this.retryTaskIds.indexOf(a),1),r(n)}catch(n){i(n)}}),t);this.retryTaskIds.push(a)})})}};var z;(function(r){r.PROD=\"prod\",r.QA=\"qa\",r.DEV=\"dev\"})(z||(z={}));var Kr=class{constructor(){this.TAG=\"[HTTPAnalyticsTransport]\";this.failedEvents=new ee(\"client-events\");this.isConnected=!0;this.env=null}setEnv(e){this.env=e,this.flushFailedEvents()}sendEvent(e){if(!this.env){this.addEventToStorage(e);return}let t={event:e.name,payload:e.properties,event_id:String(e.timestamp),peer:e.metadata.peer,timestamp:e.timestamp,agent:pe,device_id:e.device_id},r=this.env===z.PROD?wr:Lr;fetch(r,{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${e.metadata.token}`},body:JSON.stringify(t)}).then(i=>{if(i.status===401){this.removeFromStorage(e);return}if(i.status!==200)throw Error(i.statusText);this.removeFromStorage(e)}).catch(i=>{o.v(this.TAG,\"Failed to send event\",i,e),this.addEventToStorage(e)})}flushFailedEvents(){let e=this.failedEvents.get();e==null||e.forEach(t=>this.sendEvent(t))}addEventToStorage(e){let t=this.failedEvents.get()||[];t.find(r=>r.timestamp===e.timestamp)||(t.length===_r&&t.shift(),t.push(e),this.failedEvents.set(t))}removeFromStorage(e){let t=this.failedEvents.get()||[],r=t.findIndex(i=>i.timestamp===e.timestamp);r>-1&&(t.splice(r,1),this.failedEvents.set(t))}},ve=new Kr;var Yt=class{constructor(){this.TAG=\"AnalyticsTransport\"}sendEvent(e){try{this.sendSingleEvent(e),this.flushFailedEvents()}catch(t){o.w(this.TAG,\"sendEvent failed\",t)}}flushFailedEvents(e){var t;try{for(o.d(this.TAG,\"Flushing failed events\",this.failedEvents);this.failedEvents.size()>0;){let r=this.failedEvents.dequeue();r&&(((t=r.metadata)==null?void 0:t.peer.peer_id)===e||!r.metadata.peer.peer_id?this.sendSingleEvent(r):ve.sendEvent(r))}}catch(r){o.w(this.TAG,\"flushFailedEvents failed\",r)}}sendSingleEvent(e){try{this.transportProvider.sendEvent(e),o.d(this.TAG,\"Sent event\",e.name,e)}catch(t){throw o.w(this.TAG,`${this.transportProvider.TAG}.sendEvent failed, adding to local storage events`,{event:e,error:t}),this.failedEvents.enqueue(e),t}}};var zt=class extends ge{constructor(){super(Ke);this.localStorage=new ee(\"hms-analytics\");this.localStorage.clear(),this.initLocalStorageQueue()}enqueue(e){super.enqueue(e),this.localStorage.set(this.storage)}dequeue(){let e=super.dequeue();return this.localStorage.set(this.storage),e}initLocalStorageQueue(){var e;(e=this.localStorage.get())==null||e.forEach(t=>{let r=new O(t);super.enqueue(r)})}};var Zt=class extends Yt{constructor(e){super();this.transportProvider=e;this.failedEvents=new zt}};var pt=class{constructor(e,t){this.store=e;this.eventBus=t;this.TAG=\"[TrackDegradationController]\";this.MAX_RECOVER_GRACE_PERIOD=120;this.recoverAttemptCount=0;this.packetsLost=0;let r=this.store.getSubscribeDegradationParams();this.PACKETS_LOST_THRESHOLD=r.packetLossThreshold,this.MIN_DEGRADE_GRACE_PERIOD=r.degradeGracePeriodSeconds,this.MIN_RECOVER_GRACE_PERIOD=r.recoverGracePeriodSeconds,this.degradeGracePeriod=this.MIN_DEGRADE_GRACE_PERIOD,this.recoverGracePeriod=this.MIN_RECOVER_GRACE_PERIOD}get isAttemptingRecover(){return Boolean(this.recoveringTrack)}handleRtcStatsChange(e){let t=e>this.packetsLost+this.PACKETS_LOST_THRESHOLD;this.packetsLost=e,t?this.degrade():this.recover()}degrade(){if(this.degradeGracePeriod>0){this.degradeGracePeriod--;return}if(this.isAttemptingRecover)return this.cancelRecovery();o.d(this.TAG,\"Packet loss increased, Degrading\",{packetsLost:this.packetsLost}),this.degradeActiveTracksByHalf(),this.degradeGracePeriod=this.MIN_DEGRADE_GRACE_PERIOD,this.recoverGracePeriod=this.MIN_RECOVER_GRACE_PERIOD}recover(){if(this.degradeGracePeriod=this.MIN_DEGRADE_GRACE_PERIOD,this.recoverGracePeriod>0){this.recoverGracePeriod--;return}this.recoveringTrack=this.getActiveTracks(!0).find(e=>e.degraded),!!this.recoveringTrack&&(o.d(this.TAG,\"Packet lost stable, recovering track\",this.recoveringTrack),this.recoveringTrack.setDegradedFromSdk(!1),this.eventBus.trackRestored.publish(this.recoveringTrack),this.recoverGracePeriod=this.MIN_RECOVER_GRACE_PERIOD)}cleanUp(){this.eventBus.trackDegraded.removeAllListeners(),this.eventBus.trackRestored.removeAllListeners()}degradeActiveTracksByHalf(){let e=this.getActiveTracks(!1);if(!e.length)return;o.d(this.TAG,{activeTracks:[...e]});let t=Math.ceil(e.length/2);for(;t--;){let r=e.pop();r.setDegradedFromSdk(!0),this.eventBus.trackDegraded.publish(r)}}getActiveTracks(e){return this.store.getRemoteVideoTracks().filter(t=>t.hasSinks()&&(!t.degraded||e)).sort((t,r)=>{let i=this.store.getComparator().getTrackComparators();return-1*(i.screenShare(t,r)||i.rolePriority(t,r)||i.peerAudioLevel(t,r)||this.store.getComparator().stringComparator(t.trackId,r.trackId))}).slice(0)}cancelRecovery(){this.recoveringTrack&&(this.recoveringTrack.setDegradedFromSdk(!0),this.eventBus.trackDegraded.publish(this.recoveringTrack)),this.recoveringTrack=void 0,this.recoverAttemptCount++,this.recoverGracePeriod=this.getDelayForRecoverCount(this.recoverAttemptCount),this.degradeGracePeriod=this.MIN_DEGRADE_GRACE_PERIOD,o.d(this.TAG,\"Recover Attempt Failed\",{count:this.recoverAttemptCount,delay:this.recoverGracePeriod})}getDelayForRecoverCount(e){let t=this.MIN_RECOVER_GRACE_PERIOD+this.MIN_RECOVER_GRACE_PERIOD*e;return Math.min(t,this.MAX_RECOVER_GRACE_PERIOD)}};var Ri=s=>{let e=s.stream instanceof ae,t=e?\"publish\":\"subscribe\",r=e?s.getTrackBeingSent():s.nativeTrack;return{peerConnectionType:t,nativeTrack:r}},qr=(s,e,t,r)=>c(void 0,null,function*(){var m;let{peerConnectionType:i,nativeTrack:a}=Ri(e),n;try{n=yield(m=s[i])==null?void 0:m.call(s,a)}catch(g){o.w(\"[HMSWebrtcStats]\",\"Error in getting track stats\",e,a,g)}let d=Ci(n),l=Qr(i===\"publish\"?\"bytesSent\":\"bytesReceived\",d,r),u=er(\"packetsLost\",d,r);return(d==null?void 0:d.remote)&&Object.assign(d.remote,{packetsLostRate:er(\"packetsLost\",d.remote,r==null?void 0:r.remote)}),d&&Object.assign(d,{bitrate:l,packetsLostRate:u,peerId:e.peerId,peerName:t,codec:d.codec})}),Ci=s=>{let e,t,r={};s==null||s.forEach(n=>{switch(n.type){case\"inbound-rtp\":e=n;break;case\"outbound-rtp\":e=n;break;case\"remote-inbound-rtp\":t=n;break;case\"codec\":r[n.id]=n.mimeType;break;default:break}});let i=(e==null?void 0:e.codecId)?r[e.codecId]:void 0,a;return i&&(a=i.substring(i.indexOf(\"/\")+1)),e&&Object.assign(e,{remote:t,codec:a})},Xt=(s,e,t)=>{let r=Hi(e),i=Qr(s===\"publish\"?\"bytesSent\":\"bytesReceived\",r,t&&t[s]);return r&&Object.assign(r,{bitrate:i})},Hi=s=>{let e;return s.forEach(t=>{t.type===\"transport\"&&(e=s.get(t.selectedCandidatePairId))}),e||s.forEach(t=>{t.type===\"candidate-pair\"&&t.selected&&(e=t)}),e},jr=s=>{let e={packetsLost:0,jitter:0};return s==null||s.forEach(t=>{t.packetsLost&&(e.packetsLost+=t.packetsLost),t.jitter>e.jitter&&(e.jitter=t.jitter)}),e},Jr=(s,e)=>Array.from(new Set(s.concat(e))),Qr=(s,e,t)=>er(s,e,t)*8,er=(s,e,t)=>{let r=e&&e[s],i=t?t[s]:null;return[e,t,te(r),te(i)].every(n=>!!n)?tr(r,i,e==null?void 0:e.timestamp,t==null?void 0:t.timestamp)*1e3:0},tr=(s,e,t,r)=>te(s)&&te(e)&&t&&r?(s-e)/(t-r):0;var ht=class{constructor(e,t){this.getStats=e;this.store=t;this.TAG=\"[HMSWebrtcStats]\";this.peerStats={};this.trackStats={};var r;this.localPeerID=(r=this.store.getLocalPeer())==null?void 0:r.peerId}getLocalPeerStats(){return this.peerStats[this.localPeerID]}getTrackStats(e){return this.trackStats[e]}updateStats(){return c(this,null,function*(){yield this.updateLocalPeerStats(),yield this.updateTrackStats()})}updateLocalPeerStats(){return c(this,null,function*(){var m,g,T,b,x,X;let e=this.getLocalPeerStats(),t;try{t=yield(g=(m=this.getStats).publish)==null?void 0:g.call(m)}catch(R){o.w(this.TAG,\"Error in getting publish stats\",R)}let r=t&&Xt(\"publish\",t,e),i;try{i=yield(b=(T=this.getStats).subscribe)==null?void 0:b.call(T)}catch(R){o.w(this.TAG,\"Error in getting subscribe stats\",R)}let a=i&&Xt(\"subscribe\",i,e),{packetsLost:n,jitter:d}=jr(i),l=tr(n,(x=e==null?void 0:e.subscribe)==null?void 0:x.packetsLost,a==null?void 0:a.timestamp,(X=e==null?void 0:e.subscribe)==null?void 0:X.timestamp),u=a&&Object.assign(a,{packetsLostRate:l,jitter:d,packetsLost:n});this.peerStats[this.localPeerID]={publish:r,subscribe:u}})}updateTrackStats(){return c(this,null,function*(){var r;let e=this.store.getTracksMap(),t=Jr(Object.keys(this.trackStats),Object.keys(e));for(let i of t){let a=e[i];if(a){let n=a.peerId&&((r=this.store.getPeerById(a.peerId))==null?void 0:r.name),d=this.getTrackStats(a.trackId),l=yield qr(this.getStats,a,n,d);l&&(this.trackStats[i]=l)}else delete this.trackStats[i]}})}};var mt=class{constructor(e,t,r,i){this.store=e;this.eventBus=t;this.publishConnection=r;this.subscribeConnection=i;this.TAG=\"[HMSWebrtcInternals]\";this.interval=Cr;this.isMonitored=!1;this.handleStatsUpdate=()=>c(this,null,function*(){var e;yield(e=this.hmsStats)==null?void 0:e.updateStats(),this.eventBus.statsUpdate.publish(this.hmsStats)})}getPublishPeerConnection(){return this.publishConnection}getSubscribePeerConnection(){return this.subscribeConnection}getCurrentStats(){return this.hmsStats}onStatsChange(e){return this.eventBus.statsUpdate.subscribe(e),()=>{this.eventBus.statsUpdate.unsubscribe(e)}}setPeerConnections({publish:e,subscribe:t}){var r,i;this.publishConnection=e,this.subscribeConnection=t,this.hmsStats=new ht({publish:(r=this.publishConnection)==null?void 0:r.getStats.bind(this.publishConnection),subscribe:(i=this.subscribeConnection)==null?void 0:i.getStats.bind(this.subscribeConnection)},this.store)}start(){return c(this,null,function*(){if(this.isMonitored){o.d(this.TAG,\"Already started\");return}this.stop(),this.isMonitored=!0,o.d(this.TAG,\"Starting Webrtc Stats Monitor\"),this.startLoop().then(()=>o.d(this.TAG,\"Stopping Webrtc Stats Monitor\")).catch(e=>o.e(this.TAG,e.message))})}stop(){this.isMonitored=!1}startLoop(){return c(this,null,function*(){for(;this.isMonitored;)yield this.handleStatsUpdate(),yield j(this.interval)})}cleanUp(){this.stop(),this.eventBus.statsUpdate.removeAllListeners()}};var Yr=()=>{if(!se||typeof navigator.connection==\"undefined\")return;let s=navigator.connection;return{downlink:s.downlink,downlinkMax:s.downlinkMax,effectiveType:s.effectiveType,rtt:s.rtt,saveData:s.saveData,type:s.type}};var A=\"[HMSTransport]:\",gt=class{constructor(e,t,r,i,a,n,d){this.observer=e;this.deviceManager=t;this.store=r;this.localTrackManager=i;this.eventBus=a;this.analyticsEventsService=n;this.analyticsTimer=d;this.state=C.Disconnected;this.trackStates=new Map;this.publishConnection=null;this.subscribeConnection=null;this.maxSubscribeBitrate=0;this.joinRetryCount=0;this.callbacks=new Map;this.signalObserver={onOffer:e=>c(this,null,function*(){try{if(!this.subscribeConnection)return;yield this.subscribeConnection.setRemoteDescription(e),o.d(A,`[SUBSCRIBE] Adding ${this.subscribeConnection.candidates.length} ice-candidates`,this.subscribeConnection.candidates);for(let r of this.subscribeConnection.candidates)yield this.subscribeConnection.addIceCandidate(r);this.subscribeConnection.candidates.length=0;let t=yield this.subscribeConnection.createAnswer();yield this.subscribeConnection.setLocalDescription(t),this.signal.answer(t),o.d(A,\"[role=SUBSCRIBE] onOffer renegotiation DONE \\u2705\")}catch(t){o.d(A,\"[role=SUBSCRIBE] onOffer renegotiation FAILED \\u274C\"),this.state=C.Failed;let r;throw t instanceof v?r=t:r=h.GenericErrors.Unknown(p.PUBLISH,t.message),this.eventBus.analytics.publish(P.subscribeFail(r)),r}}),onTrickle:e=>c(this,null,function*(){let t=e.target===q.Publish?this.publishConnection:this.subscribeConnection;(t==null?void 0:t.remoteDescription)?yield t.addIceCandidate(e.candidate):t==null||t.candidates.push(e.candidate)}),onNotification:e=>this.observer.onNotification(e),onServerError:e=>c(this,null,function*(){yield this.observer.onStateChange(C.Failed,e)}),onFailure:e=>{this.joinParameters&&this.retryScheduler.schedule({category:I.SignalDisconnect,error:e,task:this.retrySignalDisconnectTask,originalState:this.state})},onOffline:e=>c(this,null,function*(){o.d(A,\"socket offline\",C[this.state]);try{this.state!==C.Leaving&&this.joinParameters&&this.retryScheduler.schedule({category:I.SignalDisconnect,error:h.WebSocketConnectionErrors.WebSocketConnectionLost(p.RECONNECT_SIGNAL,e),task:this.retrySignalDisconnectTask,originalState:this.state})}catch(t){console.error(t)}}),onOnline:()=>{var e;o.d(A,\"socket online\",C[this.state]),this.analyticsSignalTransport.flushFailedEvents((e=this.store.getLocalPeer())==null?void 0:e.peerId)},onNetworkOnline:()=>{this.analyticsEventsService.flushFailedClientEvents()}};this.signal=new Ye(this.signalObserver);this.analyticsSignalTransport=new Zt(this.signal);this.publishConnectionObserver={onRenegotiationNeeded:()=>c(this,null,function*(){yield this.performPublishRenegotiation()}),onIceConnectionChange:e=>c(this,null,function*(){o.d(\"publisher ice connection state change, \",e)}),onConnectionStateChange:e=>c(this,null,function*(){o.d(\"publisher connection state change, \",e),e===\"failed\"&&(yield this.handleIceConnectionFailure(q.Publish))})};this.subscribeConnectionObserver={onApiChannelMessage:e=>{this.observer.onNotification(JSON.parse(e))},onTrackAdd:e=>{o.d(A,\"[Subscribe] onTrackAdd\",e),this.observer.onTrackAdd(e)},onTrackRemove:e=>{o.d(A,\"[Subscribe] onTrackRemove\",e),this.observer.onTrackRemove(e)},onIceConnectionChange:e=>c(this,null,function*(){if(o.d(\"subscriber ice connection state change, \",e),e===\"connected\"){let t=this.callbacks.get(ye);this.callbacks.delete(ye),t&&t.promise.resolve(!0)}}),onConnectionStateChange:e=>c(this,null,function*(){if(o.d(\"subscriber connection state change, \",e),e===\"failed\"&&(yield this.handleIceConnectionFailure(q.Subscribe)),e===\"connected\"){let t=this.callbacks.get(ye);this.callbacks.delete(ye),t&&t.promise.resolve(!0)}})};this.handleLocalRoleUpdate=r=>c(this,[r],function*({oldRole:e,newRole:t}){!(!this.doesRoleNeedWebRTC(e)&&this.doesRoleNeedWebRTC(t))||(o.i(A,\"Local peer role updated to webrtc role, creating PeerConnections and performing inital publish negotiation \\u23F3\"),this.createPeerConnections(),yield this.negotiateOnFirstPublish())});this.retryPublishIceFailedTask=()=>c(this,null,function*(){if(this.publishConnection&&(this.publishConnection.iceConnectionState!==\"connected\"||this.publishConnection.connectionState!==\"connected\")){let e=new Promise((t,r)=>{this.callbacks.set(Me,{promise:{resolve:t,reject:r},action:p.RESTART_ICE,extra:{}})});yield this.performPublishRenegotiation({iceRestart:!0}),yield e}return!0});this.retrySubscribeIceFailedTask=()=>c(this,null,function*(){if(this.subscribeConnection&&(this.subscribeConnection.iceConnectionState!==\"connected\"||this.subscribeConnection.connectionState!==\"connected\")){let e=new Promise((r,i)=>{this.callbacks.set(ye,{promise:{resolve:r,reject:i},action:p.RESTART_ICE,extra:{}})}),t=new Promise(r=>{setTimeout(r,Rr,!1)});return Promise.race([e,t])}return!0});this.retrySignalDisconnectTask=()=>c(this,null,function*(){if(o.d(A,\"retrySignalDisconnectTask\",{signalConnected:this.signal.isConnected}),!this.signal.isConnected)try{yield this.internalConnect(this.joinParameters.authToken,this.joinParameters.endpoint,this.joinParameters.peerId)}catch(t){}let e=this.store.getRoom().joinedAt?this.signal.isConnected&&(yield this.retryPublishIceFailedTask()):this.signal.isConnected;return this.signal.trackUpdate(this.trackStates),e});var u,m;this.webrtcInternals=new mt(this.store,this.eventBus,(u=this.publishConnection)==null?void 0:u.nativeConnection,(m=this.subscribeConnection)==null?void 0:m.nativeConnection);let l=(g,T)=>c(this,null,function*(){g!==this.state&&(this.state=g,yield this.observer.onStateChange(this.state,T))});this.retryScheduler=new Qt(l,this.sendErrorAnalyticsEvent.bind(this)),this.eventBus.statsUpdate.subscribe(g=>{var b,x;let T=((x=(b=g.getLocalPeerStats())==null?void 0:b.subscribe)==null?void 0:x.bitrate)||0;this.maxSubscribeBitrate=Math.max(this.maxSubscribeBitrate,T)})}getLocalScreen(e,t){return c(this,null,function*(){try{return yield this.localTrackManager.getLocalScreen(e,t)}catch(r){throw this.eventBus.analytics.publish(P.publish({error:r,devices:this.deviceManager.getDevices(),settings:new Re(e,t,!1)})),r}})}getWebrtcInternals(){return this.webrtcInternals}isFlagEnabled(e){var i;let t=(i=this.initConfig)==null?void 0:i.config;return((t==null?void 0:t.enabledFlags)||[]).includes(e)}preview(e,t,r,i,a=!1){return c(this,null,function*(){let n=yield this.connect(e,t,r,i,a);return this.state=C.Preview,this.observer.onStateChange(this.state),n})}join(e,t,r,i,a=!1){return c(this,null,function*(){o.d(A,\"join: started \\u23F0\");try{(!this.signal.isConnected||!this.initConfig)&&(yield this.connect(e,i,t,r,a)),this.validateNotDisconnected(\"connect\");let n=this.isFlagEnabled(Le.FLAG_SERVER_SUB_DEGRADATION);this.initConfig&&(yield this.waitForLocalRoleAvailability(),yield this.createConnectionsAndNegotiateJoin(r,a,n),yield this.initRtcStatsMonitor(),o.d(A,\"\\u2705 join: Negotiated over PUBLISH connection\"))}catch(n){o.e(A,`join: failed \\u274C [token=${e}]`,n),this.state=C.Failed;let d=n;throw d.isTerminal=d.code===500,yield this.observer.onStateChange(this.state,d),d}o.i(A,\"\\u2705 join: successful\"),this.state=C.Joined,this.observer.onStateChange(this.state)})}connect(e,t,r,i,a=!1){return c(this,null,function*(){this.setTransportStateForConnect(),this.joinParameters=new jt(e,r,i.name,i.metaData,t,a);try{return yield this.internalConnect(e,t,r)}catch(n){if(n instanceof v&&([E.WebSocketConnectionErrors.WEBSOCKET_CONNECTION_LOST,E.WebSocketConnectionErrors.FAILED_TO_CONNECT,E.InitAPIErrors.ENDPOINT_UNREACHABLE].includes(n.code)||n.code.toString().startsWith(\"5\")||n.code.toString().startsWith(\"429\"))){let l=()=>c(this,null,function*(){return yield this.internalConnect(e,t,r),Boolean(this.initConfig&&this.initConfig.endpoint)});yield this.retryScheduler.schedule({category:I.ConnectFailed,error:n,task:l,originalState:this.state,maxFailedRetries:De,changeState:!1})}else throw n}})}leave(){return c(this,null,function*(){var e,t,r,i;this.retryScheduler.reset(),this.joinParameters=void 0,o.d(A,\"leaving in transport\");try{this.state=C.Leaving,(e=this.webrtcInternals)==null||e.cleanUp(),(t=this.trackDegradationController)==null||t.cleanUp(),yield(r=this.publishConnection)==null?void 0:r.close(),yield(i=this.subscribeConnection)==null?void 0:i.close();try{this.signal.leave(),o.d(A,\"signal leave done\")}catch(a){o.w(A,\"failed to send leave on websocket to server\",a)}this.analyticsEventsService.flushFailedClientEvents(),this.analyticsEventsService.reset(),yield this.signal.close()}catch(a){this.eventBus.analytics.publish(P.disconnect(a)),o.e(A,\"leave: FAILED \\u274C\",a)}finally{this.state=C.Disconnected,this.observer.onStateChange(this.state)}})}publish(e){return c(this,null,function*(){for(let t of e)try{yield this.publishTrack(t)}catch(r){this.eventBus.analytics.publish(P.publish({devices:this.deviceManager.getDevices(),error:r}))}})}unpublish(e){return c(this,null,function*(){for(let t of e)yield this.unpublishTrack(t)})}sendMessage(e){return c(this,null,function*(){return yield this.signal.broadcast(e)})}trackUpdate(e){let r=Array.from(this.trackStates.values()).find(i=>e.type===i.type&&e.source===i.source);if(r){let i=new ut(D(S({},r),{mute:!e.enabled}));this.trackStates.set(r.track_id,i),o.d(A,\"Track Update\",this.trackStates,e),this.signal.trackUpdate(new Map([[r.track_id,i]]))}}changeRole(e,t,r=!1){return c(this,null,function*(){yield this.signal.requestRoleChange({requested_for:e.peerId,role:t,force:r})})}acceptRoleChange(e){return c(this,null,function*(){yield this.signal.acceptRoleChangeRequest({role:e.role.name,token:e.token})})}endRoom(e,t){return c(this,null,function*(){yield this.signal.endRoom(e,t)})}removePeer(e,t){return c(this,null,function*(){yield this.signal.removePeer({requested_for:e,reason:t})})}startRTMPOrRecording(e){return c(this,null,function*(){var r;let t={meeting_url:e.meetingURL,record:e.record};((r=e.rtmpURLs)==null?void 0:r.length)&&(t.rtmp_urls=e.rtmpURLs),e.resolution&&(t.resolution=e.resolution),yield this.signal.startRTMPOrRecording(t)})}stopRTMPOrRecording(){return c(this,null,function*(){yield this.signal.stopRTMPAndRecording()})}startHLSStreaming(e){return c(this,null,function*(){let t={};e&&e.variants&&e.variants.length>0&&(t.variants=e.variants.map(r=>{let i={meeting_url:r.meetingURL};return r.metadata&&(i.metadata=r.metadata),i})),(e==null?void 0:e.recording)&&(t.hls_recording={single_file_per_layer:e.recording.singleFilePerLayer,hls_vod:e.recording.hlsVod}),yield this.signal.startHLSStreaming(t)})}stopHLSStreaming(e){return c(this,null,function*(){var t;if(e){let r={variants:(t=e==null?void 0:e.variants)==null?void 0:t.map(i=>{let a={meeting_url:i.meetingURL};return i.metadata&&(a.metadata=i.metadata),a})};yield this.signal.stopHLSStreaming(r)}yield this.signal.stopHLSStreaming()})}sendHLSTimedMetadata(e){return c(this,null,function*(){if(e.length>0){let t={metadata_objs:e};yield this.signal.sendHLSTimedMetadata(t)}})}changeName(e){return c(this,null,function*(){yield this.signal.updatePeer({name:e})})}changeMetadata(e){return c(this,null,function*(){yield this.signal.updatePeer({data:e})})}changeTrackState(e){return c(this,null,function*(){yield this.signal.requestTrackStateChange(e)})}changeMultiTrackState(e){return c(this,null,function*(){yield this.signal.requestMultiTrackStateChange(e)})}publishTrack(e){return c(this,null,function*(){e.publishedTrackId=e.getTrackIDBeingSent(),o.d(A,`\\u23F3 publishTrack: trackId=${e.trackId}, toPublishTrackId=${e.publishedTrackId}`,e),this.trackStates.set(e.publishedTrackId,new ut(e));let t=new Promise((n,d)=>{this.callbacks.set(Me,{promise:{resolve:n,reject:d},action:p.PUBLISH,extra:{}})}),r=e.stream;r.setConnection(this.publishConnection);let i=this.store.getSimulcastLayers(e.source);r.addTransceiver(e,i),o.time(`publish-${e.trackId}-${e.type}`),yield t,o.timeEnd(`publish-${e.trackId}-${e.type}`),this.store.addTrack(e);let a=e.settings.maxBitrate;a&&(yield r.setMaxBitrate(a,e).then(()=>{o.d(A,`Setting maxBitrate for ${e.source} ${e.type} to ${a} kpbs`)}).catch(n=>o.e(A,\"Failed setting maxBitrate\",n))),o.d(A,`\\u2705 publishTrack: trackId=${e.trackId}`,e,this.callbacks)})}unpublishTrack(e){return c(this,null,function*(){if(o.d(A,`\\u23F3 unpublishTrack: trackId=${e.trackId}`,e),e.publishedTrackId&&this.trackStates.has(e.publishedTrackId))this.trackStates.delete(e.publishedTrackId);else{let a=Array.from(this.trackStates.values()).find(n=>e.type===n.type&&e.source===n.source);a&&this.trackStates.delete(a.track_id)}let t=new Promise((i,a)=>{this.callbacks.set(Me,{promise:{resolve:i,reject:a},action:p.UNPUBLISH,extra:{}})});e.stream.removeSender(e),yield t,yield e.cleanup(),this.store.removeTrack(e.trackId),o.d(A,`\\u2705 unpublishTrack: trackId=${e.trackId}`,this.callbacks)})}waitForLocalRoleAvailability(){if(!this.store.hasRoleDetailsArrived())return new Promise(e=>{this.eventBus.policyChange.subscribeOnce(()=>e())})}createConnectionsAndNegotiateJoin(e,t=!1,r=!0){return c(this,null,function*(){let i=this.doesLocalPeerNeedWebRTC();i&&this.createPeerConnections(),yield this.negotiateJoinWithRetry({name:e.name,data:e.metaData,autoSubscribeVideo:t,serverSubDegrade:r,isWebRTC:i})})}createPeerConnections(){this.initConfig&&(this.publishConnection||(this.publishConnection=new qe(this.signal,this.initConfig.rtcConfiguration,this.publishConnectionObserver,this)),this.subscribeConnection||(this.subscribeConnection=new Je(this.signal,this.initConfig.rtcConfiguration,this.subscribeConnectionObserver)))}negotiateJoinWithRetry(n){return c(this,arguments,function*({name:e,data:t,autoSubscribeVideo:r,serverSubDegrade:i,isWebRTC:a=!0}){try{yield this.negotiateJoin({name:e,data:t,autoSubscribeVideo:r,serverSubDegrade:i,isWebRTC:a})}catch(d){o.e(A,\"Join negotiation failed \\u274C\",d);let l=d instanceof v?d:h.WebsocketMethodErrors.ServerErrors(500,p.JOIN,`Websocket join error - ${d.message}`);if(parseInt(`${l.code/100}`)===5||l.code===429){this.joinRetryCount=0,l.isTerminal=!1;let m=()=>c(this,null,function*(){return this.joinRetryCount++,yield this.negotiateJoin({name:e,data:t,autoSubscribeVideo:r,serverSubDegrade:i,isWebRTC:a})});yield this.retryScheduler.schedule({category:I.JoinWSMessageFailed,error:l,task:m,originalState:C.Joined,maxFailedRetries:3,changeState:!1})}else throw d}})}negotiateJoin(n){return c(this,arguments,function*({name:e,data:t,autoSubscribeVideo:r,serverSubDegrade:i,isWebRTC:a=!0}){return a?yield this.negotiateJoinWebRTC({name:e,data:t,autoSubscribeVideo:r,serverSubDegrade:i}):yield this.negotiateJoinNonWebRTC({name:e,data:t,autoSubscribeVideo:r,serverSubDegrade:i})})}negotiateJoinWebRTC(a){return c(this,arguments,function*({name:e,data:t,autoSubscribeVideo:r,serverSubDegrade:i}){if(o.d(A,\"\\u23F3 join: Negotiating over PUBLISH connection\"),!this.publishConnection)return o.e(A,\"Publish peer connection not found, cannot negotiate\"),!1;let n=yield this.publishConnection.createOffer();yield this.publishConnection.setLocalDescription(n);let d=yield this.signal.join(e,t,!r,i,n);yield this.publishConnection.setRemoteDescription(d);for(let l of this.publishConnection.candidates)yield this.publishConnection.addIceCandidate(l);return this.publishConnection.initAfterJoin(),!!d})}negotiateJoinNonWebRTC(a){return c(this,arguments,function*({name:e,data:t,autoSubscribeVideo:r,serverSubDegrade:i}){return o.d(A,\"\\u23F3 join: Negotiating Non-WebRTC\"),!!(yield this.signal.join(e,t,!r,i))})}negotiateOnFirstPublish(){return c(this,null,function*(){if(o.d(A,\"\\u23F3 Negotiating offer over PUBLISH connection\"),!this.publishConnection)return o.e(A,\"Publish peer connection not found, cannot negotiate\"),!1;let e=yield this.publishConnection.createOffer(this.trackStates);yield this.publishConnection.setLocalDescription(e);let t=yield this.signal.offer(e,this.trackStates);yield this.publishConnection.setRemoteDescription(t);for(let r of this.publishConnection.candidates)yield this.publishConnection.addIceCandidate(r);return this.publishConnection.initAfterJoin(),!!t})}performPublishRenegotiation(e){return c(this,null,function*(){o.d(A,\"\\u23F3 [role=PUBLISH] onRenegotiationNeeded START\",this.trackStates);let t=this.callbacks.get(Me);if(!!t){if(!this.publishConnection){o.e(A,\"Publish peer connection not found, cannot renegotiate\");return}try{let r=yield this.publishConnection.createOffer(this.trackStates,e);yield this.publishConnection.setLocalDescription(r),o.time(\"renegotiation-offer-exchange\");let i=yield this.signal.offer(r,this.trackStates);this.callbacks.delete(Me),o.timeEnd(\"renegotiation-offer-exchange\"),yield this.publishConnection.setRemoteDescription(i),t.promise.resolve(!0),o.d(A,\"[role=PUBLISH] onRenegotiationNeeded DONE \\u2705\")}catch(r){let i;r instanceof v?i=r:i=h.GenericErrors.Unknown(p.PUBLISH,r.message),t.promise.reject(i),o.d(A,\"[role=PUBLISH] onRenegotiationNeeded FAILED \\u274C\")}}})}handleIceConnectionFailure(e){return c(this,null,function*(){e===q.Publish?this.retryScheduler.schedule({category:I.PublishIceConnectionFailed,error:h.WebrtcErrors.ICEFailure(p.PUBLISH),task:this.retryPublishIceFailedTask,originalState:C.Joined}):this.retryScheduler.schedule({category:I.SubscribeIceConnectionFailed,error:h.WebrtcErrors.ICEFailure(p.SUBSCRIBE),task:this.retrySubscribeIceFailedTask,originalState:C.Joined,maxFailedRetries:1})})}internalConnect(e,t,r){return c(this,null,function*(){o.d(A,\"connect: started \\u23F0\");let i=new Date;try{return this.analyticsTimer.start(H.INIT),this.initConfig=yield Qe.fetchInitConfig(e,r,t),this.analyticsTimer.end(H.INIT),this.validateNotDisconnected(\"post init\"),yield this.openSignal(e,r),o.d(A,\"Adding Analytics Transport: JsonRpcSignal\"),this.analyticsEventsService.setTransport(this.analyticsSignalTransport),this.analyticsEventsService.flush(),this.initConfig}catch(a){throw this.state!==C.Reconnecting&&this.eventBus.analytics.publish(P.connect(a,this.getAdditionalAnalyticsProperties(),i,new Date,t)),o.d(A,\"\\u274C internal connect: failed\",a),a}})}validateNotDisconnected(e){if(this.state===C.Disconnected)throw o.w(A,\"aborting join as transport state is disconnected\"),h.GenericErrors.ValidationFailed(`leave called before join could complete - stage=${e}`)}openSignal(e,t){return c(this,null,function*(){if(!this.initConfig)throw h.InitAPIErrors.InitConfigNotAvailable(p.INIT,\"Init Config not found\");o.d(A,\"\\u23F3 internal connect: connecting to ws endpoint\",this.initConfig.endpoint);let r=new URL(this.initConfig.endpoint);r.searchParams.set(\"peer\",t),r.searchParams.set(\"token\",e),r.searchParams.set(\"user_agent\",pe),this.endpoint=r.toString(),this.analyticsTimer.start(H.WEBSOCKET_CONNECT),yield this.signal.open(this.endpoint),this.analyticsTimer.end(H.WEBSOCKET_CONNECT),this.analyticsTimer.start(H.ON_POLICY_CHANGE),o.d(A,\"\\u2705 internal connect: connected to ws endpoint\")})}initRtcStatsMonitor(){return c(this,null,function*(){var e,t,r,i;(r=this.webrtcInternals)==null||r.setPeerConnections({publish:(e=this.publishConnection)==null?void 0:e.nativeConnection,subscribe:(t=this.subscribeConnection)==null?void 0:t.nativeConnection}),this.store.getSubscribeDegradationParams()&&(this.isFlagEnabled(Le.FLAG_SERVER_SUB_DEGRADATION)||(yield(i=this.webrtcInternals)==null?void 0:i.start(),this.trackDegradationController=new pt(this.store,this.eventBus),this.eventBus.statsUpdate.subscribe(a=>{var n,d,l;(l=this.trackDegradationController)==null||l.handleRtcStatsChange(((d=(n=a.getLocalPeerStats())==null?void 0:n.subscribe)==null?void 0:d.packetsLost)||0)})),this.eventBus.trackDegraded.subscribe(a=>{this.eventBus.analytics.publish(P.degradationStats(a,!0)),this.observer.onTrackDegrade(a)}),this.eventBus.trackRestored.subscribe(a=>{this.eventBus.analytics.publish(P.degradationStats(a,!1)),this.observer.onTrackRestore(a)}))})}doesRoleNeedWebRTC(e){var i,a;if(!this.isFlagEnabled(Le.FLAG_NON_WEBRTC_DISABLE_OFFER))return!0;let t=Boolean(e.publishParams.allowed&&((i=e.publishParams.allowed)==null?void 0:i.length)>0),r=Boolean(e.subscribeParams.subscribeToRoles&&((a=e.subscribeParams.subscribeToRoles)==null?void 0:a.length)>0);return t||r}doesLocalPeerNeedWebRTC(){var t;let e=(t=this.store.getLocalPeer())==null?void 0:t.role;return e?this.doesRoleNeedWebRTC(e):!0}setTransportStateForConnect(){if(this.state===C.Failed&&(this.state=C.Disconnected),this.state!==C.Disconnected&&this.state!==C.Reconnecting)throw h.WebsocketMethodErrors.AlreadyJoined(p.JOIN,`Cannot join a meeting in ${this.state} state`);this.state===C.Disconnected&&(this.state=C.Connecting,this.observer.onStateChange(this.state))}sendErrorAnalyticsEvent(e,t){let r=this.getAdditionalAnalyticsProperties(),i;switch(t){case I.ConnectFailed:i=P.connect(e,r);break;case I.SignalDisconnect:i=P.disconnect(e,r);break;case I.JoinWSMessageFailed:i=P.join({error:e,time:this.analyticsTimer.getTimeTaken(H.JOIN),init_response_time:this.analyticsTimer.getTimeTaken(H.INIT),ws_connect_time:this.analyticsTimer.getTimeTaken(H.WEBSOCKET_CONNECT),on_policy_change_time:this.analyticsTimer.getTimeTaken(H.ON_POLICY_CHANGE),local_tracks_time:this.analyticsTimer.getTimeTaken(H.LOCAL_TRACKS),retries_join:this.joinRetryCount});break;case I.PublishIceConnectionFailed:i=P.publish({error:e});break;case I.SubscribeIceConnectionFailed:i=P.subscribeFail(e);break}this.eventBus.analytics.publish(i)}getAdditionalAnalyticsProperties(){var n,d,l,u,m,g,T,b;let e=Yr(),t=typeof document!=\"undefined\"&&document.hidden,r=this.store.getRemoteVideoTracks().filter(x=>x.degraded).length,i=(u=(l=(d=(n=this.getWebrtcInternals())==null?void 0:n.getCurrentStats())==null?void 0:d.getLocalPeerStats())==null?void 0:l.publish)==null?void 0:u.bitrate,a=(b=(T=(g=(m=this.getWebrtcInternals())==null?void 0:m.getCurrentStats())==null?void 0:g.getLocalPeerStats())==null?void 0:T.subscribe)==null?void 0:b.bitrate;return{network_info:e,document_hidden:t,num_degraded_tracks:r,bitrate:{publish:i,subscribe:a},max_sub_bitrate:this.maxSubscribeBitrate,recent_pong_response_times:this.signal.getPongResponseTimes(),transport_state:this.state}}};function St(s){if(s.length===0)throw h.InitAPIErrors.InvalidTokenFormat(p.INIT,\"Token cannot be an empty string\");let e=s.split(\".\");if(e.length!==3)throw h.InitAPIErrors.InvalidTokenFormat(p.INIT,\"Expected 3 '.' separate fields - header, payload and signature respectively\");let t=atob(e[1]);try{let r=JSON.parse(t);return{roomId:r.room_id,userId:r.user_id,role:r.role}}catch(r){throw h.InitAPIErrors.InvalidTokenFormat(p.INIT,`couldn't parse to json - ${r.message}`)}}var vt=class{constructor(e,t){this.id=e;this.store=t;this.recording={server:{running:!1},browser:{running:!1},hls:{running:!1}};this.rtmp={running:!1};this.hls={running:!1,variants:[]}}get localPeer(){return this.store.getLocalPeer()}get peers(){return this.store.getPeers()}};var zr={autoplayFailed:void 0,initialized:!1,autoplayCheckPromise:void 0},Tt=class{constructor(e,t,r){this.store=e;this.deviceManager=t;this.eventBus=r;this.autoPausedTracks=new Set;this.TAG=\"[AudioSinkManager]:\";this.volume=100;this.state=S({},zr);this.handleAudioPaused=e=>{var a;let r=(a=e.target.srcObject)==null?void 0:a.getAudioTracks()[0];if(!(r==null?void 0:r.enabled))return;o.d(this.TAG,\"Audio Paused\",e.target.id);let i=this.store.getTrackById(e.target.id);i&&(pr()?setTimeout(()=>c(this,null,function*(){i&&(yield this.playAudioFor(i))}),500):this.autoPausedTracks.add(i))};this.handleTrackUpdate=({track:e,enabled:t})=>{var r;((r=window.HMS)==null?void 0:r.AUDIO_SINK)&&(t?(e.addSink(),this.playAudioFor(e)):e.removeSink())};this.handleTrackAdd=r=>c(this,[r],function*({track:e,peer:t}){var a,n,d;let i=document.createElement(\"audio\");i.style.display=\"none\",i.id=e.trackId,i.addEventListener(\"pause\",this.handleAudioPaused),e.setAudioElement(i),e.setVolume(this.volume),o.d(this.TAG,\"Audio track added\",e.trackId),(a=this.audioSink)==null||a.append(i),this.outputDevice&&(yield e.setOutputDevice(this.outputDevice)),((n=window.HMS)==null?void 0:n.AUDIO_SINK)?e.enabled?e.addSink():e.removeSink():i.srcObject=new MediaStream([e.nativeTrack]),(d=this.listener)==null||d.onTrackUpdate(N.TRACK_ADDED,e,t),yield this.handleAutoplayError(e)});this.handleAutoplayError=e=>c(this,null,function*(){if(this.state.autoplayFailed===void 0&&(this.state.autoplayCheckPromise||(this.state.autoplayCheckPromise=new Promise(t=>{this.playAudioFor(e).then(t)})),yield this.state.autoplayCheckPromise),this.state.autoplayFailed){this.autoPausedTracks.add(e);return}yield this.playAudioFor(e)});this.handleAudioDeviceChange=e=>{e.error||!e.selection||e.type===\"video\"||this.unpauseAudioTracks()};this.handleTrackRemove=e=>{this.autoPausedTracks.delete(e);let t=document.getElementById(e.trackId);t&&(t.removeEventListener(\"pause\",this.handleAudioPaused),t.srcObject=null,t.remove(),e.setAudioElement(null)),this.audioSink&&this.audioSink.childElementCount===0&&(this.state.autoplayCheckPromise=void 0,this.state.autoplayFailed=void 0),o.d(this.TAG,\"Audio track removed\",e.trackId)};this.unpauseAudioTracks=()=>c(this,null,function*(){let e=[];this.autoPausedTracks.forEach(t=>{e.push(this.playAudioFor(t))}),yield Promise.all(e)});this.eventBus.audioTrackAdded.subscribe(this.handleTrackAdd),this.eventBus.audioTrackRemoved.subscribe(this.handleTrackRemove),this.eventBus.audioTrackUpdate.subscribe(this.handleTrackUpdate),this.eventBus.deviceChange.subscribe(this.handleAudioDeviceChange)}setListener(e){this.listener=e}get outputDevice(){return this.deviceManager.outputDevice}getVolume(){return this.volume}setVolume(e){this.store.updateAudioOutputVolume(e),this.volume=e}unblockAutoplay(){return c(this,null,function*(){this.autoPausedTracks.size>0&&this.unpauseAudioTracks()})}init(e){if(this.state.initialized)return;this.state.initialized=!0;let t=document.createElement(\"div\");t.id=`HMS-SDK-audio-sink-${(0,uuid__WEBPACK_IMPORTED_MODULE_2__[\"default\"])()}`,(e&&document.getElementById(e)||document.body).append(t),this.audioSink=t}cleanUp(){var e;(e=this.audioSink)==null||e.remove(),this.audioSink=void 0,this.eventBus.audioTrackAdded.unsubscribe(this.handleTrackAdd),this.eventBus.audioTrackRemoved.unsubscribe(this.handleTrackRemove),this.eventBus.audioTrackUpdate.unsubscribe(this.handleTrackUpdate),this.eventBus.deviceChange.unsubscribe(this.handleAudioDeviceChange),this.autoPausedTracks=new Set,this.state=S({},zr)}playAudioFor(e){return c(this,null,function*(){let t=e.getAudioElement();if(!t){o.w(this.TAG,\"No audio element found on track\",e.trackId);return}try{yield t.play(),this.state.autoplayFailed=!1,this.autoPausedTracks.delete(e),o.d(this.TAG,\"Played track\",e.trackId)}catch(r){this.autoPausedTracks.add(e),o.e(this.TAG,\"Failed to play track\",e.trackId,r);let i=r;if(!this.state.autoplayFailed&&i.name===\"NotAllowedError\"){this.state.autoplayFailed=!0;let a=h.TracksErrors.AutoplayBlocked(p.AUTOPLAY,\"\");a.addNativeError(i),this.eventBus.analytics.publish(P.autoplayError()),this.eventBus.autoplayError.publish(a)}}})}};var ft=class{constructor(e,t){this.store=e;this.eventBus=t;this.audioInput=[];this.audioOutput=[];this.videoInput=[];this.hasWebcamPermission=!1;this.hasMicrophonePermission=!1;this.TAG=\"[Device Manager]:\";this.initialized=!1;this.videoInputChanged=!1;this.audioInputChanged=!1;this.updateOutputDevice=e=>{let t=this.audioOutput.find(r=>r.deviceId===e);return t&&(this.outputDevice=t,this.store.updateAudioOutputDevice(t),Y.updateSelection(\"audioOutput\",{deviceId:t.deviceId,groupId:t.groupId})),t};this.getCurrentSelection=()=>{var n,d;let e=this.store.getLocalPeer(),t=this.createIdentifier((n=e==null?void 0:e.audioTrack)==null?void 0:n.getMediaTrackSettings()),r=this.createIdentifier((d=e==null?void 0:e.videoTrack)==null?void 0:d.getMediaTrackSettings()),i=this.audioInput.find(l=>this.createIdentifier(l)===t),a=this.videoInput.find(l=>this.createIdentifier(l)===r);return{audioInput:i,videoInput:a,audioOutput:this.outputDevice}};this.computeChange=(e,t)=>e.length!==t.length?!0:t.some(r=>!e.includes(this.createIdentifier(r)));this.enumerateDevices=()=>c(this,null,function*(){try{let e=yield navigator.mediaDevices.enumerateDevices(),t=this.videoInput.map(this.createIdentifier),r=this.audioInput.map(this.createIdentifier);this.audioInput=[],this.audioOutput=[],this.videoInput=[],e.forEach(i=>{i.kind===\"audioinput\"&&i.label?(this.hasMicrophonePermission=!0,this.audioInput.push(i)):i.kind===\"audiooutput\"?this.audioOutput.push(i):i.kind===\"videoinput\"&&i.label&&(this.hasWebcamPermission=!0,this.videoInput.push(i))}),this.videoInputChanged=this.computeChange(t,this.videoInput),this.audioInputChanged=this.computeChange(r,this.audioInput),Y.setDevices({videoInput:[...this.videoInput],audioInput:[...this.audioInput],audioOutput:[...this.audioOutput]}),this.logDevices(\"Enumerate Devices\")}catch(e){o.e(this.TAG,\"Failed enumerating devices\",e)}});this.handleDeviceChange=()=>c(this,null,function*(){yield this.enumerateDevices(),this.eventBus.analytics.publish(P.deviceChange({selection:this.getCurrentSelection(),type:\"list\",devices:this.getDevices()})),this.logDevices(\"After Device Change\");let e=this.store.getLocalPeer();this.setOutputDevice(!0),yield this.handleAudioInputDeviceChange(e==null?void 0:e.audioTrack),yield this.handleVideoInputDeviceChange(e==null?void 0:e.videoTrack)});this.handleAudioInputDeviceChange=e=>c(this,null,function*(){if(!e){o.d(this.TAG,\"No Audio track on local peer\");return}if(!this.audioInputChanged){o.d(this.TAG,\"No Change in AudioInput Device\");return}let t=this.getNewAudioInputDevice();if(!t||!t.deviceId){o.w(this.TAG,\"Audio device not found\");return}let{settings:r}=e,i=new J().codec(r.codec).maxBitrate(r.maxBitrate).deviceId(t.deviceId).build();try{yield e.setSettings(i,!0),this.eventBus.deviceChange.publish({devices:this.getDevices(),selection:t,type:\"audioInput\"}),this.logDevices(\"Audio Device Change Success\")}catch(a){o.e(this.TAG,\"[Audio Device Change]\",a),this.eventBus.analytics.publish(P.deviceChange({selection:{audioInput:t},devices:this.getDevices(),error:a})),this.eventBus.deviceChange.publish({error:a,selection:t,type:\"audioInput\",devices:this.getDevices()})}});this.handleVideoInputDeviceChange=e=>c(this,null,function*(){if(!e){o.d(this.TAG,\"No video track on local peer\");return}if(!this.videoInputChanged){o.d(this.TAG,\"No Change in VideoInput Device\");return}let t=this.videoInput[0];if(!t||!t.deviceId){o.w(this.TAG,\"Video device not found\");return}let{settings:r}=e,i=new G().codec(r.codec).maxBitrate(r.maxBitrate).maxFramerate(r.maxFramerate).setWidth(r.width).setHeight(r.height).deviceId(t.deviceId).build();try{yield e.setSettings(i,!0),this.eventBus.deviceChange.publish({devices:this.getDevices(),selection:t,type:\"video\"}),this.logDevices(\"Video Device Change Success\")}catch(a){o.e(this.TAG,\"[Video Device Change]\",a),this.eventBus.analytics.publish(P.deviceChange({selection:{videoInput:t},devices:this.getDevices(),error:a})),this.eventBus.deviceChange.publish({error:a,type:\"video\",selection:t,devices:this.getDevices()})}});let r=({enabled:i,track:a})=>i&&a.source===\"regular\";this.eventBus.localVideoEnabled.waitFor(r).then(()=>c(this,null,function*(){yield this.enumerateDevices(),this.videoInputChanged&&this.eventBus.deviceChange.publish({devices:this.getDevices()})})),this.eventBus.localAudioEnabled.waitFor(r).then(()=>c(this,null,function*(){yield this.enumerateDevices(),this.audioInputChanged&&this.eventBus.deviceChange.publish({devices:this.getDevices()})}))}init(e=!1){return c(this,null,function*(){this.initialized&&!e||(!this.initialized&&navigator.mediaDevices.addEventListener(\"devicechange\",this.handleDeviceChange),this.initialized=!0,yield this.enumerateDevices(),this.logDevices(\"Init\"),this.setOutputDevice(),this.eventBus.deviceChange.publish({devices:this.getDevices()}),this.eventBus.analytics.publish(P.deviceChange({selection:this.getCurrentSelection(),type:\"list\",devices:this.getDevices()})))})}getDevices(){return{audioInput:this.audioInput,audioOutput:this.audioOutput,videoInput:this.videoInput}}cleanUp(){this.initialized=!1,this.audioInput=[],this.audioOutput=[],this.videoInput=[],this.outputDevice=void 0,navigator.mediaDevices.removeEventListener(\"devicechange\",this.handleDeviceChange)}createIdentifier(e){return e?`${e.deviceId}${e.groupId}`:\"\"}getNewAudioInputDevice(){let e=this.audioInput.find(t=>t.deviceId===\"default\");return e?this.audioInput.find(r=>r.label!==e.label&&e.label.includes(r.label)):this.audioInput[0]}setOutputDevice(e=!1){let t=this.getNewAudioInputDevice(),r=this.createIdentifier(this.outputDevice);this.outputDevice=void 0,(t==null?void 0:t.groupId)&&(this.outputDevice=this.audioOutput.find(i=>t.deviceId!==\"default\"&&i.label===t.label)),this.outputDevice||(this.outputDevice=this.audioOutput.find(i=>i.deviceId===\"default\")||this.audioOutput[0]),this.store.updateAudioOutputDevice(this.outputDevice),e&&r!==this.createIdentifier(this.outputDevice)&&this.eventBus.deviceChange.publish({selection:this.outputDevice,type:\"audioOutput\",devices:this.getDevices()})}logDevices(e=\"\"){o.d(this.TAG,e,JSON.stringify({videoInput:[...this.videoInput],audioInput:[...this.audioInput],audioOutput:[...this.audioOutput],selected:this.getCurrentSelection()},null,4))}};var Et=class{constructor(e,t){this.deviceManager=e;this.audioSinkManager=t}getVolume(){return this.audioSinkManager.getVolume()}setVolume(e){if(e<0||e>100)throw Error(\"Please pass a valid number between 0-100\");this.audioSinkManager.setVolume(e)}getDevice(){return this.deviceManager.outputDevice}setDevice(e){return this.deviceManager.updateOutputDevice(e)}unblockAutoplay(){return c(this,null,function*(){yield this.audioSinkManager.unblockAutoplay()})}};var Zr=\"AnalyticsEventsService\",rr=class{constructor(e){this.store=e;this.bufferSize=Ke;this.transport=null;this.pendingEvents=[];this.level=it.INFO}setTransport(e){this.transport=e}reset(){this.transport=null,this.pendingEvents=[]}queue(e){if(e.level>=this.level&&(this.pendingEvents.push(e),this.pendingEvents.length>this.bufferSize)){let t=this.pendingEvents.shift();o.d(Zr,\"Max buffer size reached\",\"Removed event to accommodate new events\",t)}return this}flushFailedClientEvents(){ve.flushFailedEvents()}flush(){var e;try{for(;this.pendingEvents.length>0;){let t=this.pendingEvents.shift();t&&(t.metadata.peer.peer_id=(e=this.store.getLocalPeer())==null?void 0:e.peerId,this.transport&&this.transport.transportProvider.isConnected?this.transport.sendEvent(t):this.sendClientEventOnHTTP(t))}}catch(t){o.w(Zr,\"Flush Failed\",t)}}sendClientEventOnHTTP(e){var i,a,n,d;let t=this.store.getRoom(),r=this.store.getLocalPeer();e.metadata.token=(i=this.store.getConfig())==null?void 0:i.authToken,e.metadata.peer={session_id:t.sessionId,room_id:t.id,room_name:t.name,template_id:t.templateId,joined_at:(a=t.joinedAt)==null?void 0:a.getTime(),session_started_at:(n=t.startedAt)==null?void 0:n.getTime(),role:(d=r==null?void 0:r.role)==null?void 0:d.name,user_name:r==null?void 0:r.name,user_data:r==null?void 0:r.metadata},ve.sendEvent(e)}};var ir=class{constructor(e){this.store=e;this.primitiveComparator=(e,t)=>e===t?0:Number(e)-Number(t);this.stringComparator=(e,t)=>e===t?0:e<t?-1:1}getPeerComparators(){return{videoEnabled:(e,t)=>{var r,i;return this.primitiveComparator(Boolean((r=e.videoTrack)==null?void 0:r.enabled),Boolean((i=t.videoTrack)==null?void 0:i.enabled))},audioEnabled:(e,t)=>{var r,i;return this.primitiveComparator(Boolean((r=e.audioTrack)==null?void 0:r.enabled),Boolean((i=t.audioTrack)==null?void 0:i.enabled))},screenShare:(e,t)=>this.primitiveComparator(e.auxiliaryTracks.some(r=>r.source===\"screen\"),t.auxiliaryTracks.some(r=>r.source===\"screen\")),audioLevel:(e,t)=>{var r,i;return this.primitiveComparator(((r=this.store.getSpeakers().find(a=>a.peer&&a.peer.peerId===(e==null?void 0:e.peerId)))==null?void 0:r.audioLevel)||-1,((i=this.store.getSpeakers().find(a=>a.peer&&a.peer.peerId===(t==null?void 0:t.peerId)))==null?void 0:i.audioLevel)||-1)},rolePriority:(e,t)=>{var r,i;return this.primitiveComparator(((r=e.role)==null?void 0:r.priority)||0,((i=t.role)==null?void 0:i.priority)||0)}}}getTrackComparators(){return{video:(e,t)=>this.primitiveComparator(e.type===_.VIDEO,t.type===_.VIDEO),audio:(e,t)=>this.primitiveComparator(e.type===_.AUDIO,t.type===_.AUDIO),enabled:(e,t)=>this.primitiveComparator(Boolean(e.enabled),Boolean(t.enabled)),peerAudioLevel:(e,t)=>{let r=this.store.getPeerByTrackId(e.trackId),i=this.store.getPeerByTrackId(t.trackId);return this.getPeerComparators().audioLevel(r,i)},audioLevel:(e,t)=>{var r,i;return this.primitiveComparator(((r=this.store.getSpeakers().find(a=>a.track.trackId===e.trackId))==null?void 0:r.audioLevel)||0,((i=this.store.getSpeakers().find(a=>a.track.trackId===t.trackId))==null?void 0:i.audioLevel)||0)},screenShare:(e,t)=>this.primitiveComparator(e.source===\"screen\",t.source===\"screen\"),rolePriority:(e,t)=>{var r,i,a,n;return this.primitiveComparator(((i=(r=this.store.getPeerByTrackId(e.trackId))==null?void 0:r.role)==null?void 0:i.priority)||0,((n=(a=this.store.getPeerByTrackId(t.trackId))==null?void 0:a.role)==null?void 0:n.priority)||0)}}}};var kt=class{constructor(){this.comparator=new ir(this);this.knownRoles={};this.peers={};this.tracks={};this.peerTrackStates={};this.speakers=[];this.videoLayers=null;this.screenshareLayers=null;this.roleDetailsArrived=!1;this.env=z.PROD}getConfig(){return this.config}getEnv(){return this.env}getPublishParams(){return this.publishParams}getComparator(){return this.comparator}getRoom(){return this.room}getPolicyForRole(e){return this.knownRoles[e]}getKnownRoles(){return this.knownRoles}getLocalPeer(){if(this.localPeerId&&this.peers[this.localPeerId])return this.peers[this.localPeerId]}getRemotePeers(){return Object.values(this.peers).filter(e=>!e.isLocal)}getPeers(){return Object.values(this.peers)}getPeerById(e){if(this.peers[e])return this.peers[e]}getTracksMap(){return this.tracks}getTracks(){return Object.values(this.tracks)}getVideoTracks(){return this.getTracks().filter(e=>e.type===_.VIDEO)}getRemoteVideoTracks(){return this.getTracks().filter(e=>e instanceof me)}getAudioTracks(){return this.getTracks().filter(e=>e.type===_.AUDIO)}getPeerTracks(e){let t=e?this.peers[e]:void 0,r=[];return(t==null?void 0:t.videoTrack)&&r.push(t.videoTrack),(t==null?void 0:t.audioTrack)&&r.push(t.audioTrack),r.concat((t==null?void 0:t.auxiliaryTracks)||[])}getLocalPeerTracks(){return this.getPeerTracks(this.localPeerId)}getTrackById(e){var i,a;let t=this.tracks[e];if(t)return t;let r=this.getLocalPeer();if(r){if((i=r.audioTrack)==null?void 0:i.isPublishedTrackId(e))return r.audioTrack;if((a=r.videoTrack)==null?void 0:a.isPublishedTrackId(e))return r.videoTrack}}getPeerByTrackId(e){let t=this.tracks[e];return t.peerId?this.peers[t.peerId]:void 0}getSpeakers(){return this.speakers}getSpeakerPeers(){return this.speakers.map(e=>e.peer)}setRoom(e){this.room=e}setKnownRoles(e){this.knownRoles=e,this.roleDetailsArrived=!0,this.updatePeersPolicy()}hasRoleDetailsArrived(){return this.roleDetailsArrived}setConfig(e){var t,r,i;if(Y.rememberDevices(Boolean(e.rememberDeviceSelection)),e.rememberDeviceSelection){let a=Y.getSelection();a&&(e.settings||(e.settings={}),((t=a.audioInput)==null?void 0:t.deviceId)&&(e.settings.audioInputDeviceId=e.settings.audioInputDeviceId||a.audioInput.deviceId),((r=a.audioOutput)==null?void 0:r.deviceId)&&(e.settings.audioOutputDeviceId=e.settings.audioOutputDeviceId||a.audioOutput.deviceId),((i=a.videoInput)==null?void 0:i.deviceId)&&(e.settings.videoDeviceId=e.settings.videoDeviceId||a.videoInput.deviceId))}this.config=e,this.setEnv()}setPublishParams(e){this.publishParams=e}addPeer(e){this.peers[e.peerId]=e,e.isLocal&&(this.localPeerId=e.peerId)}addTrack(e){this.tracks[e.trackId]=e}getTrackState(e){return this.peerTrackStates[e]}setTrackState(e){this.peerTrackStates[e.trackInfo.track_id]=e}removePeer(e){this.localPeerId===e&&(this.localPeerId=void 0),delete this.peers[e]}removeTrack(e){delete this.tracks[e]}updateSpeakers(e){this.speakers=e}updateAudioOutputVolume(e){this.getAudioTracks().forEach(t=>t.setVolume(e))}updateAudioOutputDevice(e){this.getAudioTracks().forEach(t=>{t.setOutputDevice(e)})}getSubscribeDegradationParams(){var t,r;let e=(r=(t=this.getLocalPeer())==null?void 0:t.role)==null?void 0:r.subscribeParams.subscribeDegradation;if(e&&Object.keys(e).length>0)return e}getSimulcastLayers(e){var t,r;return e===\"screen\"?((t=this.screenshareLayers)==null?void 0:t.layers)||[]:((r=this.videoLayers)==null?void 0:r.layers)||[]}getSimulcastDimensions(e){let t=e===\"screen\"?this.screenshareLayers:this.videoLayers,r=t==null?void 0:t.width,i=t==null?void 0:t.height;return{width:r,height:i}}convertSimulcastLayers(e){return D(S({},e),{layers:(e.layers||[]).map(t=>D(S({},t),{maxBitrate:t.maxBitrate*1e3}))})}setVideoSimulcastLayers(e){this.videoLayers=this.convertSimulcastLayers(e)}setScreenshareSimulcastLayers(e){this.screenshareLayers=this.convertSimulcastLayers(e)}getSimulcastDefinitionsForPeer(e,t){var d;if(!e.role)return[];let r=this.getPolicyForRole(e.role.name).publishParams,i;t===\"regular\"?i=r.videoSimulcastLayers:t===\"screen\"&&(i=r.screenSimulcastLayers);let a=i==null?void 0:i.width,n=i==null?void 0:i.height;return((d=i==null?void 0:i.layers)==null?void 0:d.map(l=>{let u=Tr[l.rid],m={width:a&&l.scaleResolutionDownBy?a/l.scaleResolutionDownBy:void 0,height:n&&l.scaleResolutionDownBy?n/l.scaleResolutionDownBy:void 0};return{layer:u,resolution:m}}))||[]}cleanUp(){let e=this.getTracks();for(let t of e)t.cleanup();this.room=void 0,this.config=void 0,this.localPeerId=void 0,this.roleDetailsArrived=!1}setErrorListener(e){this.errorListener=e}updatePeersPolicy(){this.getPeers().forEach(e=>{var t;if(!e.role){(t=this.errorListener)==null||t.onError(h.GenericErrors.InvalidRole(p.VALIDATION,\"\"));return}e.role=this.getPolicyForRole(e.role.name)})}setEnv(){var i;let t=((i=this.config)==null?void 0:i.initEndpoint).split(\"https://\")[1],r=z.PROD;t.startsWith(z.PROD)?r=z.PROD:t.startsWith(z.QA)?r=z.QA:t.startsWith(z.DEV)&&(r=z.DEV),this.env=r,ve.setEnv(r)}};var Mt=class{constructor(e,t,r,i,a){this.store=e;this.transport=t;this.publish=r;this.removeAuxiliaryTrack=i;this.listener=a;this.handleLocalPeerRoleUpdate=r=>c(this,[r],function*({oldRole:e,newRole:t}){var g,T;let i=this.store.getLocalPeer();if(!i)return;let a=new Set(e.publishParams.allowed||[]),n=new Set(t.publishParams.allowed||[]),d=this.removeTrack(a,n,\"video\"),l=this.removeTrack(a,n,\"audio\"),u=this.removeTrack(a,n,\"screen\");yield this.removeVideoTracks(d),yield this.removeAudioTrack(l),yield this.removeScreenTracks(u),this.store.setPublishParams(t.publishParams);let m=((g=this.store.getConfig())==null?void 0:g.settings)||{isAudioMuted:!0,isVideoMuted:!0,audioInputDeviceId:\"default\",videoDeviceId:\"default\",audioOutputDeviceId:\"default\"};yield this.publish(D(S({},m),{isAudioMuted:!0,isVideoMuted:!0})),(T=this.listener)==null||T.onPeerUpdate($.ROLE_UPDATED,i)})}removeVideoTracks(e){return c(this,null,function*(){var r;if(!e)return;let t=this.store.getLocalPeer();(t==null?void 0:t.videoTrack)&&(yield this.transport.unpublish([t.videoTrack]),(r=this.listener)==null||r.onTrackUpdate(N.TRACK_REMOVED,t.videoTrack,t),t.videoTrack=void 0),yield this.removeAuxTracks(i=>i.source!==\"screen\"&&i.type===\"video\")})}removeAudioTrack(e){return c(this,null,function*(){var r;if(!e)return;let t=this.store.getLocalPeer();(t==null?void 0:t.audioTrack)&&(yield this.transport.unpublish([t.audioTrack]),(r=this.listener)==null||r.onTrackUpdate(N.TRACK_REMOVED,t.audioTrack,t),t.audioTrack=void 0),yield this.removeAuxTracks(i=>i.source!==\"screen\"&&i.type===\"audio\")})}removeScreenTracks(e){return c(this,null,function*(){!e||(yield this.removeAuxTracks(t=>t.source===\"screen\"))})}removeAuxTracks(e){return c(this,null,function*(){let t=this.store.getLocalPeer();if(t==null?void 0:t.auxiliaryTracks){let r=[...t.auxiliaryTracks];for(let i of r)e(i)&&(yield this.removeAuxiliaryTrack(i.trackId))}})}removeTrack(e,t,r){return e.has(r)&&!t.has(r)}};var Te=class extends eventemitter2__WEBPACK_IMPORTED_MODULE_4__.EventEmitter2{on(e,t){return super.on(e,t)}off(e,t){return super.off(e,t)}emit(e,t){return super.emit(e,t)}listeners(e){return super.listeners(e)}};var Ue=class{constructor(e){this.audioContext=new AudioContext,this.source=this.audioContext.createMediaElementSource(e),this.source.connect(this.audioContext.destination)}resumeContext(){this.audioContext.state===\"suspended\"&&(o.d(this.TAG,\"AudioContext is resumed\"),this.audioContext.resume())}getAudioTrack(){return this.destinationNode&&this.source.disconnect(this.destinationNode),this.destinationNode=this.audioContext.createMediaStreamDestination(),this.source.connect(this.destinationNode),this.destinationNode.stream.getAudioTracks()[0]}cleanup(){this.audioContext.state!==\"closed\"&&this.audioContext.close()}get TAG(){return\"AudioContextManager\"}};var ar=class extends Te{constructor(){super(...arguments);this.audioElement=null;this.seeked=!1}play(e){return c(this,null,function*(){return this.audioElement=this.getAudioElement(),new Promise((t,r)=>{this.audioElement=this.getAudioElement(),this.audioElement.src=e,this.seeked=!1,this.audioElement.onerror=()=>{let i=`Error loading ${e}`;o.e(this.TAG,i),this.stop(),r(i)},this.audioElement.oncanplaythrough=()=>c(this,null,function*(){try{if(!this.audioElement)return;if(this.audioContextManager.resumeContext(),this.track)this.seeked?this.seeked=!1:(yield this.audioElement.play(),t([this.track]));else{yield this.audioElement.play();let i=this.audioContextManager.getAudioTrack();this.track=i,t([i])}}catch(i){o.e(this.TAG,\"Error playing audio\",e,i.message),r(i)}}),this.audioElement.onseeked=()=>{this.seeked=!0}})})}getTracks(){return this.track?[this.track.id]:[]}getElement(){return this.audioElement}stop(){var e,t,r;(e=this.audioElement)==null||e.pause(),(t=this.audioElement)==null||t.removeAttribute(\"src\"),this.audioElement=null,(r=this.audioContextManager)==null||r.cleanup(),this.track=void 0}getAudioElement(){if(this.audioElement)return this.audioElement;let e=document.createElement(\"audio\");return e.crossOrigin=\"anonymous\",e.addEventListener(\"timeupdate\",t=>this.emit(\"progress\",t)),e.addEventListener(\"ended\",()=>{this.emit(\"ended\",null)}),this.audioContextManager=new Ue(e),e}get TAG(){return\"PlaylistAudioManager\"}};var sr=class extends Te{constructor(){super(...arguments);this.videoElement=null;this.canvasContext=null;this.tracks=[];this.DEFAUL_FPS=24;this.seeked=!1;this.drawImage=()=>{var e,t,r;this.videoElement&&!this.videoElement.paused&&!this.videoElement.ended&&((r=this.canvasContext)==null||r.drawImage(this.videoElement,0,0,(e=this.canvas)==null?void 0:e.width,(t=this.canvas)==null?void 0:t.height),this.timer=setTimeout(()=>{this.drawImage()},1e3/this.DEFAUL_FPS))}}play(e){return this.videoElement=this.getVideoElement(),this.createCanvas(),new Promise((t,r)=>{this.videoElement=this.getVideoElement(),this.videoElement.src=e,this.seeked=!1,this.videoElement.onerror=()=>{let i=`Error loading ${e}`;o.e(this.TAG,i),this.stop(),r(i)},this.videoElement.oncanplaythrough=()=>c(this,null,function*(){var i,a,n;try{if(!this.videoElement)return;if(this.canvas.width=this.videoElement.videoWidth,this.canvas.height=this.videoElement.videoHeight,this.tracks.length===0){this.clearCanvasAndTracks();let d=this.canvas.captureStream();if(!d){o.e(this.TAG,\"Browser does not support captureStream\");return}this.videoElement.onplay=this.drawImage,this.audioContextManager.resumeContext(),yield this.videoElement.play();let l=this.audioContextManager.getAudioTrack();d.addTrack(l),d.getTracks().forEach(u=>{this.tracks.push(u)}),t(this.tracks)}else this.seeked?(this.seeked=!1,(n=this.canvasContext)==null||n.drawImage(this.videoElement,0,0,(i=this.canvas)==null?void 0:i.width,(a=this.canvas)==null?void 0:a.height)):(yield this.videoElement.play(),t(this.tracks))}catch(d){o.e(this.TAG,\"Error playing video\",e,d.message),r(d)}}),this.videoElement.onseeked=()=>{this.seeked=!0}})}getTracks(){return this.tracks.map(e=>e.id)}getElement(){return this.videoElement}stop(){var e,t,r;(e=this.videoElement)==null||e.pause(),(t=this.videoElement)==null||t.removeAttribute(\"src\"),this.videoElement=null,(r=this.audioContextManager)==null||r.cleanup(),this.clearCanvasAndTracks()}clearCanvasAndTracks(){var e;this.tracks=[],(e=this.canvasContext)==null||e.clearRect(0,0,this.canvas.width,this.canvas.height),clearTimeout(this.timer)}getVideoElement(){if(this.videoElement)return this.videoElement;let e=document.createElement(\"video\");return e.crossOrigin=\"anonymous\",e.addEventListener(\"timeupdate\",t=>this.emit(\"progress\",t)),e.addEventListener(\"ended\",()=>{this.emit(\"ended\",null)}),this.audioContextManager=new Ue(e),e}createCanvas(){this.canvas||(this.canvas=document.createElement(\"canvas\"),this.canvasContext=this.canvas.getContext(\"2d\"))}get TAG(){return\"PlaylistVideoManager\"}};var yt={audio:{list:[],currentIndex:-1,isAutoplayOn:!0},video:{list:[],currentIndex:-1,isAutoplayOn:!0}},At=class extends Te{constructor(e,t){super();this.sdk=e;this.eventBus=t;this.state={audio:S({},yt.audio),video:S({},yt.video)};this.handlePausePlaylist=r=>c(this,[r],function*({enabled:e,track:t}){var a;if(e)return;let i;t.source===\"audioplaylist\"&&(i=M.audio),t.source===\"videoplaylist\"&&(i=M.video),!!i&&((a=this.getElement(i))==null||a.pause())});this.addTrack=(e,t)=>c(this,null,function*(){yield this.sdk.addTrack(e,t),o.d(this.TAG,\"Playlist track added\",e)});this.removeTrack=e=>c(this,null,function*(){yield this.sdk.removeTrack(e),o.d(this.TAG,\"Playlist track removed\",e)});this.audioManager=new ar,this.videoManager=new sr,this.addListeners()}getList(e=M.audio){return this.state[e].list}setList(e){if(!e||e.length===0){o.w(this.TAG,\"Please pass in a list of HMSPlaylistItem's\");return}e.forEach(t=>{this.state[t.type].list.includes(t)||this.state[t.type].list.push(t)})}clearList(e){return c(this,null,function*(){this.isPlaying(e)&&(yield this.stop(e)),this.state[e].list=[]})}removeItem(e,t){return c(this,null,function*(){let{list:r,currentIndex:i}=this.state[t],a=r.findIndex(n=>e===n.id);return a>-1?(i===a&&this.isPlaying(t)&&(yield this.stop(t)),r.splice(a,1),!0):!1})}seek(e,t=M.audio){let{currentIndex:r}=this.state[t];if(r===-1)throw h.PlaylistErrors.NoEntryToPlay(p.PLAYLIST,\"No item is currently playing\");let i=this.getElement(t);if(i){let a=Math.max(i.currentTime+e,0);i.currentTime=Math.min(a,i.duration)}}seekTo(e,t=M.audio){let{currentIndex:r}=this.state[t];if(r===-1)throw h.PlaylistErrors.NoEntryToPlay(p.PLAYLIST,\"No item is currently playing\");if(e<0)throw Error(\"value cannot be negative\");let i=this.getElement(t);i&&(i.currentTime=Math.min(e,i.duration))}setVolume(e,t=M.audio){if(e<0||e>100)throw Error(\"Please pass a valid number between 0-100\");let r=this.getElement(t);r&&(r.volume=e*.01)}getVolume(e=M.audio){let t=this.getElement(e);return t?t.volume*100:0}getCurrentTime(e=M.audio){let t=this.getElement(e);return(t==null?void 0:t.currentTime)||0}getCurrentIndex(e=M.audio){return this.state[e].currentIndex}getCurrentProgress(e=M.audio){var n;let{list:t,currentIndex:r}=this.state[e],i=(n=t[r])==null?void 0:n.url,a=this.getElement(e);return!i||!a?0:Math.floor(100*(a.currentTime/a.duration))}getCurrentSelection(e=M.audio){let{list:t,currentIndex:r}=this.state[e];if(r!==-1)return t[r]}isPlaying(e=M.audio){let t=this.getElement(e);return!!t&&!t.paused}setIsAutoplayOn(e=M.audio,t){this.state[e].isAutoplayOn=t}getPlaybackRate(e=M.audio){let t=this.getElement(e);return t?t.playbackRate:1}setPlaybackRate(e=M.audio,t){if(t<.25||t>2)throw Error(\"Please pass a value between 0.25 and 2.0\");let r=this.getElement(e);r&&(r.playbackRate=t)}setEnabled(i,a){return c(this,arguments,function*(e,{id:t,type:r=M.audio}){let d=this.state[r].list.findIndex(u=>u.id===t);if(!t||d===-1){o.w(this.TAG,\"Pass a valid id\");return}let l=this.state[r].list[d].url;e?yield this.play(l,r):yield this.pause(l,r),this.state[r].currentIndex=d,this.setDuration(r)})}playNext(){return c(this,arguments,function*(e=M.audio){let{list:t,currentIndex:r}=this.state[e];if(r>=t.length-1)throw h.PlaylistErrors.NoEntryToPlay(p.PLAYLIST,\"Reached end of playlist\");yield this.play(t[r+1].url,e),this.state[e].currentIndex=r+1,this.setDuration(e)})}playPrevious(){return c(this,arguments,function*(e=M.audio){let{list:t,currentIndex:r}=this.state[e];if(r<=0)throw h.PlaylistErrors.NoEntryToPlay(p.PLAYLIST,\"Reached start of playlist\");yield this.play(t[r-1].url,e),this.state[e].currentIndex=r-1,this.setDuration(e)})}stop(){return c(this,arguments,function*(e=M.audio){var r;let t=e===M.audio?this.audioManager:this.videoManager;(r=t.getElement())==null||r.pause(),yield this.removeTracks(e),t.stop(),this.state[e].currentIndex=-1})}cleanup(){this.state={audio:S({},yt.audio),video:S({},yt.video)},this.eventBus.localAudioEnabled.unsubscribe(this.handlePausePlaylist),this.eventBus.localVideoEnabled.unsubscribe(this.handlePausePlaylist),this.audioManager.stop(),this.videoManager.stop()}onProgress(e){this.videoManager.on(\"progress\",()=>{try{e({type:M.video,progress:this.getCurrentProgress(M.video)})}catch(t){o.e(this.TAG,\"Error in onProgress callback\")}}),this.audioManager.on(\"progress\",()=>{try{e({type:M.audio,progress:this.getCurrentProgress(M.audio)})}catch(t){o.e(this.TAG,\"Error in onProgress callback\")}})}onNewTrackStart(e){this.on(\"newTrackStart\",e)}onPlaylistEnded(e){this.on(\"playlistEnded\",e)}onCurrentTrackEnded(e){this.on(\"currentTrackEnded\",e)}getElement(e=M.audio){return e===M.audio?this.audioManager.getElement():this.videoManager.getElement()}removeTracks(){return c(this,arguments,function*(e=M.audio){let r=(e===M.audio?this.audioManager:this.videoManager).getTracks();for(let i of r)yield this.removeTrack(i)})}play(r){return c(this,arguments,function*(e,t=M.audio){let i=t===M.audio?this.audioManager:this.videoManager,a=i.getElement();if(this.isItemCurrentlyPlaying(e,t)){o.w(this.TAG,`The ${t} is currently playing`);return}if(a==null?void 0:a.src.includes(e))yield a.play();else{a==null||a.pause();let n=yield i.play(e);for(let d of n)yield this.addTrack(d,t===M.audio?\"audioplaylist\":\"videoplaylist\")}})}isItemCurrentlyPlaying(e,t){let r=this.getElement(t);return!!(r&&!r.paused&&r.src.includes(e))}setDuration(e=M.audio){let t=this.getElement(e),{list:r,currentIndex:i}=this.state[e];r[i]&&(r[i].duration=(t==null?void 0:t.duration)||0),this.emit(\"newTrackStart\",r[i])}pause(r){return c(this,arguments,function*(e,t=M.audio){let i=this.getElement(t);i&&!i.paused&&i.src.includes(e)?(i.pause(),o.d(this.TAG,\"paused url\",e)):o.w(this.TAG,\"The passed in url is not currently playing\")})}addListeners(){this.audioManager.on(\"ended\",()=>this.handleEnded(M.audio)),this.videoManager.on(\"ended\",()=>this.handleEnded(M.video)),this.eventBus.localAudioEnabled.subscribe(this.handlePausePlaylist),this.eventBus.localAudioEnabled.subscribe(this.handlePausePlaylist)}handleEnded(){return c(this,arguments,function*(e=M.audio){let{list:t,currentIndex:r,isAutoplayOn:i}=this.state[e];r===t.length-1?(yield this.stop(e),this.emit(\"playlistEnded\",e)):i?this.playNext(e):yield this.pause(t[r].url,e),this.emit(\"currentTrackEnded\",t[r])})}get TAG(){return\"PlaylistManager\"}};var B=class{constructor(e,t){this.eventName=e;this.eventEmitter=t;this.publish=e=>{this.eventEmitter.emit(this.eventName,e)};this.subscribe=e=>{this.eventEmitter.on(this.eventName,e)};this.subscribeOnce=e=>{this.eventEmitter.once(this.eventName,e)};this.unsubscribe=e=>{this.eventEmitter.off(this.eventName,e)};this.waitFor=e=>this.eventEmitter.waitFor(this.eventName,{filter:e});this.removeAllListeners=()=>{this.eventEmitter.removeAllListeners(this.eventName)}}};var nr=class{constructor(){this.eventEmitter=new eventemitter2__WEBPACK_IMPORTED_MODULE_4__.EventEmitter2;this.deviceChange=new B(V.DEVICE_CHANGE,this.eventEmitter);this.localAudioEnabled=new B(V.LOCAL_AUDIO_ENABLED,this.eventEmitter);this.localVideoEnabled=new B(V.LOCAL_VIDEO_ENABLED,this.eventEmitter);this.statsUpdate=new B(V.STATS_UPDATE,this.eventEmitter);this.trackDegraded=new B(V.TRACK_DEGRADED,this.eventEmitter);this.trackRestored=new B(V.TRACK_RESTORED,this.eventEmitter);this.trackAudioLevelUpdate=new B(V.TRACK_AUDIO_LEVEL_UPDATE,this.eventEmitter);this.audioPluginFailed=new B(V.AUDIO_PLUGIN_FAILED,this.eventEmitter);this.localAudioSilence=new B(V.LOCAL_AUDIO_SILENCE,this.eventEmitter);this.analytics=new B(V.ANALYTICS,this.eventEmitter);this.policyChange=new B(V.POLICY_CHANGE,this.eventEmitter);this.localRoleUpdate=new B(V.LOCAL_ROLE_UPDATE,this.eventEmitter);this.audioTrackUpdate=new B(V.AUDIO_TRACK_UPDATE,this.eventEmitter);this.audioTrackAdded=new B(V.AUDIO_TRACK_ADDED,this.eventEmitter);this.audioTrackRemoved=new B(V.AUDIO_TRACK_REMOVED,this.eventEmitter);this.autoplayError=new B(V.AUTOPLAY_ERROR,this.eventEmitter)}};var or=class{constructor(e,t){this.eventBus=e;this.listener=t;this.TAG=\"NetworkTestManager\";this.controller=new AbortController;this.start=e=>c(this,null,function*(){var u;if(!e)return;let{url:t,timeout:r,scoreMap:i}=e,a=this.controller.signal,n=Date.now(),d=0,l=j(r).then(()=>{this.controller.abort()});try{let g=(u=(yield fetch(`${t}?${Date.now()}`,{signal:a})).body)==null?void 0:u.getReader();if(!g)throw Error(\"unable to process request\");let T=()=>c(this,null,function*(){if(!!g)try{let b=!1;for(;!b;){let{value:x,done:X}=yield g.read();b=X,x&&(d+=x.byteLength,this.sendScore({scoreMap:i,downloadedSize:d,startTime:n}))}}catch(b){o.e(this.TAG,b)}});return Promise.race([T(),l]).then(()=>{this.sendScore({scoreMap:i,downloadedSize:d,startTime:n,finished:!0})}).catch(b=>{o.e(this.TAG,b),this.updateScoreToListener(0),this.eventBus.analytics.publish(P.previewNetworkQuality({error:b.message}))})}catch(m){o.e(this.TAG,m),m.name!==\"AbortError\"&&(this.updateScoreToListener(0),this.eventBus.analytics.publish(P.previewNetworkQuality({error:m.message})))}});this.stop=()=>{this.controller.signal.aborted||this.controller.abort()};this.sendScore=({scoreMap:e,downloadedSize:t,startTime:r,finished:i=!1})=>{let a=(Date.now()-r)/1e3,d=t/1024/a*8,l=-1;for(let u in e){let m=e[u];d>=m.low&&(!m.high||d<=m.high)&&(l=Number(u))}this.updateScoreToListener(l),i&&this.eventBus.analytics.publish(P.previewNetworkQuality({score:l,downLink:d.toFixed(2)}))}}updateScoreToListener(e){var t,r;e!==this.score&&(this.score=e,(r=(t=this.listener)==null?void 0:t.onNetworkQuality)==null||r.call(t,e))}};var Xr={isAudioMuted:!1,isVideoMuted:!1,audioInputDeviceId:\"default\",audioOutputDeviceId:\"default\",videoDeviceId:\"default\"},ei={published:!1,isInitialised:!1,isReconnecting:!1,isPreviewInProgress:!1,deviceManagersInitialised:!1},Di=class{constructor(){this.TAG=\"[HMSSdk]:\";this.transportState=C.Disconnected;this.analyticsTimer=new $t;this.sdkState=S({},ei);this.handleAutoplayError=e=>{var t,r;(r=(t=this.errorListener)==null?void 0:t.onError)==null||r.call(t,e)};this.observer={onNotification:e=>{if(e.method===y.PEER_LEAVE_REQUEST){this.handlePeerLeaveRequest(e.params);return}e.method===y.POLICY_CHANGE&&this.analyticsTimer.end(H.ON_POLICY_CHANGE),this.notificationManager.handleNotification(e,this.sdkState.isReconnecting)},onTrackAdd:e=>{this.notificationManager.handleTrackAdd(e)},onTrackRemove:e=>{this.notificationManager.handleTrackRemove(e)},onTrackDegrade:e=>{var t,r;o.d(this.TAG,\"Sending Track Update Track Degraded\",e),(r=this.listener)==null||r.onTrackUpdate(N.TRACK_DEGRADED,e,(t=this.store)==null?void 0:t.getPeerByTrackId(e.trackId))},onTrackRestore:e=>{var t,r;o.d(this.TAG,\"Sending Track Update Track Restored\",e),(r=this.listener)==null||r.onTrackUpdate(N.TRACK_RESTORED,e,(t=this.store)==null?void 0:t.getPeerByTrackId(e.trackId))},onFailure:e=>{var t;(t=this.errorListener)==null||t.onError(e)},onStateChange:(e,t)=>c(this,null,function*(){var r,i,a,n;switch(e){case C.Preview:case C.Joined:this.transportState===C.Reconnecting&&((r=this.listener)==null||r.onReconnected());break;case C.Failed:yield this.leave(),(a=(i=this.errorListener)==null?void 0:i.onError)==null||a.call(i,t),this.sdkState.isReconnecting=!1;break;case C.Reconnecting:this.sdkState.isReconnecting=!0,(n=this.listener)==null||n.onReconnecting(t);break}this.transportState=e,o.d(this.TAG,\"Transport State Change\",this.transportState)})};this.handlePeerLeaveRequest=e=>{var i;let t=e.requested_by?this.store.getPeerById(e.requested_by):void 0,r={roomEnded:e.room_end,reason:e.reason,requestedBy:t};(i=this.listener)==null||i.onRemovedFromRoom(r),this.leave()};this.handleDeviceChange=e=>{var t,r,i,a,n,d;if(o.d(this.TAG,\"Device Change event\",e),(r=(t=this.deviceChangeListener)==null?void 0:t.onDeviceChange)==null||r.call(t,e),e.error&&e.type){let l=e.type.includes(\"audio\")?(i=this.localPeer)==null?void 0:i.audioTrack:(a=this.localPeer)==null?void 0:a.videoTrack;(n=this.errorListener)==null||n.onError(e.error),[E.TracksErrors.CANT_ACCESS_CAPTURE_DEVICE,E.TracksErrors.DEVICE_IN_USE,E.TracksErrors.DEVICE_NOT_AVAILABLE].includes(e.error.code)&&l&&(l.setEnabled(!1),(d=this.listener)==null||d.onTrackUpdate(N.TRACK_MUTED,l,this.localPeer))}};this.handleAudioPluginError=e=>{var t;o.e(this.TAG,\"Audio Plugin Error event\",e),(t=this.errorListener)==null||t.onError(e)};this.handleLocalRoleUpdate=r=>c(this,[r],function*({oldRole:e,newRole:t}){var i;yield this.transport.handleLocalRoleUpdate({oldRole:e,newRole:t}),yield(i=this.roleChangeManager)==null?void 0:i.handleLocalPeerRoleUpdate({oldRole:e,newRole:t})});this.getScreenshareSettings=e=>{let{screen:t}=this.store.getPublishParams(),r=this.store.getSimulcastDimensions(\"screen\");return{video:new G().maxBitrate(t.bitRate,!1).codec(t.codec).maxFramerate(t.frameRate).setWidth((r==null?void 0:r.width)||t.width).setHeight((r==null?void 0:r.height)||t.height).build(),audio:e?void 0:new J().build()}};this.sendAudioPresenceFailed=()=>{let e=h.TracksErrors.NoAudioDetected(p.PREVIEW);this.sendAnalyticsEvent(P.audioDetectionFail(e,this.deviceManager.getCurrentSelection().audioInput))};this.sendJoinAnalyticsEvent=(e=!1,t)=>{this.eventBus.analytics.publish(P.join(D(S({error:t},this.analyticsTimer.getTimes(H.INIT,H.WEBSOCKET_CONNECT,H.ON_POLICY_CHANGE,H.LOCAL_TRACKS)),{time:this.analyticsTimer.getTimeTaken(H.JOIN),is_preview_called:e})))};this.sendPreviewAnalyticsEvent=e=>{this.eventBus.analytics.publish(P.preview(D(S({error:e},this.analyticsTimer.getTimes(H.INIT,H.WEBSOCKET_CONNECT,H.ON_POLICY_CHANGE,H.LOCAL_TRACKS)),{time:this.analyticsTimer.getTimeTaken(H.PREVIEW)})))};this.sendAnalyticsEvent=e=>{this.analyticsEventsService.queue(e).flush()}}initStoreAndManagers(){if(this.sdkState.isInitialised){this.notificationManager.setListener(this.listener),this.audioSinkManager.setListener(this.listener);return}this.sdkState.isInitialised=!0,this.store=new kt,this.eventBus=new nr,this.networkTestManager=new or(this.eventBus,this.listener),this.playlistManager=new At(this,this.eventBus),this.notificationManager=new lt(this.store,this.eventBus,this.listener,this.audioListener),this.deviceManager=new ft(this.store,this.eventBus),this.audioSinkManager=new Tt(this.store,this.deviceManager,this.eventBus),this.audioOutput=new Et(this.deviceManager,this.audioSinkManager),this.audioSinkManager.setListener(this.listener),this.eventBus.autoplayError.subscribe(this.handleAutoplayError),this.localTrackManager=new le(this.store,this.observer,this.deviceManager,this.eventBus,this.analyticsTimer),this.analyticsEventsService=new rr(this.store),this.transport=new gt(this.observer,this.deviceManager,this.store,this.localTrackManager,this.eventBus,this.analyticsEventsService,this.analyticsTimer),this.eventBus.analytics.subscribe(this.sendAnalyticsEvent),this.eventBus.deviceChange.subscribe(this.handleDeviceChange),this.eventBus.audioPluginFailed.subscribe(this.handleAudioPluginError)}validateJoined(e){if(!this.localPeer)throw h.GenericErrors.NotConnected(p.VALIDATION,`Not connected - ${e}`)}refreshDevices(){return c(this,null,function*(){this.validateJoined(\"refreshDevices\"),yield this.deviceManager.init(!0)})}getWebrtcInternals(){var e;return(e=this.transport)==null?void 0:e.getWebrtcInternals()}getPlaylistManager(){return this.playlistManager}getRecordingState(){var e;return(e=this.store.getRoom())==null?void 0:e.recording}getRTMPState(){var e;return(e=this.store.getRoom())==null?void 0:e.rtmp}getHLSState(){var e;return(e=this.store.getRoom())==null?void 0:e.hls}get localPeer(){var e;return(e=this.store)==null?void 0:e.getLocalPeer()}preview(e,t){return c(this,null,function*(){if(Ct(),Rt(),this.sdkState.isPreviewInProgress)return Promise.reject(h.GenericErrors.PreviewAlreadyInProgress(p.PREVIEW,\"Preview already called\"));this.analyticsTimer.start(H.PREVIEW),this.setUpPreview(e,t),e.alwaysRequestPermissions&&this.localTrackManager.requestPermissions().then(()=>c(this,null,function*(){yield this.initDeviceManagers()}));let r=!1,i=!1,a=setTimeout(()=>{var n,d;(!r||!i)&&((d=(n=this.listener)==null?void 0:n.onNetworkQuality)==null||d.call(n,-1))},3e3);return new Promise((n,d)=>{let l=()=>c(this,null,function*(){var m;let u=yield this.localTrackManager.getTracksToPublish(e.settings||Xr);u.forEach(g=>this.setLocalPeerTrack(g)),((m=this.localPeer)==null?void 0:m.audioTrack)&&this.initPreviewTrackAudioLevelMonitor(),yield this.initDeviceManagers(),this.sdkState.isPreviewInProgress=!1,this.analyticsTimer.end(H.PREVIEW),t.onPreview(this.store.getRoom(),u),this.sendPreviewAnalyticsEvent(),n()});this.eventBus.policyChange.subscribeOnce(l),this.transport.preview(e.authToken,e.initEndpoint,this.localPeer.peerId,{name:e.userName,metaData:e.metaData||\"\"},e.autoVideoSubscribe).then(u=>{var m;r=!0,clearTimeout(a),u&&e.captureNetworkQualityInPreview&&this.networkTestManager.start((m=u.config)==null?void 0:m.networkHealth).then(()=>{i=!0})}).catch(u=>{var m;this.analyticsTimer.end(H.PREVIEW),(m=this.errorListener)==null||m.onError(u),this.sendPreviewAnalyticsEvent(u),this.sdkState.isPreviewInProgress=!1,d(u)})})})}join(e,t){var d,l,u;if(Ct(),Rt(),this.sdkState.isPreviewInProgress)throw h.GenericErrors.NotReady(p.JOIN,\"Preview is in progress, can't join\");this.analyticsTimer.start(H.JOIN);let r=this.transportState===C.Preview,{roomId:i,userId:a,role:n}=St(e.authToken);(d=this.networkTestManager)==null||d.stop(),(u=(l=this.localPeer)==null?void 0:l.audioTrack)==null||u.destroyAudioLevelMonitor(),this.listener=t,this.commonSetup(e,i,t),this.removeDevicesFromConfig(e),this.store.setConfig(e),this.localPeer?(this.localPeer.name=e.userName,this.localPeer.role=this.store.getPolicyForRole(n),this.localPeer.customerUserId=a,this.localPeer.metadata=e.metaData||\"\"):this.createAndAddLocalPeerToStore(e,n,a),this.roleChangeManager=new Mt(this.store,this.transport,this.publish.bind(this),this.removeTrack.bind(this),this.listener),this.eventBus.localRoleUpdate.subscribe(this.handleLocalRoleUpdate),o.d(this.TAG,\"SDK Store\",this.store),o.d(this.TAG,`\\u23F3 Joining room ${i}`),o.time(`join-room-${i}`),this.transport.join(e.authToken,this.localPeer.peerId,{name:e.userName,metaData:e.metaData||\"\"},e.initEndpoint,e.autoVideoSubscribe).then(()=>c(this,null,function*(){o.d(this.TAG,`\\u2705 Joined room ${i}`),dt.resumeContext(),this.notifyJoin(),this.sendJoinAnalyticsEvent(r),this.store.getPublishParams()&&!this.sdkState.published&&!fe&&(yield this.publish(e.settings||Xr))})).catch(m=>{var g;this.analyticsTimer.end(H.JOIN),(g=this.listener)==null||g.onError(m),this.sendJoinAnalyticsEvent(r,m),o.e(this.TAG,\"Unable to join room\",m)}).then(()=>{o.timeEnd(`join-room-${i}`)})}stringifyMetadata(e){e.metaData&&typeof e.metaData!=\"string\"&&JSON.stringify(e.metaData)}cleanUp(){var e,t;this.cleanDeviceManagers(),this.eventBus.analytics.unsubscribe(this.sendAnalyticsEvent),this.analyticsTimer.cleanUp(),Y.cleanup(),this.playlistManager.cleanup(),o.cleanUp(),this.sdkState=S({},ei),this.localPeer&&((e=this.localPeer.audioTrack)==null||e.cleanup(),this.localPeer.audioTrack=void 0,(t=this.localPeer.videoTrack)==null||t.cleanup(),this.localPeer.videoTrack=void 0),this.store.cleanUp(),this.listener=void 0,this.roleChangeManager&&this.eventBus.localRoleUpdate.unsubscribe(this.roleChangeManager.handleLocalPeerRoleUpdate)}leave(){return c(this,null,function*(){var t,r;let e=this.store.getRoom();if(e){let i=e.id;(t=this.networkTestManager)==null||t.stop(),o.d(this.TAG,`\\u23F3 Leaving room ${i}`),yield(r=this.transport)==null?void 0:r.leave(),this.cleanUp(),o.d(this.TAG,`\\u2705 Left room ${i}`)}})}getLocalPeer(){return this.store.getLocalPeer()}getPeers(){let e=this.store.getPeers();return e.length<50&&o.d(this.TAG,\"Got peers\",e),e}getAudioOutput(){return this.audioOutput}sendMessage(e,t){this.sendMessageInternal({message:t,type:e})}sendBroadcastMessage(e,t){return c(this,null,function*(){return yield this.sendMessageInternal({message:e,type:t})})}sendGroupMessage(e,t,r){return c(this,null,function*(){let i=this.store.getKnownRoles();if((t.filter(n=>i[n.name])||[]).length===0)throw h.GenericErrors.ValidationFailed(\"No valid role is present\",t);return yield this.sendMessageInternal({message:e,recipientRoles:t,type:r})})}sendDirectMessage(e,t,r){return c(this,null,function*(){var a;if(!this.store.getPeerById(t.peerId))throw h.GenericErrors.ValidationFailed(\"Invalid peer - peer not present in the room\",t);if(((a=this.localPeer)==null?void 0:a.peerId)===t.peerId)throw h.GenericErrors.ValidationFailed(\"Cannot send message to self\");return yield this.sendMessageInternal({message:e,recipientPeer:t,type:r})})}sendMessageInternal(a){return c(this,arguments,function*({recipientRoles:e,recipientPeer:t,type:r=\"chat\",message:i}){if(i.replace(/\\u200b/g,\" \").trim()===\"\")throw o.w(this.TAG,\"sendMessage\",\"Ignoring empty message send\"),h.GenericErrors.ValidationFailed(\"Empty message not allowed\");let n=new Ce({sender:this.localPeer,type:r,message:i,recipientPeer:t,recipientRoles:e,time:new Date});o.d(this.TAG,\"Sending Message: \",n);let d=yield this.transport.sendMessage(n);return n.time=new Date(d.timestamp),n})}startScreenShare(r){return c(this,arguments,function*(e,t={audioOnly:!1,videoOnly:!1}){var l,u,m;let i=this.store.getPublishParams();if(!i)return;let{allowed:a}=i;if(!(a&&a.includes(\"screen\"))){o.e(this.TAG,`Role ${(l=this.localPeer)==null?void 0:l.role} cannot share screen`);return}if((m=(u=this.localPeer)==null?void 0:u.auxiliaryTracks)==null?void 0:m.find(g=>g.source===\"screen\"))throw Error(\"Cannot share multiple screens\");let d=yield this.getScreenshareTracks(e,t);if(!this.localPeer){o.d(this.TAG,\"Screenshared when not connected\"),d.forEach(g=>{g.cleanup()});return}yield this.transport.publish(d),d.forEach(g=>{var T,b,x;g.peerId=(T=this.localPeer)==null?void 0:T.peerId,(b=this.localPeer)==null||b.auxiliaryTracks.push(g),(x=this.listener)==null||x.onTrackUpdate(N.TRACK_ADDED,g,this.localPeer)})})}stopEndedScreenshare(e){return c(this,null,function*(){o.d(this.TAG,\"\\u2705 Screenshare ended natively\"),yield this.stopScreenShare(),e()})}stopScreenShare(){return c(this,null,function*(){var t;o.d(this.TAG,\"\\u2705 Screenshare ended from app\");let e=(t=this.localPeer)==null?void 0:t.auxiliaryTracks.filter(r=>r.source===\"screen\");if(e)for(let r of e)yield this.removeTrack(r.trackId)})}addTrack(e,t=\"regular\"){return c(this,null,function*(){var u,m,g,T;if(!e){o.w(this.TAG,\"Please pass a valid MediaStreamTrack\");return}if(!this.localPeer)throw h.GenericErrors.NotConnected(p.VALIDATION,\"No local peer present, cannot addTrack\");if(this.localPeer.auxiliaryTracks.find(b=>b.trackId===e.id))return;let i=e.kind,a=new MediaStream([e]),n=new ae(a),d=i===\"audio\"?He:de,l=new d(n,e,t,this.eventBus);this.setPlaylistSettings({track:e,hmsTrack:l,source:t}),yield(u=this.transport)==null?void 0:u.publish([l]),l.peerId=(m=this.localPeer)==null?void 0:m.peerId,(g=this.localPeer)==null||g.auxiliaryTracks.push(l),(T=this.listener)==null||T.onTrackUpdate(N.TRACK_ADDED,l,this.localPeer)})}removeTrack(e){return c(this,null,function*(){var r;if(!this.localPeer)throw h.GenericErrors.NotConnected(p.VALIDATION,\"No local peer present, cannot removeTrack\");let t=this.localPeer.auxiliaryTracks.findIndex(i=>i.trackId===e);if(t>-1){let i=this.localPeer.auxiliaryTracks[t];yield this.transport.unpublish([i]),i.source===\"audioplaylist\"?this.playlistManager.stop(M.audio):i.source===\"videoplaylist\"&&this.playlistManager.stop(M.video),this.localPeer.auxiliaryTracks.splice(t,1),(r=this.listener)==null||r.onTrackUpdate(N.TRACK_REMOVED,i,this.localPeer)}else o.w(this.TAG,`No track found for ${e}`)})}setAnalyticsLevel(e){this.analyticsEventsService.level=e}setLogLevel(e){o.level=e}addAudioListener(e){this.audioListener=e,this.notificationManager.setAudioListener(e)}addConnectionQualityListener(e){this.notificationManager.setConnectionQualityListener(e)}changeRole(e,t,r=!1){return c(this,null,function*(){var i;!e.role||e.role.name===t||(yield(i=this.transport)==null?void 0:i.changeRole(e,t,r))})}acceptChangeRole(e){return c(this,null,function*(){var t;yield(t=this.transport)==null?void 0:t.acceptRoleChange(e)})}endRoom(e,t){return c(this,null,function*(){var r;if(!this.localPeer)throw h.GenericErrors.NotConnected(p.VALIDATION,\"No local peer present, cannot end room\");yield(r=this.transport)==null?void 0:r.endRoom(e,t),yield this.leave()})}removePeer(e,t){return c(this,null,function*(){var r;if(!this.localPeer)throw h.GenericErrors.NotConnected(p.VALIDATION,\"No local peer present, cannot remove peer\");if(!this.store.getPeerById(e.peerId))throw h.GenericErrors.ValidationFailed(\"Invalid peer, given peer not present in room\",e);yield(r=this.transport)==null?void 0:r.removePeer(e.peerId,t)})}startRTMPOrRecording(e){return c(this,null,function*(){var t;if(!this.localPeer)throw h.GenericErrors.NotConnected(p.VALIDATION,\"No local peer present, cannot start streaming or recording\");try{yield(t=this.transport)==null?void 0:t.startRTMPOrRecording(e)}catch(r){throw this.sendAnalyticsEvent(P.RTMPError(r)),r}})}stopRTMPAndRecording(){return c(this,null,function*(){var e;if(!this.localPeer)throw h.GenericErrors.NotConnected(p.VALIDATION,\"No local peer present, cannot stop streaming or recording\");try{yield(e=this.transport)==null?void 0:e.stopRTMPOrRecording()}catch(t){throw this.sendAnalyticsEvent(P.RTMPError(t,!1)),t}})}startHLSStreaming(e){return c(this,null,function*(){var t;if(!this.localPeer)throw h.GenericErrors.NotConnected(p.VALIDATION,\"No local peer present, cannot start HLS streaming\");try{yield(t=this.transport)==null?void 0:t.startHLSStreaming(e)}catch(r){throw this.sendAnalyticsEvent(P.HLSError(r)),r}})}stopHLSStreaming(e){return c(this,null,function*(){var t;if(!this.localPeer)throw h.GenericErrors.NotConnected(p.VALIDATION,\"No local peer present, cannot stop HLS streaming\");try{yield(t=this.transport)==null?void 0:t.stopHLSStreaming(e)}catch(r){throw this.sendAnalyticsEvent(P.HLSError(r,!1)),r}})}sendHLSTimedMetadata(e){return c(this,null,function*(){var t;this.validateJoined(\"sendHLSTimedMetadata\"),yield(t=this.transport)==null?void 0:t.sendHLSTimedMetadata(e)})}changeName(e){return c(this,null,function*(){var t;this.validateJoined(\"changeName\"),yield(t=this.transport)==null?void 0:t.changeName(e),this.notificationManager.updateLocalPeer({name:e})})}changeMetadata(e){return c(this,null,function*(){var t;this.validateJoined(\"changeMetadata\"),yield(t=this.transport)==null?void 0:t.changeMetadata(e),this.notificationManager.updateLocalPeer({metadata:e})})}getRoles(){return Object.values(this.store.getKnownRoles())}changeTrackState(e,t){return c(this,null,function*(){var i;if(e.type===_.VIDEO&&e.source!==\"regular\"){o.w(this.TAG,\"Muting non-regular video tracks is currently not supported\");return}if(e.enabled===t){o.w(this.TAG,`Aborting change track state, track already has enabled - ${t}`,e);return}if(!this.store.getTrackById(e.trackId))throw h.GenericErrors.ValidationFailed(\"No track found for change track state\",e);let r=this.store.getPeerByTrackId(e.trackId);if(!r)throw h.GenericErrors.ValidationFailed(\"No peer found for change track state\",e);yield(i=this.transport)==null?void 0:i.changeTrackState({requested_for:r.peerId,track_id:e.trackId,stream_id:e.stream.id,mute:!t})})}changeMultiTrackState(e){return c(this,null,function*(){var n;if(typeof e.enabled!=\"boolean\")throw h.GenericErrors.ValidationFailed(\"Pass a boolean for enabled\");let{enabled:t,roles:r,type:i,source:a}=e;yield(n=this.transport)==null?void 0:n.changeMultiTrackState({value:!t,type:i,source:a,roles:r==null?void 0:r.map(d=>d==null?void 0:d.name)})})}publish(e){return c(this,null,function*(){let t=yield this.localTrackManager.getTracksToPublish(e);yield this.setAndPublishTracks(t),this.sdkState.published=!0})}setAndPublishTracks(e){return c(this,null,function*(){var t;for(let r of e)yield this.transport.publish([r]),this.setLocalPeerTrack(r),(t=this.listener)==null||t.onTrackUpdate(N.TRACK_ADDED,r,this.localPeer);yield this.initDeviceManagers()})}setLocalPeerTrack(e){var t;switch(e.peerId=(t=this.localPeer)==null?void 0:t.peerId,e.type){case _.AUDIO:this.localPeer.audioTrack=e;break;case _.VIDEO:this.localPeer.videoTrack=e;break}}initDeviceManagers(){return c(this,null,function*(){var e,t,r;this.sdkState.deviceManagersInitialised||(this.sdkState.deviceManagersInitialised=!0,yield this.deviceManager.init(),this.deviceManager.updateOutputDevice((t=(e=Y.getSelection())==null?void 0:e.audioOutput)==null?void 0:t.deviceId),this.audioSinkManager.init((r=this.store.getConfig())==null?void 0:r.audioSinkElementId))})}cleanDeviceManagers(){this.eventBus.deviceChange.unsubscribe(this.handleDeviceChange),this.eventBus.audioPluginFailed.unsubscribe(this.handleAudioPluginError),this.eventBus.autoplayError.unsubscribe(this.handleAutoplayError),this.deviceManager.cleanUp(),this.audioSinkManager.cleanUp()}initPreviewTrackAudioLevelMonitor(){var t;let e=(t=this.localPeer)==null?void 0:t.audioTrack;e==null||e.initAudioLevelMonitor(),this.eventBus.trackAudioLevelUpdate.subscribe(r=>{var a;let i=r&&r.track.trackId===(e==null?void 0:e.trackId)?[{audioLevel:r.audioLevel,peer:this.localPeer,track:e}]:[];this.store.updateSpeakers(i),(a=this.audioListener)==null||a.onAudioLevelUpdate(i)}),this.eventBus.localAudioSilence.subscribe(this.sendAudioPresenceFailed)}notifyJoin(){var r;let e=this.store.getLocalPeer(),t=this.store.getRoom();t.joinedAt=new Date,e&&(e.joinedAt=t.joinedAt),(e==null?void 0:e.role)?(this.analyticsTimer.end(H.JOIN),(r=this.listener)==null||r.onJoin(t)):this.eventBus.policyChange.subscribeOnce(()=>{var i;this.analyticsTimer.end(H.JOIN),(i=this.listener)==null||i.onJoin(t)})}setUpPreview(e,t){this.listener=t,this.sdkState.isPreviewInProgress=!0;let{roomId:r,userId:i,role:a}=St(e.authToken);this.commonSetup(e,r,t),this.store.setConfig(e),this.createAndAddLocalPeerToStore(e,a,i),o.d(this.TAG,\"SDK Store\",this.store)}setPlaylistSettings(i){return c(this,arguments,function*({track:e,hmsTrack:t,source:r}){if(r===\"videoplaylist\"){let a={};if(e.kind===\"audio\")a.maxBitrate=64;else{a.maxBitrate=1e3;let{width:n,height:d}=e.getSettings();a.width=n,a.height=d}yield t.setSettings(a)}else r===\"audioplaylist\"&&(yield t.setSettings({maxBitrate:64}))})}createAndAddLocalPeerToStore(e,t,r){let i=this.store.getPolicyForRole(t),a=new Ze({name:e.userName||\"\",customerUserId:r,metadata:e.metaData||\"\",role:i});this.store.addPeer(a)}commonSetup(e,t,r){this.stringifyMetadata(e),e.initEndpoint||(e.initEndpoint=\"https://prod-init.100ms.live\"),this.errorListener=r,this.deviceChangeListener=r,this.initStoreAndManagers(),this.store.setErrorListener(this.errorListener),this.store.getRoom()||this.store.setRoom(new vt(t,this.store))}removeDevicesFromConfig(e){this.store.getConfig()&&e.settings&&(delete e.settings.audioOutputDeviceId,delete e.settings.videoDeviceId,delete e.settings.audioInputDeviceId)}getScreenshareTracks(e,t){return c(this,null,function*(){let{video:r,audio:i}=this.getScreenshareSettings(t.videoOnly),[a,n]=yield this.transport.getLocalScreen(r,i),d=()=>{this.stopEndedScreenshare(e)},l=[];if(t.audioOnly){if(a.nativeTrack.stop(),!n)throw Error(\"Select share audio when sharing screen\");l.push(n),n.nativeTrack.onended=d}else l.push(a),a.nativeTrack.onended=d,n&&l.push(n);return l})}};function qh(){return c(this,null,function*(){let s=new G().build(),e=new J().build();try{(yield et(e)).stop()}catch(r){if(Ni(r))throw(yield Vr({audio:!1,video:!0})).getTracks().forEach(a=>a.stop()),r}return(yield tt(s)).stop(),!1})}function Ni(s){return s instanceof v&&s.action===p.TRACK}o.i(\"adapter\",`${webrtc_adapter__WEBPACK_IMPORTED_MODULE_0__[\"default\"].browserDetails.browser} v${webrtc_adapter__WEBPACK_IMPORTED_MODULE_0__[\"default\"].browserDetails.version}`);\n//# sourceMappingURL=index.js.map\n\n\n//# sourceURL=webpack://100-ms-demo/./node_modules/@100mslive/hms-video/dist/index.js?");

/***/ }),

/***/ "./node_modules/eventemitter2/lib/eventemitter2.js":
/*!*********************************************************!*\
  !*** ./node_modules/eventemitter2/lib/eventemitter2.js ***!
  \*********************************************************/
/***/ ((module, exports, __webpack_require__) => {

eval("var __WEBPACK_AMD_DEFINE_RESULT__;/*!\n * EventEmitter2\n * https://github.com/hij1nx/EventEmitter2\n *\n * Copyright (c) 2013 hij1nx\n * Licensed under the MIT license.\n */\n;!function(undefined) {\n  var hasOwnProperty= Object.hasOwnProperty;\n  var isArray = Array.isArray ? Array.isArray : function _isArray(obj) {\n    return Object.prototype.toString.call(obj) === \"[object Array]\";\n  };\n  var defaultMaxListeners = 10;\n  var nextTickSupported= typeof process=='object' && typeof process.nextTick=='function';\n  var symbolsSupported= typeof Symbol==='function';\n  var reflectSupported= typeof Reflect === 'object';\n  var setImmediateSupported= typeof setImmediate === 'function';\n  var _setImmediate= setImmediateSupported ? setImmediate : setTimeout;\n  var ownKeys= symbolsSupported? (reflectSupported && typeof Reflect.ownKeys==='function'? Reflect.ownKeys : function(obj){\n    var arr= Object.getOwnPropertyNames(obj);\n    arr.push.apply(arr, Object.getOwnPropertySymbols(obj));\n    return arr;\n  }) : Object.keys;\n\n  function init() {\n    this._events = {};\n    if (this._conf) {\n      configure.call(this, this._conf);\n    }\n  }\n\n  function configure(conf) {\n    if (conf) {\n      this._conf = conf;\n\n      conf.delimiter && (this.delimiter = conf.delimiter);\n\n      if(conf.maxListeners!==undefined){\n          this._maxListeners= conf.maxListeners;\n      }\n\n      conf.wildcard && (this.wildcard = conf.wildcard);\n      conf.newListener && (this._newListener = conf.newListener);\n      conf.removeListener && (this._removeListener = conf.removeListener);\n      conf.verboseMemoryLeak && (this.verboseMemoryLeak = conf.verboseMemoryLeak);\n      conf.ignoreErrors && (this.ignoreErrors = conf.ignoreErrors);\n\n      if (this.wildcard) {\n        this.listenerTree = {};\n      }\n    }\n  }\n\n  function logPossibleMemoryLeak(count, eventName) {\n    var errorMsg = '(node) warning: possible EventEmitter memory ' +\n        'leak detected. ' + count + ' listeners added. ' +\n        'Use emitter.setMaxListeners() to increase limit.';\n\n    if(this.verboseMemoryLeak){\n      errorMsg += ' Event name: ' + eventName + '.';\n    }\n\n    if(typeof process !== 'undefined' && process.emitWarning){\n      var e = new Error(errorMsg);\n      e.name = 'MaxListenersExceededWarning';\n      e.emitter = this;\n      e.count = count;\n      process.emitWarning(e);\n    } else {\n      console.error(errorMsg);\n\n      if (console.trace){\n        console.trace();\n      }\n    }\n  }\n\n  var toArray = function (a, b, c) {\n    var n = arguments.length;\n    switch (n) {\n      case 0:\n        return [];\n      case 1:\n        return [a];\n      case 2:\n        return [a, b];\n      case 3:\n        return [a, b, c];\n      default:\n        var arr = new Array(n);\n        while (n--) {\n          arr[n] = arguments[n];\n        }\n        return arr;\n    }\n  };\n\n  function toObject(keys, values) {\n    var obj = {};\n    var key;\n    var len = keys.length;\n    var valuesCount = values ? values.length : 0;\n    for (var i = 0; i < len; i++) {\n      key = keys[i];\n      obj[key] = i < valuesCount ? values[i] : undefined;\n    }\n    return obj;\n  }\n\n  function TargetObserver(emitter, target, options) {\n    this._emitter = emitter;\n    this._target = target;\n    this._listeners = {};\n    this._listenersCount = 0;\n\n    var on, off;\n\n    if (options.on || options.off) {\n      on = options.on;\n      off = options.off;\n    }\n\n    if (target.addEventListener) {\n      on = target.addEventListener;\n      off = target.removeEventListener;\n    } else if (target.addListener) {\n      on = target.addListener;\n      off = target.removeListener;\n    } else if (target.on) {\n      on = target.on;\n      off = target.off;\n    }\n\n    if (!on && !off) {\n      throw Error('target does not implement any known event API');\n    }\n\n    if (typeof on !== 'function') {\n      throw TypeError('on method must be a function');\n    }\n\n    if (typeof off !== 'function') {\n      throw TypeError('off method must be a function');\n    }\n\n    this._on = on;\n    this._off = off;\n\n    var _observers= emitter._observers;\n    if(_observers){\n      _observers.push(this);\n    }else{\n      emitter._observers= [this];\n    }\n  }\n\n  Object.assign(TargetObserver.prototype, {\n    subscribe: function(event, localEvent, reducer){\n      var observer= this;\n      var target= this._target;\n      var emitter= this._emitter;\n      var listeners= this._listeners;\n      var handler= function(){\n        var args= toArray.apply(null, arguments);\n        var eventObj= {\n          data: args,\n          name: localEvent,\n          original: event\n        };\n        if(reducer){\n          var result= reducer.call(target, eventObj);\n          if(result!==false){\n            emitter.emit.apply(emitter, [eventObj.name].concat(args))\n          }\n          return;\n        }\n        emitter.emit.apply(emitter, [localEvent].concat(args));\n      };\n\n\n      if(listeners[event]){\n        throw Error('Event \\'' + event + '\\' is already listening');\n      }\n\n      this._listenersCount++;\n\n      if(emitter._newListener && emitter._removeListener && !observer._onNewListener){\n\n        this._onNewListener = function (_event) {\n          if (_event === localEvent && listeners[event] === null) {\n            listeners[event] = handler;\n            observer._on.call(target, event, handler);\n          }\n        };\n\n        emitter.on('newListener', this._onNewListener);\n\n        this._onRemoveListener= function(_event){\n          if(_event === localEvent && !emitter.hasListeners(_event) && listeners[event]){\n            listeners[event]= null;\n            observer._off.call(target, event, handler);\n          }\n        };\n\n        listeners[event]= null;\n\n        emitter.on('removeListener', this._onRemoveListener);\n      }else{\n        listeners[event]= handler;\n        observer._on.call(target, event, handler);\n      }\n    },\n\n    unsubscribe: function(event){\n      var observer= this;\n      var listeners= this._listeners;\n      var emitter= this._emitter;\n      var handler;\n      var events;\n      var off= this._off;\n      var target= this._target;\n      var i;\n\n      if(event && typeof event!=='string'){\n        throw TypeError('event must be a string');\n      }\n\n      function clearRefs(){\n        if(observer._onNewListener){\n          emitter.off('newListener', observer._onNewListener);\n          emitter.off('removeListener', observer._onRemoveListener);\n          observer._onNewListener= null;\n          observer._onRemoveListener= null;\n        }\n        var index= findTargetIndex.call(emitter, observer);\n        emitter._observers.splice(index, 1);\n      }\n\n      if(event){\n        handler= listeners[event];\n        if(!handler) return;\n        off.call(target, event, handler);\n        delete listeners[event];\n        if(!--this._listenersCount){\n          clearRefs();\n        }\n      }else{\n        events= ownKeys(listeners);\n        i= events.length;\n        while(i-->0){\n          event= events[i];\n          off.call(target, event, listeners[event]);\n        }\n        this._listeners= {};\n        this._listenersCount= 0;\n        clearRefs();\n      }\n    }\n  });\n\n  function resolveOptions(options, schema, reducers, allowUnknown) {\n    var computedOptions = Object.assign({}, schema);\n\n    if (!options) return computedOptions;\n\n    if (typeof options !== 'object') {\n      throw TypeError('options must be an object')\n    }\n\n    var keys = Object.keys(options);\n    var length = keys.length;\n    var option, value;\n    var reducer;\n\n    function reject(reason) {\n      throw Error('Invalid \"' + option + '\" option value' + (reason ? '. Reason: ' + reason : ''))\n    }\n\n    for (var i = 0; i < length; i++) {\n      option = keys[i];\n      if (!allowUnknown && !hasOwnProperty.call(schema, option)) {\n        throw Error('Unknown \"' + option + '\" option');\n      }\n      value = options[option];\n      if (value !== undefined) {\n        reducer = reducers[option];\n        computedOptions[option] = reducer ? reducer(value, reject) : value;\n      }\n    }\n    return computedOptions;\n  }\n\n  function constructorReducer(value, reject) {\n    if (typeof value !== 'function' || !value.hasOwnProperty('prototype')) {\n      reject('value must be a constructor');\n    }\n    return value;\n  }\n\n  function makeTypeReducer(types) {\n    var message= 'value must be type of ' + types.join('|');\n    var len= types.length;\n    var firstType= types[0];\n    var secondType= types[1];\n\n    if (len === 1) {\n      return function (v, reject) {\n        if (typeof v === firstType) {\n          return v;\n        }\n        reject(message);\n      }\n    }\n\n    if (len === 2) {\n      return function (v, reject) {\n        var kind= typeof v;\n        if (kind === firstType || kind === secondType) return v;\n        reject(message);\n      }\n    }\n\n    return function (v, reject) {\n      var kind = typeof v;\n      var i = len;\n      while (i-- > 0) {\n        if (kind === types[i]) return v;\n      }\n      reject(message);\n    }\n  }\n\n  var functionReducer= makeTypeReducer(['function']);\n\n  var objectFunctionReducer= makeTypeReducer(['object', 'function']);\n\n  function makeCancelablePromise(Promise, executor, options) {\n    var isCancelable;\n    var callbacks;\n    var timer= 0;\n    var subscriptionClosed;\n\n    var promise = new Promise(function (resolve, reject, onCancel) {\n      options= resolveOptions(options, {\n        timeout: 0,\n        overload: false\n      }, {\n        timeout: function(value, reject){\n          value*= 1;\n          if (typeof value !== 'number' || value < 0 || !Number.isFinite(value)) {\n            reject('timeout must be a positive number');\n          }\n          return value;\n        }\n      });\n\n      isCancelable = !options.overload && typeof Promise.prototype.cancel === 'function' && typeof onCancel === 'function';\n\n      function cleanup() {\n        if (callbacks) {\n          callbacks = null;\n        }\n        if (timer) {\n          clearTimeout(timer);\n          timer = 0;\n        }\n      }\n\n      var _resolve= function(value){\n        cleanup();\n        resolve(value);\n      };\n\n      var _reject= function(err){\n        cleanup();\n        reject(err);\n      };\n\n      if (isCancelable) {\n        executor(_resolve, _reject, onCancel);\n      } else {\n        callbacks = [function(reason){\n          _reject(reason || Error('canceled'));\n        }];\n        executor(_resolve, _reject, function (cb) {\n          if (subscriptionClosed) {\n            throw Error('Unable to subscribe on cancel event asynchronously')\n          }\n          if (typeof cb !== 'function') {\n            throw TypeError('onCancel callback must be a function');\n          }\n          callbacks.push(cb);\n        });\n        subscriptionClosed= true;\n      }\n\n      if (options.timeout > 0) {\n        timer= setTimeout(function(){\n          var reason= Error('timeout');\n          reason.code = 'ETIMEDOUT'\n          timer= 0;\n          promise.cancel(reason);\n          reject(reason);\n        }, options.timeout);\n      }\n    });\n\n    if (!isCancelable) {\n      promise.cancel = function (reason) {\n        if (!callbacks) {\n          return;\n        }\n        var length = callbacks.length;\n        for (var i = 1; i < length; i++) {\n          callbacks[i](reason);\n        }\n        // internal callback to reject the promise\n        callbacks[0](reason);\n        callbacks = null;\n      };\n    }\n\n    return promise;\n  }\n\n  function findTargetIndex(observer) {\n    var observers = this._observers;\n    if(!observers){\n      return -1;\n    }\n    var len = observers.length;\n    for (var i = 0; i < len; i++) {\n      if (observers[i]._target === observer) return i;\n    }\n    return -1;\n  }\n\n  // Attention, function return type now is array, always !\n  // It has zero elements if no any matches found and one or more\n  // elements (leafs) if there are matches\n  //\n  function searchListenerTree(handlers, type, tree, i, typeLength) {\n    if (!tree) {\n      return null;\n    }\n\n    if (i === 0) {\n      var kind = typeof type;\n      if (kind === 'string') {\n        var ns, n, l = 0, j = 0, delimiter = this.delimiter, dl = delimiter.length;\n        if ((n = type.indexOf(delimiter)) !== -1) {\n          ns = new Array(5);\n          do {\n            ns[l++] = type.slice(j, n);\n            j = n + dl;\n          } while ((n = type.indexOf(delimiter, j)) !== -1);\n\n          ns[l++] = type.slice(j);\n          type = ns;\n          typeLength = l;\n        } else {\n          type = [type];\n          typeLength = 1;\n        }\n      } else if (kind === 'object') {\n        typeLength = type.length;\n      } else {\n        type = [type];\n        typeLength = 1;\n      }\n    }\n\n    var listeners= null, branch, xTree, xxTree, isolatedBranch, endReached, currentType = type[i],\n        nextType = type[i + 1], branches, _listeners;\n\n    if (i === typeLength) {\n      //\n      // If at the end of the event(s) list and the tree has listeners\n      // invoke those listeners.\n      //\n\n      if(tree._listeners) {\n        if (typeof tree._listeners === 'function') {\n          handlers && handlers.push(tree._listeners);\n          listeners = [tree];\n        } else {\n          handlers && handlers.push.apply(handlers, tree._listeners);\n          listeners = [tree];\n        }\n      }\n    } else {\n\n      if (currentType === '*') {\n        //\n        // If the event emitted is '*' at this part\n        // or there is a concrete match at this patch\n        //\n        branches = ownKeys(tree);\n        n = branches.length;\n        while (n-- > 0) {\n          branch = branches[n];\n          if (branch !== '_listeners') {\n            _listeners = searchListenerTree(handlers, type, tree[branch], i + 1, typeLength);\n            if (_listeners) {\n              if (listeners) {\n                listeners.push.apply(listeners, _listeners);\n              } else {\n                listeners = _listeners;\n              }\n            }\n          }\n        }\n        return listeners;\n      } else if (currentType === '**') {\n        endReached = (i + 1 === typeLength || (i + 2 === typeLength && nextType === '*'));\n        if (endReached && tree._listeners) {\n          // The next element has a _listeners, add it to the handlers.\n          listeners = searchListenerTree(handlers, type, tree, typeLength, typeLength);\n        }\n\n        branches = ownKeys(tree);\n        n = branches.length;\n        while (n-- > 0) {\n          branch = branches[n];\n          if (branch !== '_listeners') {\n            if (branch === '*' || branch === '**') {\n              if (tree[branch]._listeners && !endReached) {\n                _listeners = searchListenerTree(handlers, type, tree[branch], typeLength, typeLength);\n                if (_listeners) {\n                  if (listeners) {\n                    listeners.push.apply(listeners, _listeners);\n                  } else {\n                    listeners = _listeners;\n                  }\n                }\n              }\n              _listeners = searchListenerTree(handlers, type, tree[branch], i, typeLength);\n            } else if (branch === nextType) {\n              _listeners = searchListenerTree(handlers, type, tree[branch], i + 2, typeLength);\n            } else {\n              // No match on this one, shift into the tree but not in the type array.\n              _listeners = searchListenerTree(handlers, type, tree[branch], i, typeLength);\n            }\n            if (_listeners) {\n              if (listeners) {\n                listeners.push.apply(listeners, _listeners);\n              } else {\n                listeners = _listeners;\n              }\n            }\n          }\n        }\n        return listeners;\n      } else if (tree[currentType]) {\n        listeners = searchListenerTree(handlers, type, tree[currentType], i + 1, typeLength);\n      }\n    }\n\n      xTree = tree['*'];\n    if (xTree) {\n      //\n      // If the listener tree will allow any match for this part,\n      // then recursively explore all branches of the tree\n      //\n      searchListenerTree(handlers, type, xTree, i + 1, typeLength);\n    }\n\n    xxTree = tree['**'];\n    if (xxTree) {\n      if (i < typeLength) {\n        if (xxTree._listeners) {\n          // If we have a listener on a '**', it will catch all, so add its handler.\n          searchListenerTree(handlers, type, xxTree, typeLength, typeLength);\n        }\n\n        // Build arrays of matching next branches and others.\n        branches= ownKeys(xxTree);\n        n= branches.length;\n        while(n-->0){\n          branch= branches[n];\n          if (branch !== '_listeners') {\n            if (branch === nextType) {\n              // We know the next element will match, so jump twice.\n              searchListenerTree(handlers, type, xxTree[branch], i + 2, typeLength);\n            } else if (branch === currentType) {\n              // Current node matches, move into the tree.\n              searchListenerTree(handlers, type, xxTree[branch], i + 1, typeLength);\n            } else {\n              isolatedBranch = {};\n              isolatedBranch[branch] = xxTree[branch];\n              searchListenerTree(handlers, type, {'**': isolatedBranch}, i + 1, typeLength);\n            }\n          }\n        }\n      } else if (xxTree._listeners) {\n        // We have reached the end and still on a '**'\n        searchListenerTree(handlers, type, xxTree, typeLength, typeLength);\n      } else if (xxTree['*'] && xxTree['*']._listeners) {\n        searchListenerTree(handlers, type, xxTree['*'], typeLength, typeLength);\n      }\n    }\n\n    return listeners;\n  }\n\n  function growListenerTree(type, listener, prepend) {\n    var len = 0, j = 0, i, delimiter = this.delimiter, dl= delimiter.length, ns;\n\n    if(typeof type==='string') {\n      if ((i = type.indexOf(delimiter)) !== -1) {\n        ns = new Array(5);\n        do {\n          ns[len++] = type.slice(j, i);\n          j = i + dl;\n        } while ((i = type.indexOf(delimiter, j)) !== -1);\n\n        ns[len++] = type.slice(j);\n      }else{\n        ns= [type];\n        len= 1;\n      }\n    }else{\n      ns= type;\n      len= type.length;\n    }\n\n    //\n    // Looks for two consecutive '**', if so, don't add the event at all.\n    //\n    if (len > 1) {\n      for (i = 0; i + 1 < len; i++) {\n        if (ns[i] === '**' && ns[i + 1] === '**') {\n          return;\n        }\n      }\n    }\n\n\n\n    var tree = this.listenerTree, name;\n\n    for (i = 0; i < len; i++) {\n      name = ns[i];\n\n      tree = tree[name] || (tree[name] = {});\n\n      if (i === len - 1) {\n        if (!tree._listeners) {\n          tree._listeners = listener;\n        } else {\n          if (typeof tree._listeners === 'function') {\n            tree._listeners = [tree._listeners];\n          }\n\n          if (prepend) {\n            tree._listeners.unshift(listener);\n          } else {\n            tree._listeners.push(listener);\n          }\n\n          if (\n              !tree._listeners.warned &&\n              this._maxListeners > 0 &&\n              tree._listeners.length > this._maxListeners\n          ) {\n            tree._listeners.warned = true;\n            logPossibleMemoryLeak.call(this, tree._listeners.length, name);\n          }\n        }\n        return true;\n      }\n    }\n\n    return true;\n  }\n\n  function collectTreeEvents(tree, events, root, asArray){\n     var branches= ownKeys(tree);\n     var i= branches.length;\n     var branch, branchName, path;\n     var hasListeners= tree['_listeners'];\n     var isArrayPath;\n\n     while(i-->0){\n         branchName= branches[i];\n\n         branch= tree[branchName];\n\n         if(branchName==='_listeners'){\n             path= root;\n         }else {\n             path = root ? root.concat(branchName) : [branchName];\n         }\n\n         isArrayPath= asArray || typeof branchName==='symbol';\n\n         hasListeners && events.push(isArrayPath? path : path.join(this.delimiter));\n\n         if(typeof branch==='object'){\n             collectTreeEvents.call(this, branch, events, path, isArrayPath);\n         }\n     }\n\n     return events;\n  }\n\n  function recursivelyGarbageCollect(root) {\n    var keys = ownKeys(root);\n    var i= keys.length;\n    var obj, key, flag;\n    while(i-->0){\n      key = keys[i];\n      obj = root[key];\n\n      if(obj){\n          flag= true;\n          if(key !== '_listeners' && !recursivelyGarbageCollect(obj)){\n             delete root[key];\n          }\n      }\n    }\n\n    return flag;\n  }\n\n  function Listener(emitter, event, listener){\n    this.emitter= emitter;\n    this.event= event;\n    this.listener= listener;\n  }\n\n  Listener.prototype.off= function(){\n    this.emitter.off(this.event, this.listener);\n    return this;\n  };\n\n  function setupListener(event, listener, options){\n      if (options === true) {\n        promisify = true;\n      } else if (options === false) {\n        async = true;\n      } else {\n        if (!options || typeof options !== 'object') {\n          throw TypeError('options should be an object or true');\n        }\n        var async = options.async;\n        var promisify = options.promisify;\n        var nextTick = options.nextTick;\n        var objectify = options.objectify;\n      }\n\n      if (async || nextTick || promisify) {\n        var _listener = listener;\n        var _origin = listener._origin || listener;\n\n        if (nextTick && !nextTickSupported) {\n          throw Error('process.nextTick is not supported');\n        }\n\n        if (promisify === undefined) {\n          promisify = listener.constructor.name === 'AsyncFunction';\n        }\n\n        listener = function () {\n          var args = arguments;\n          var context = this;\n          var event = this.event;\n\n          return promisify ? (nextTick ? Promise.resolve() : new Promise(function (resolve) {\n            _setImmediate(resolve);\n          }).then(function () {\n            context.event = event;\n            return _listener.apply(context, args)\n          })) : (nextTick ? process.nextTick : _setImmediate)(function () {\n            context.event = event;\n            _listener.apply(context, args)\n          });\n        };\n\n        listener._async = true;\n        listener._origin = _origin;\n      }\n\n    return [listener, objectify? new Listener(this, event, listener): this];\n  }\n\n  function EventEmitter(conf) {\n    this._events = {};\n    this._newListener = false;\n    this._removeListener = false;\n    this.verboseMemoryLeak = false;\n    configure.call(this, conf);\n  }\n\n  EventEmitter.EventEmitter2 = EventEmitter; // backwards compatibility for exporting EventEmitter property\n\n  EventEmitter.prototype.listenTo= function(target, events, options){\n    if(typeof target!=='object'){\n      throw TypeError('target musts be an object');\n    }\n\n    var emitter= this;\n\n    options = resolveOptions(options, {\n      on: undefined,\n      off: undefined,\n      reducers: undefined\n    }, {\n      on: functionReducer,\n      off: functionReducer,\n      reducers: objectFunctionReducer\n    });\n\n    function listen(events){\n      if(typeof events!=='object'){\n        throw TypeError('events must be an object');\n      }\n\n      var reducers= options.reducers;\n      var index= findTargetIndex.call(emitter, target);\n      var observer;\n\n      if(index===-1){\n        observer= new TargetObserver(emitter, target, options);\n      }else{\n        observer= emitter._observers[index];\n      }\n\n      var keys= ownKeys(events);\n      var len= keys.length;\n      var event;\n      var isSingleReducer= typeof reducers==='function';\n\n      for(var i=0; i<len; i++){\n        event= keys[i];\n        observer.subscribe(\n            event,\n            events[event] || event,\n            isSingleReducer ? reducers : reducers && reducers[event]\n        );\n      }\n    }\n\n    isArray(events)?\n        listen(toObject(events)) :\n        (typeof events==='string'? listen(toObject(events.split(/\\s+/))): listen(events));\n\n    return this;\n  };\n\n  EventEmitter.prototype.stopListeningTo = function (target, event) {\n    var observers = this._observers;\n\n    if(!observers){\n      return false;\n    }\n\n    var i = observers.length;\n    var observer;\n    var matched= false;\n\n    if(target && typeof target!=='object'){\n      throw TypeError('target should be an object');\n    }\n\n    while (i-- > 0) {\n      observer = observers[i];\n      if (!target || observer._target === target) {\n        observer.unsubscribe(event);\n        matched= true;\n      }\n    }\n\n    return matched;\n  };\n\n  // By default EventEmitters will print a warning if more than\n  // 10 listeners are added to it. This is a useful default which\n  // helps finding memory leaks.\n  //\n  // Obviously not all Emitters should be limited to 10. This function allows\n  // that to be increased. Set to zero for unlimited.\n\n  EventEmitter.prototype.delimiter = '.';\n\n  EventEmitter.prototype.setMaxListeners = function(n) {\n    if (n !== undefined) {\n      this._maxListeners = n;\n      if (!this._conf) this._conf = {};\n      this._conf.maxListeners = n;\n    }\n  };\n\n  EventEmitter.prototype.getMaxListeners = function() {\n    return this._maxListeners;\n  };\n\n  EventEmitter.prototype.event = '';\n\n  EventEmitter.prototype.once = function(event, fn, options) {\n    return this._once(event, fn, false, options);\n  };\n\n  EventEmitter.prototype.prependOnceListener = function(event, fn, options) {\n    return this._once(event, fn, true, options);\n  };\n\n  EventEmitter.prototype._once = function(event, fn, prepend, options) {\n    return this._many(event, 1, fn, prepend, options);\n  };\n\n  EventEmitter.prototype.many = function(event, ttl, fn, options) {\n    return this._many(event, ttl, fn, false, options);\n  };\n\n  EventEmitter.prototype.prependMany = function(event, ttl, fn, options) {\n    return this._many(event, ttl, fn, true, options);\n  };\n\n  EventEmitter.prototype._many = function(event, ttl, fn, prepend, options) {\n    var self = this;\n\n    if (typeof fn !== 'function') {\n      throw new Error('many only accepts instances of Function');\n    }\n\n    function listener() {\n      if (--ttl === 0) {\n        self.off(event, listener);\n      }\n      return fn.apply(this, arguments);\n    }\n\n    listener._origin = fn;\n\n    return this._on(event, listener, prepend, options);\n  };\n\n  EventEmitter.prototype.emit = function() {\n    if (!this._events && !this._all) {\n      return false;\n    }\n\n    this._events || init.call(this);\n\n    var type = arguments[0], ns, wildcard= this.wildcard;\n    var args,l,i,j, containsSymbol;\n\n    if (type === 'newListener' && !this._newListener) {\n      if (!this._events.newListener) {\n        return false;\n      }\n    }\n\n    if (wildcard) {\n      ns= type;\n      if(type!=='newListener' && type!=='removeListener'){\n        if (typeof type === 'object') {\n          l = type.length;\n          if (symbolsSupported) {\n            for (i = 0; i < l; i++) {\n              if (typeof type[i] === 'symbol') {\n                containsSymbol = true;\n                break;\n              }\n            }\n          }\n          if (!containsSymbol) {\n            type = type.join(this.delimiter);\n          }\n        }\n      }\n    }\n\n    var al = arguments.length;\n    var handler;\n\n    if (this._all && this._all.length) {\n      handler = this._all.slice();\n\n      for (i = 0, l = handler.length; i < l; i++) {\n        this.event = type;\n        switch (al) {\n        case 1:\n          handler[i].call(this, type);\n          break;\n        case 2:\n          handler[i].call(this, type, arguments[1]);\n          break;\n        case 3:\n          handler[i].call(this, type, arguments[1], arguments[2]);\n          break;\n        default:\n          handler[i].apply(this, arguments);\n        }\n      }\n    }\n\n    if (wildcard) {\n      handler = [];\n      searchListenerTree.call(this, handler, ns, this.listenerTree, 0, l);\n    } else {\n      handler = this._events[type];\n      if (typeof handler === 'function') {\n        this.event = type;\n        switch (al) {\n        case 1:\n          handler.call(this);\n          break;\n        case 2:\n          handler.call(this, arguments[1]);\n          break;\n        case 3:\n          handler.call(this, arguments[1], arguments[2]);\n          break;\n        default:\n          args = new Array(al - 1);\n          for (j = 1; j < al; j++) args[j - 1] = arguments[j];\n          handler.apply(this, args);\n        }\n        return true;\n      } else if (handler) {\n        // need to make copy of handlers because list can change in the middle\n        // of emit call\n        handler = handler.slice();\n      }\n    }\n\n    if (handler && handler.length) {\n      if (al > 3) {\n        args = new Array(al - 1);\n        for (j = 1; j < al; j++) args[j - 1] = arguments[j];\n      }\n      for (i = 0, l = handler.length; i < l; i++) {\n        this.event = type;\n        switch (al) {\n        case 1:\n          handler[i].call(this);\n          break;\n        case 2:\n          handler[i].call(this, arguments[1]);\n          break;\n        case 3:\n          handler[i].call(this, arguments[1], arguments[2]);\n          break;\n        default:\n          handler[i].apply(this, args);\n        }\n      }\n      return true;\n    } else if (!this.ignoreErrors && !this._all && type === 'error') {\n      if (arguments[1] instanceof Error) {\n        throw arguments[1]; // Unhandled 'error' event\n      } else {\n        throw new Error(\"Uncaught, unspecified 'error' event.\");\n      }\n    }\n\n    return !!this._all;\n  };\n\n  EventEmitter.prototype.emitAsync = function() {\n    if (!this._events && !this._all) {\n      return false;\n    }\n\n    this._events || init.call(this);\n\n    var type = arguments[0], wildcard= this.wildcard, ns, containsSymbol;\n    var args,l,i,j;\n\n    if (type === 'newListener' && !this._newListener) {\n        if (!this._events.newListener) { return Promise.resolve([false]); }\n    }\n\n    if (wildcard) {\n      ns= type;\n      if(type!=='newListener' && type!=='removeListener'){\n        if (typeof type === 'object') {\n          l = type.length;\n          if (symbolsSupported) {\n            for (i = 0; i < l; i++) {\n              if (typeof type[i] === 'symbol') {\n                containsSymbol = true;\n                break;\n              }\n            }\n          }\n          if (!containsSymbol) {\n            type = type.join(this.delimiter);\n          }\n        }\n      }\n    }\n\n    var promises= [];\n\n    var al = arguments.length;\n    var handler;\n\n    if (this._all) {\n      for (i = 0, l = this._all.length; i < l; i++) {\n        this.event = type;\n        switch (al) {\n        case 1:\n          promises.push(this._all[i].call(this, type));\n          break;\n        case 2:\n          promises.push(this._all[i].call(this, type, arguments[1]));\n          break;\n        case 3:\n          promises.push(this._all[i].call(this, type, arguments[1], arguments[2]));\n          break;\n        default:\n          promises.push(this._all[i].apply(this, arguments));\n        }\n      }\n    }\n\n    if (wildcard) {\n      handler = [];\n      searchListenerTree.call(this, handler, ns, this.listenerTree, 0);\n    } else {\n      handler = this._events[type];\n    }\n\n    if (typeof handler === 'function') {\n      this.event = type;\n      switch (al) {\n      case 1:\n        promises.push(handler.call(this));\n        break;\n      case 2:\n        promises.push(handler.call(this, arguments[1]));\n        break;\n      case 3:\n        promises.push(handler.call(this, arguments[1], arguments[2]));\n        break;\n      default:\n        args = new Array(al - 1);\n        for (j = 1; j < al; j++) args[j - 1] = arguments[j];\n        promises.push(handler.apply(this, args));\n      }\n    } else if (handler && handler.length) {\n      handler = handler.slice();\n      if (al > 3) {\n        args = new Array(al - 1);\n        for (j = 1; j < al; j++) args[j - 1] = arguments[j];\n      }\n      for (i = 0, l = handler.length; i < l; i++) {\n        this.event = type;\n        switch (al) {\n        case 1:\n          promises.push(handler[i].call(this));\n          break;\n        case 2:\n          promises.push(handler[i].call(this, arguments[1]));\n          break;\n        case 3:\n          promises.push(handler[i].call(this, arguments[1], arguments[2]));\n          break;\n        default:\n          promises.push(handler[i].apply(this, args));\n        }\n      }\n    } else if (!this.ignoreErrors && !this._all && type === 'error') {\n      if (arguments[1] instanceof Error) {\n        return Promise.reject(arguments[1]); // Unhandled 'error' event\n      } else {\n        return Promise.reject(\"Uncaught, unspecified 'error' event.\");\n      }\n    }\n\n    return Promise.all(promises);\n  };\n\n  EventEmitter.prototype.on = function(type, listener, options) {\n    return this._on(type, listener, false, options);\n  };\n\n  EventEmitter.prototype.prependListener = function(type, listener, options) {\n    return this._on(type, listener, true, options);\n  };\n\n  EventEmitter.prototype.onAny = function(fn) {\n    return this._onAny(fn, false);\n  };\n\n  EventEmitter.prototype.prependAny = function(fn) {\n    return this._onAny(fn, true);\n  };\n\n  EventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n  EventEmitter.prototype._onAny = function(fn, prepend){\n    if (typeof fn !== 'function') {\n      throw new Error('onAny only accepts instances of Function');\n    }\n\n    if (!this._all) {\n      this._all = [];\n    }\n\n    // Add the function to the event listener collection.\n    if(prepend){\n      this._all.unshift(fn);\n    }else{\n      this._all.push(fn);\n    }\n\n    return this;\n  };\n\n  EventEmitter.prototype._on = function(type, listener, prepend, options) {\n    if (typeof type === 'function') {\n      this._onAny(type, listener);\n      return this;\n    }\n\n    if (typeof listener !== 'function') {\n      throw new Error('on only accepts instances of Function');\n    }\n    this._events || init.call(this);\n\n    var returnValue= this, temp;\n\n    if (options !== undefined) {\n      temp = setupListener.call(this, type, listener, options);\n      listener = temp[0];\n      returnValue = temp[1];\n    }\n\n    // To avoid recursion in the case that type == \"newListeners\"! Before\n    // adding it to the listeners, first emit \"newListeners\".\n    if (this._newListener) {\n      this.emit('newListener', type, listener);\n    }\n\n    if (this.wildcard) {\n      growListenerTree.call(this, type, listener, prepend);\n      return returnValue;\n    }\n\n    if (!this._events[type]) {\n      // Optimize the case of one listener. Don't need the extra array object.\n      this._events[type] = listener;\n    } else {\n      if (typeof this._events[type] === 'function') {\n        // Change to array.\n        this._events[type] = [this._events[type]];\n      }\n\n      // If we've already got an array, just add\n      if(prepend){\n        this._events[type].unshift(listener);\n      }else{\n        this._events[type].push(listener);\n      }\n\n      // Check for listener leak\n      if (\n        !this._events[type].warned &&\n        this._maxListeners > 0 &&\n        this._events[type].length > this._maxListeners\n      ) {\n        this._events[type].warned = true;\n        logPossibleMemoryLeak.call(this, this._events[type].length, type);\n      }\n    }\n\n    return returnValue;\n  };\n\n  EventEmitter.prototype.off = function(type, listener) {\n    if (typeof listener !== 'function') {\n      throw new Error('removeListener only takes instances of Function');\n    }\n\n    var handlers,leafs=[];\n\n    if(this.wildcard) {\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\n      leafs = searchListenerTree.call(this, null, ns, this.listenerTree, 0);\n      if(!leafs) return this;\n    } else {\n      // does not use listeners(), so no side effect of creating _events[type]\n      if (!this._events[type]) return this;\n      handlers = this._events[type];\n      leafs.push({_listeners:handlers});\n    }\n\n    for (var iLeaf=0; iLeaf<leafs.length; iLeaf++) {\n      var leaf = leafs[iLeaf];\n      handlers = leaf._listeners;\n      if (isArray(handlers)) {\n\n        var position = -1;\n\n        for (var i = 0, length = handlers.length; i < length; i++) {\n          if (handlers[i] === listener ||\n            (handlers[i].listener && handlers[i].listener === listener) ||\n            (handlers[i]._origin && handlers[i]._origin === listener)) {\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0) {\n          continue;\n        }\n\n        if(this.wildcard) {\n          leaf._listeners.splice(position, 1);\n        }\n        else {\n          this._events[type].splice(position, 1);\n        }\n\n        if (handlers.length === 0) {\n          if(this.wildcard) {\n            delete leaf._listeners;\n          }\n          else {\n            delete this._events[type];\n          }\n        }\n        if (this._removeListener)\n          this.emit(\"removeListener\", type, listener);\n\n        return this;\n      }\n      else if (handlers === listener ||\n        (handlers.listener && handlers.listener === listener) ||\n        (handlers._origin && handlers._origin === listener)) {\n        if(this.wildcard) {\n          delete leaf._listeners;\n        }\n        else {\n          delete this._events[type];\n        }\n        if (this._removeListener)\n          this.emit(\"removeListener\", type, listener);\n      }\n    }\n\n    this.listenerTree && recursivelyGarbageCollect(this.listenerTree);\n\n    return this;\n  };\n\n  EventEmitter.prototype.offAny = function(fn) {\n    var i = 0, l = 0, fns;\n    if (fn && this._all && this._all.length > 0) {\n      fns = this._all;\n      for(i = 0, l = fns.length; i < l; i++) {\n        if(fn === fns[i]) {\n          fns.splice(i, 1);\n          if (this._removeListener)\n            this.emit(\"removeListenerAny\", fn);\n          return this;\n        }\n      }\n    } else {\n      fns = this._all;\n      if (this._removeListener) {\n        for(i = 0, l = fns.length; i < l; i++)\n          this.emit(\"removeListenerAny\", fns[i]);\n      }\n      this._all = [];\n    }\n    return this;\n  };\n\n  EventEmitter.prototype.removeListener = EventEmitter.prototype.off;\n\n  EventEmitter.prototype.removeAllListeners = function (type) {\n    if (type === undefined) {\n      !this._events || init.call(this);\n      return this;\n    }\n\n    if (this.wildcard) {\n      var leafs = searchListenerTree.call(this, null, type, this.listenerTree, 0), leaf, i;\n      if (!leafs) return this;\n      for (i = 0; i < leafs.length; i++) {\n        leaf = leafs[i];\n        leaf._listeners = null;\n      }\n      this.listenerTree && recursivelyGarbageCollect(this.listenerTree);\n    } else if (this._events) {\n      this._events[type] = null;\n    }\n    return this;\n  };\n\n  EventEmitter.prototype.listeners = function (type) {\n    var _events = this._events;\n    var keys, listeners, allListeners;\n    var i;\n    var listenerTree;\n\n    if (type === undefined) {\n      if (this.wildcard) {\n        throw Error('event name required for wildcard emitter');\n      }\n\n      if (!_events) {\n        return [];\n      }\n\n      keys = ownKeys(_events);\n      i = keys.length;\n      allListeners = [];\n      while (i-- > 0) {\n        listeners = _events[keys[i]];\n        if (typeof listeners === 'function') {\n          allListeners.push(listeners);\n        } else {\n          allListeners.push.apply(allListeners, listeners);\n        }\n      }\n      return allListeners;\n    } else {\n      if (this.wildcard) {\n        listenerTree= this.listenerTree;\n        if(!listenerTree) return [];\n        var handlers = [];\n        var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\n        searchListenerTree.call(this, handlers, ns, listenerTree, 0);\n        return handlers;\n      }\n\n      if (!_events) {\n        return [];\n      }\n\n      listeners = _events[type];\n\n      if (!listeners) {\n        return [];\n      }\n      return typeof listeners === 'function' ? [listeners] : listeners;\n    }\n  };\n\n  EventEmitter.prototype.eventNames = function(nsAsArray){\n    var _events= this._events;\n    return this.wildcard? collectTreeEvents.call(this, this.listenerTree, [], null, nsAsArray) : (_events? ownKeys(_events) : []);\n  };\n\n  EventEmitter.prototype.listenerCount = function(type) {\n    return this.listeners(type).length;\n  };\n\n  EventEmitter.prototype.hasListeners = function (type) {\n    if (this.wildcard) {\n      var handlers = [];\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\n      searchListenerTree.call(this, handlers, ns, this.listenerTree, 0);\n      return handlers.length > 0;\n    }\n\n    var _events = this._events;\n    var _all = this._all;\n\n    return !!(_all && _all.length || _events && (type === undefined ? ownKeys(_events).length : _events[type]));\n  };\n\n  EventEmitter.prototype.listenersAny = function() {\n\n    if(this._all) {\n      return this._all;\n    }\n    else {\n      return [];\n    }\n\n  };\n\n  EventEmitter.prototype.waitFor = function (event, options) {\n    var self = this;\n    var type = typeof options;\n    if (type === 'number') {\n      options = {timeout: options};\n    } else if (type === 'function') {\n      options = {filter: options};\n    }\n\n    options= resolveOptions(options, {\n      timeout: 0,\n      filter: undefined,\n      handleError: false,\n      Promise: Promise,\n      overload: false\n    }, {\n      filter: functionReducer,\n      Promise: constructorReducer\n    });\n\n    return makeCancelablePromise(options.Promise, function (resolve, reject, onCancel) {\n      function listener() {\n        var filter= options.filter;\n        if (filter && !filter.apply(self, arguments)) {\n          return;\n        }\n        self.off(event, listener);\n        if (options.handleError) {\n          var err = arguments[0];\n          err ? reject(err) : resolve(toArray.apply(null, arguments).slice(1));\n        } else {\n          resolve(toArray.apply(null, arguments));\n        }\n      }\n\n      onCancel(function(){\n        self.off(event, listener);\n      });\n\n      self._on(event, listener, false);\n    }, {\n      timeout: options.timeout,\n      overload: options.overload\n    })\n  };\n\n  function once(emitter, name, options) {\n    options= resolveOptions(options, {\n      Promise: Promise,\n      timeout: 0,\n      overload: false\n    }, {\n      Promise: constructorReducer\n    });\n\n    var _Promise= options.Promise;\n\n    return makeCancelablePromise(_Promise, function(resolve, reject, onCancel){\n      var handler;\n      if (typeof emitter.addEventListener === 'function') {\n        handler=  function () {\n          resolve(toArray.apply(null, arguments));\n        };\n\n        onCancel(function(){\n          emitter.removeEventListener(name, handler);\n        });\n\n        emitter.addEventListener(\n            name,\n            handler,\n            {once: true}\n        );\n        return;\n      }\n\n      var eventListener = function(){\n        errorListener && emitter.removeListener('error', errorListener);\n        resolve(toArray.apply(null, arguments));\n      };\n\n      var errorListener;\n\n      if (name !== 'error') {\n        errorListener = function (err){\n          emitter.removeListener(name, eventListener);\n          reject(err);\n        };\n\n        emitter.once('error', errorListener);\n      }\n\n      onCancel(function(){\n        errorListener && emitter.removeListener('error', errorListener);\n        emitter.removeListener(name, eventListener);\n      });\n\n      emitter.once(name, eventListener);\n    }, {\n      timeout: options.timeout,\n      overload: options.overload\n    });\n  }\n\n  var prototype= EventEmitter.prototype;\n\n  Object.defineProperties(EventEmitter, {\n    defaultMaxListeners: {\n      get: function () {\n        return prototype._maxListeners;\n      },\n      set: function (n) {\n        if (typeof n !== 'number' || n < 0 || Number.isNaN(n)) {\n          throw TypeError('n must be a non-negative number')\n        }\n        prototype._maxListeners = n;\n      },\n      enumerable: true\n    },\n    once: {\n      value: once,\n      writable: true,\n      configurable: true\n    }\n  });\n\n  Object.defineProperties(prototype, {\n      _maxListeners: {\n          value: defaultMaxListeners,\n          writable: true,\n          configurable: true\n      },\n      _observers: {value: null, writable: true, configurable: true}\n  });\n\n  if (true) {\n     // AMD. Register as an anonymous module.\n    !(__WEBPACK_AMD_DEFINE_RESULT__ = (function() {\n      return EventEmitter;\n    }).call(exports, __webpack_require__, exports, module),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else { var _global; }\n}();\n\n\n//# sourceURL=webpack://100-ms-demo/./node_modules/eventemitter2/lib/eventemitter2.js?");

/***/ }),

/***/ "./node_modules/reselect/es/index.js":
/*!*******************************************!*\
  !*** ./node_modules/reselect/es/index.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createSelector\": () => (/* binding */ createSelector),\n/* harmony export */   \"createSelectorCreator\": () => (/* binding */ createSelectorCreator),\n/* harmony export */   \"createStructuredSelector\": () => (/* binding */ createStructuredSelector),\n/* harmony export */   \"defaultMemoize\": () => (/* binding */ defaultMemoize)\n/* harmony export */ });\nfunction defaultEqualityCheck(a, b) {\n  return a === b;\n}\n\nfunction areArgumentsShallowlyEqual(equalityCheck, prev, next) {\n  if (prev === null || next === null || prev.length !== next.length) {\n    return false;\n  }\n\n  // Do this in a for loop (and not a `forEach` or an `every`) so we can determine equality as fast as possible.\n  var length = prev.length;\n  for (var i = 0; i < length; i++) {\n    if (!equalityCheck(prev[i], next[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction defaultMemoize(func) {\n  var equalityCheck = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultEqualityCheck;\n\n  var lastArgs = null;\n  var lastResult = null;\n  // we reference arguments instead of spreading them for performance reasons\n  return function () {\n    if (!areArgumentsShallowlyEqual(equalityCheck, lastArgs, arguments)) {\n      // apply arguments instead of spreading for performance.\n      lastResult = func.apply(null, arguments);\n    }\n\n    lastArgs = arguments;\n    return lastResult;\n  };\n}\n\nfunction getDependencies(funcs) {\n  var dependencies = Array.isArray(funcs[0]) ? funcs[0] : funcs;\n\n  if (!dependencies.every(function (dep) {\n    return typeof dep === 'function';\n  })) {\n    var dependencyTypes = dependencies.map(function (dep) {\n      return typeof dep;\n    }).join(', ');\n    throw new Error('Selector creators expect all input-selectors to be functions, ' + ('instead received the following types: [' + dependencyTypes + ']'));\n  }\n\n  return dependencies;\n}\n\nfunction createSelectorCreator(memoize) {\n  for (var _len = arguments.length, memoizeOptions = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    memoizeOptions[_key - 1] = arguments[_key];\n  }\n\n  return function () {\n    for (var _len2 = arguments.length, funcs = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      funcs[_key2] = arguments[_key2];\n    }\n\n    var recomputations = 0;\n    var resultFunc = funcs.pop();\n    var dependencies = getDependencies(funcs);\n\n    var memoizedResultFunc = memoize.apply(undefined, [function () {\n      recomputations++;\n      // apply arguments instead of spreading for performance.\n      return resultFunc.apply(null, arguments);\n    }].concat(memoizeOptions));\n\n    // If a selector is called with the exact same arguments we don't need to traverse our dependencies again.\n    var selector = memoize(function () {\n      var params = [];\n      var length = dependencies.length;\n\n      for (var i = 0; i < length; i++) {\n        // apply arguments instead of spreading and mutate a local list of params for performance.\n        params.push(dependencies[i].apply(null, arguments));\n      }\n\n      // apply arguments instead of spreading for performance.\n      return memoizedResultFunc.apply(null, params);\n    });\n\n    selector.resultFunc = resultFunc;\n    selector.dependencies = dependencies;\n    selector.recomputations = function () {\n      return recomputations;\n    };\n    selector.resetRecomputations = function () {\n      return recomputations = 0;\n    };\n    return selector;\n  };\n}\n\nvar createSelector = createSelectorCreator(defaultMemoize);\n\nfunction createStructuredSelector(selectors) {\n  var selectorCreator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : createSelector;\n\n  if (typeof selectors !== 'object') {\n    throw new Error('createStructuredSelector expects first argument to be an object ' + ('where each property is a selector, instead received a ' + typeof selectors));\n  }\n  var objectKeys = Object.keys(selectors);\n  return selectorCreator(objectKeys.map(function (key) {\n    return selectors[key];\n  }), function () {\n    for (var _len3 = arguments.length, values = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      values[_key3] = arguments[_key3];\n    }\n\n    return values.reduce(function (composition, value, index) {\n      composition[objectKeys[index]] = value;\n      return composition;\n    }, {});\n  });\n}\n\n//# sourceURL=webpack://100-ms-demo/./node_modules/reselect/es/index.js?");

/***/ }),

/***/ "./node_modules/sdp-transform/lib/grammar.js":
/*!***************************************************!*\
  !*** ./node_modules/sdp-transform/lib/grammar.js ***!
  \***************************************************/
/***/ ((module) => {

eval("var grammar = module.exports = {\n  v: [{\n    name: 'version',\n    reg: /^(\\d*)$/\n  }],\n  o: [{\n    // o=- 20518 0 IN IP4 203.0.113.1\n    // NB: sessionId will be a String in most cases because it is huge\n    name: 'origin',\n    reg: /^(\\S*) (\\d*) (\\d*) (\\S*) IP(\\d) (\\S*)/,\n    names: ['username', 'sessionId', 'sessionVersion', 'netType', 'ipVer', 'address'],\n    format: '%s %s %d %s IP%d %s'\n  }],\n  // default parsing of these only (though some of these feel outdated)\n  s: [{ name: 'name' }],\n  i: [{ name: 'description' }],\n  u: [{ name: 'uri' }],\n  e: [{ name: 'email' }],\n  p: [{ name: 'phone' }],\n  z: [{ name: 'timezones' }], // TODO: this one can actually be parsed properly...\n  r: [{ name: 'repeats' }],   // TODO: this one can also be parsed properly\n  // k: [{}], // outdated thing ignored\n  t: [{\n    // t=0 0\n    name: 'timing',\n    reg: /^(\\d*) (\\d*)/,\n    names: ['start', 'stop'],\n    format: '%d %d'\n  }],\n  c: [{\n    // c=IN IP4 10.47.197.26\n    name: 'connection',\n    reg: /^IN IP(\\d) (\\S*)/,\n    names: ['version', 'ip'],\n    format: 'IN IP%d %s'\n  }],\n  b: [{\n    // b=AS:4000\n    push: 'bandwidth',\n    reg: /^(TIAS|AS|CT|RR|RS):(\\d*)/,\n    names: ['type', 'limit'],\n    format: '%s:%s'\n  }],\n  m: [{\n    // m=video 51744 RTP/AVP 126 97 98 34 31\n    // NB: special - pushes to session\n    // TODO: rtp/fmtp should be filtered by the payloads found here?\n    reg: /^(\\w*) (\\d*) ([\\w/]*)(?: (.*))?/,\n    names: ['type', 'port', 'protocol', 'payloads'],\n    format: '%s %d %s %s'\n  }],\n  a: [\n    {\n      // a=rtpmap:110 opus/48000/2\n      push: 'rtp',\n      reg: /^rtpmap:(\\d*) ([\\w\\-.]*)(?:\\s*\\/(\\d*)(?:\\s*\\/(\\S*))?)?/,\n      names: ['payload', 'codec', 'rate', 'encoding'],\n      format: function (o) {\n        return (o.encoding)\n          ? 'rtpmap:%d %s/%s/%s'\n          : o.rate\n            ? 'rtpmap:%d %s/%s'\n            : 'rtpmap:%d %s';\n      }\n    },\n    {\n      // a=fmtp:108 profile-level-id=24;object=23;bitrate=64000\n      // a=fmtp:111 minptime=10; useinbandfec=1\n      push: 'fmtp',\n      reg: /^fmtp:(\\d*) ([\\S| ]*)/,\n      names: ['payload', 'config'],\n      format: 'fmtp:%d %s'\n    },\n    {\n      // a=control:streamid=0\n      name: 'control',\n      reg: /^control:(.*)/,\n      format: 'control:%s'\n    },\n    {\n      // a=rtcp:65179 IN IP4 193.84.77.194\n      name: 'rtcp',\n      reg: /^rtcp:(\\d*)(?: (\\S*) IP(\\d) (\\S*))?/,\n      names: ['port', 'netType', 'ipVer', 'address'],\n      format: function (o) {\n        return (o.address != null)\n          ? 'rtcp:%d %s IP%d %s'\n          : 'rtcp:%d';\n      }\n    },\n    {\n      // a=rtcp-fb:98 trr-int 100\n      push: 'rtcpFbTrrInt',\n      reg: /^rtcp-fb:(\\*|\\d*) trr-int (\\d*)/,\n      names: ['payload', 'value'],\n      format: 'rtcp-fb:%s trr-int %d'\n    },\n    {\n      // a=rtcp-fb:98 nack rpsi\n      push: 'rtcpFb',\n      reg: /^rtcp-fb:(\\*|\\d*) ([\\w-_]*)(?: ([\\w-_]*))?/,\n      names: ['payload', 'type', 'subtype'],\n      format: function (o) {\n        return (o.subtype != null)\n          ? 'rtcp-fb:%s %s %s'\n          : 'rtcp-fb:%s %s';\n      }\n    },\n    {\n      // a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n      // a=extmap:1/recvonly URI-gps-string\n      // a=extmap:3 urn:ietf:params:rtp-hdrext:encrypt urn:ietf:params:rtp-hdrext:smpte-tc 25@600/24\n      push: 'ext',\n      reg: /^extmap:(\\d+)(?:\\/(\\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\\S*)(?: (\\S*))?/,\n      names: ['value', 'direction', 'encrypt-uri', 'uri', 'config'],\n      format: function (o) {\n        return (\n          'extmap:%d' +\n          (o.direction ? '/%s' : '%v') +\n          (o['encrypt-uri'] ? ' %s' : '%v') +\n          ' %s' +\n          (o.config ? ' %s' : '')\n        );\n      }\n    },\n    {\n      // a=extmap-allow-mixed\n      name: 'extmapAllowMixed',\n      reg: /^(extmap-allow-mixed)/\n    },\n    {\n      // a=crypto:1 AES_CM_128_HMAC_SHA1_80 inline:PS1uQCVeeCFCanVmcjkpPywjNWhcYD0mXXtxaVBR|2^20|1:32\n      push: 'crypto',\n      reg: /^crypto:(\\d*) ([\\w_]*) (\\S*)(?: (\\S*))?/,\n      names: ['id', 'suite', 'config', 'sessionConfig'],\n      format: function (o) {\n        return (o.sessionConfig != null)\n          ? 'crypto:%d %s %s %s'\n          : 'crypto:%d %s %s';\n      }\n    },\n    {\n      // a=setup:actpass\n      name: 'setup',\n      reg: /^setup:(\\w*)/,\n      format: 'setup:%s'\n    },\n    {\n      // a=connection:new\n      name: 'connectionType',\n      reg: /^connection:(new|existing)/,\n      format: 'connection:%s'\n    },\n    {\n      // a=mid:1\n      name: 'mid',\n      reg: /^mid:([^\\s]*)/,\n      format: 'mid:%s'\n    },\n    {\n      // a=msid:0c8b064d-d807-43b4-b434-f92a889d8587 98178685-d409-46e0-8e16-7ef0db0db64a\n      name: 'msid',\n      reg: /^msid:(.*)/,\n      format: 'msid:%s'\n    },\n    {\n      // a=ptime:20\n      name: 'ptime',\n      reg: /^ptime:(\\d*(?:\\.\\d*)*)/,\n      format: 'ptime:%d'\n    },\n    {\n      // a=maxptime:60\n      name: 'maxptime',\n      reg: /^maxptime:(\\d*(?:\\.\\d*)*)/,\n      format: 'maxptime:%d'\n    },\n    {\n      // a=sendrecv\n      name: 'direction',\n      reg: /^(sendrecv|recvonly|sendonly|inactive)/\n    },\n    {\n      // a=ice-lite\n      name: 'icelite',\n      reg: /^(ice-lite)/\n    },\n    {\n      // a=ice-ufrag:F7gI\n      name: 'iceUfrag',\n      reg: /^ice-ufrag:(\\S*)/,\n      format: 'ice-ufrag:%s'\n    },\n    {\n      // a=ice-pwd:x9cml/YzichV2+XlhiMu8g\n      name: 'icePwd',\n      reg: /^ice-pwd:(\\S*)/,\n      format: 'ice-pwd:%s'\n    },\n    {\n      // a=fingerprint:SHA-1 00:11:22:33:44:55:66:77:88:99:AA:BB:CC:DD:EE:FF:00:11:22:33\n      name: 'fingerprint',\n      reg: /^fingerprint:(\\S*) (\\S*)/,\n      names: ['type', 'hash'],\n      format: 'fingerprint:%s %s'\n    },\n    {\n      // a=candidate:0 1 UDP 2113667327 203.0.113.1 54400 typ host\n      // a=candidate:1162875081 1 udp 2113937151 192.168.34.75 60017 typ host generation 0 network-id 3 network-cost 10\n      // a=candidate:3289912957 2 udp 1845501695 193.84.77.194 60017 typ srflx raddr 192.168.34.75 rport 60017 generation 0 network-id 3 network-cost 10\n      // a=candidate:229815620 1 tcp 1518280447 192.168.150.19 60017 typ host tcptype active generation 0 network-id 3 network-cost 10\n      // a=candidate:3289912957 2 tcp 1845501695 193.84.77.194 60017 typ srflx raddr 192.168.34.75 rport 60017 tcptype passive generation 0 network-id 3 network-cost 10\n      push:'candidates',\n      reg: /^candidate:(\\S*) (\\d*) (\\S*) (\\d*) (\\S*) (\\d*) typ (\\S*)(?: raddr (\\S*) rport (\\d*))?(?: tcptype (\\S*))?(?: generation (\\d*))?(?: network-id (\\d*))?(?: network-cost (\\d*))?/,\n      names: ['foundation', 'component', 'transport', 'priority', 'ip', 'port', 'type', 'raddr', 'rport', 'tcptype', 'generation', 'network-id', 'network-cost'],\n      format: function (o) {\n        var str = 'candidate:%s %d %s %d %s %d typ %s';\n\n        str += (o.raddr != null) ? ' raddr %s rport %d' : '%v%v';\n\n        // NB: candidate has three optional chunks, so %void middles one if it's missing\n        str += (o.tcptype != null) ? ' tcptype %s' : '%v';\n\n        if (o.generation != null) {\n          str += ' generation %d';\n        }\n\n        str += (o['network-id'] != null) ? ' network-id %d' : '%v';\n        str += (o['network-cost'] != null) ? ' network-cost %d' : '%v';\n        return str;\n      }\n    },\n    {\n      // a=end-of-candidates (keep after the candidates line for readability)\n      name: 'endOfCandidates',\n      reg: /^(end-of-candidates)/\n    },\n    {\n      // a=remote-candidates:1 203.0.113.1 54400 2 203.0.113.1 54401 ...\n      name: 'remoteCandidates',\n      reg: /^remote-candidates:(.*)/,\n      format: 'remote-candidates:%s'\n    },\n    {\n      // a=ice-options:google-ice\n      name: 'iceOptions',\n      reg: /^ice-options:(\\S*)/,\n      format: 'ice-options:%s'\n    },\n    {\n      // a=ssrc:2566107569 cname:t9YU8M1UxTF8Y1A1\n      push: 'ssrcs',\n      reg: /^ssrc:(\\d*) ([\\w_-]*)(?::(.*))?/,\n      names: ['id', 'attribute', 'value'],\n      format: function (o) {\n        var str = 'ssrc:%d';\n        if (o.attribute != null) {\n          str += ' %s';\n          if (o.value != null) {\n            str += ':%s';\n          }\n        }\n        return str;\n      }\n    },\n    {\n      // a=ssrc-group:FEC 1 2\n      // a=ssrc-group:FEC-FR 3004364195 1080772241\n      push: 'ssrcGroups',\n      // token-char = %x21 / %x23-27 / %x2A-2B / %x2D-2E / %x30-39 / %x41-5A / %x5E-7E\n      reg: /^ssrc-group:([\\x21\\x23\\x24\\x25\\x26\\x27\\x2A\\x2B\\x2D\\x2E\\w]*) (.*)/,\n      names: ['semantics', 'ssrcs'],\n      format: 'ssrc-group:%s %s'\n    },\n    {\n      // a=msid-semantic: WMS Jvlam5X3SX1OP6pn20zWogvaKJz5Hjf9OnlV\n      name: 'msidSemantic',\n      reg: /^msid-semantic:\\s?(\\w*) (\\S*)/,\n      names: ['semantic', 'token'],\n      format: 'msid-semantic: %s %s' // space after ':' is not accidental\n    },\n    {\n      // a=group:BUNDLE audio video\n      push: 'groups',\n      reg: /^group:(\\w*) (.*)/,\n      names: ['type', 'mids'],\n      format: 'group:%s %s'\n    },\n    {\n      // a=rtcp-mux\n      name: 'rtcpMux',\n      reg: /^(rtcp-mux)/\n    },\n    {\n      // a=rtcp-rsize\n      name: 'rtcpRsize',\n      reg: /^(rtcp-rsize)/\n    },\n    {\n      // a=sctpmap:5000 webrtc-datachannel 1024\n      name: 'sctpmap',\n      reg: /^sctpmap:([\\w_/]*) (\\S*)(?: (\\S*))?/,\n      names: ['sctpmapNumber', 'app', 'maxMessageSize'],\n      format: function (o) {\n        return (o.maxMessageSize != null)\n          ? 'sctpmap:%s %s %s'\n          : 'sctpmap:%s %s';\n      }\n    },\n    {\n      // a=x-google-flag:conference\n      name: 'xGoogleFlag',\n      reg: /^x-google-flag:([^\\s]*)/,\n      format: 'x-google-flag:%s'\n    },\n    {\n      // a=rid:1 send max-width=1280;max-height=720;max-fps=30;depend=0\n      push: 'rids',\n      reg: /^rid:([\\d\\w]+) (\\w+)(?: ([\\S| ]*))?/,\n      names: ['id', 'direction', 'params'],\n      format: function (o) {\n        return (o.params) ? 'rid:%s %s %s' : 'rid:%s %s';\n      }\n    },\n    {\n      // a=imageattr:97 send [x=800,y=640,sar=1.1,q=0.6] [x=480,y=320] recv [x=330,y=250]\n      // a=imageattr:* send [x=800,y=640] recv *\n      // a=imageattr:100 recv [x=320,y=240]\n      push: 'imageattrs',\n      reg: new RegExp(\n        // a=imageattr:97\n        '^imageattr:(\\\\d+|\\\\*)' +\n        // send [x=800,y=640,sar=1.1,q=0.6] [x=480,y=320]\n        '[\\\\s\\\\t]+(send|recv)[\\\\s\\\\t]+(\\\\*|\\\\[\\\\S+\\\\](?:[\\\\s\\\\t]+\\\\[\\\\S+\\\\])*)' +\n        // recv [x=330,y=250]\n        '(?:[\\\\s\\\\t]+(recv|send)[\\\\s\\\\t]+(\\\\*|\\\\[\\\\S+\\\\](?:[\\\\s\\\\t]+\\\\[\\\\S+\\\\])*))?'\n      ),\n      names: ['pt', 'dir1', 'attrs1', 'dir2', 'attrs2'],\n      format: function (o) {\n        return 'imageattr:%s %s %s' + (o.dir2 ? ' %s %s' : '');\n      }\n    },\n    {\n      // a=simulcast:send 1,2,3;~4,~5 recv 6;~7,~8\n      // a=simulcast:recv 1;4,5 send 6;7\n      name: 'simulcast',\n      reg: new RegExp(\n        // a=simulcast:\n        '^simulcast:' +\n        // send 1,2,3;~4,~5\n        '(send|recv) ([a-zA-Z0-9\\\\-_~;,]+)' +\n        // space + recv 6;~7,~8\n        '(?:\\\\s?(send|recv) ([a-zA-Z0-9\\\\-_~;,]+))?' +\n        // end\n        '$'\n      ),\n      names: ['dir1', 'list1', 'dir2', 'list2'],\n      format: function (o) {\n        return 'simulcast:%s %s' + (o.dir2 ? ' %s %s' : '');\n      }\n    },\n    {\n      // old simulcast draft 03 (implemented by Firefox)\n      //   https://tools.ietf.org/html/draft-ietf-mmusic-sdp-simulcast-03\n      // a=simulcast: recv pt=97;98 send pt=97\n      // a=simulcast: send rid=5;6;7 paused=6,7\n      name: 'simulcast_03',\n      reg: /^simulcast:[\\s\\t]+([\\S+\\s\\t]+)$/,\n      names: ['value'],\n      format: 'simulcast: %s'\n    },\n    {\n      // a=framerate:25\n      // a=framerate:29.97\n      name: 'framerate',\n      reg: /^framerate:(\\d+(?:$|\\.\\d+))/,\n      format: 'framerate:%s'\n    },\n    {\n      // RFC4570\n      // a=source-filter: incl IN IP4 239.5.2.31 10.1.15.5\n      name: 'sourceFilter',\n      reg: /^source-filter: *(excl|incl) (\\S*) (IP4|IP6|\\*) (\\S*) (.*)/,\n      names: ['filterMode', 'netType', 'addressTypes', 'destAddress', 'srcList'],\n      format: 'source-filter: %s %s %s %s %s'\n    },\n    {\n      // a=bundle-only\n      name: 'bundleOnly',\n      reg: /^(bundle-only)/\n    },\n    {\n      // a=label:1\n      name: 'label',\n      reg: /^label:(.+)/,\n      format: 'label:%s'\n    },\n    {\n      // RFC version 26 for SCTP over DTLS\n      // https://tools.ietf.org/html/draft-ietf-mmusic-sctp-sdp-26#section-5\n      name: 'sctpPort',\n      reg: /^sctp-port:(\\d+)$/,\n      format: 'sctp-port:%s'\n    },\n    {\n      // RFC version 26 for SCTP over DTLS\n      // https://tools.ietf.org/html/draft-ietf-mmusic-sctp-sdp-26#section-6\n      name: 'maxMessageSize',\n      reg: /^max-message-size:(\\d+)$/,\n      format: 'max-message-size:%s'\n    },\n    {\n      // RFC7273\n      // a=ts-refclk:ptp=IEEE1588-2008:39-A7-94-FF-FE-07-CB-D0:37\n      push:'tsRefClocks',\n      reg: /^ts-refclk:([^\\s=]*)(?:=(\\S*))?/,\n      names: ['clksrc', 'clksrcExt'],\n      format: function (o) {\n        return 'ts-refclk:%s' + (o.clksrcExt != null ? '=%s' : '');\n      }\n    },\n    {\n      // RFC7273\n      // a=mediaclk:direct=963214424\n      name:'mediaClk',\n      reg: /^mediaclk:(?:id=(\\S*))? *([^\\s=]*)(?:=(\\S*))?(?: *rate=(\\d+)\\/(\\d+))?/,\n      names: ['id', 'mediaClockName', 'mediaClockValue', 'rateNumerator', 'rateDenominator'],\n      format: function (o) {\n        var str = 'mediaclk:';\n        str += (o.id != null ? 'id=%s %s' : '%v%s');\n        str += (o.mediaClockValue != null ? '=%s' : '');\n        str += (o.rateNumerator != null ? ' rate=%s' : '');\n        str += (o.rateDenominator != null ? '/%s' : '');\n        return str;\n      }\n    },\n    {\n      // a=keywds:keywords\n      name: 'keywords',\n      reg: /^keywds:(.+)$/,\n      format: 'keywds:%s'\n    },\n    {\n      // a=content:main\n      name: 'content',\n      reg: /^content:(.+)/,\n      format: 'content:%s'\n    },\n    // BFCP https://tools.ietf.org/html/rfc4583\n    {\n      // a=floorctrl:c-s\n      name: 'bfcpFloorCtrl',\n      reg: /^floorctrl:(c-only|s-only|c-s)/,\n      format: 'floorctrl:%s'\n    },\n    {\n      // a=confid:1\n      name: 'bfcpConfId',\n      reg: /^confid:(\\d+)/,\n      format: 'confid:%s'\n    },\n    {\n      // a=userid:1\n      name: 'bfcpUserId',\n      reg: /^userid:(\\d+)/,\n      format: 'userid:%s'\n    },\n    {\n      // a=floorid:1\n      name: 'bfcpFloorId',\n      reg: /^floorid:(.+) (?:m-stream|mstrm):(.+)/,\n      names: ['id', 'mStream'],\n      format: 'floorid:%s mstrm:%s'\n    },\n    {\n      // any a= that we don't understand is kept verbatim on media.invalid\n      push: 'invalid',\n      names: ['value']\n    }\n  ]\n};\n\n// set sensible defaults to avoid polluting the grammar with boring details\nObject.keys(grammar).forEach(function (key) {\n  var objs = grammar[key];\n  objs.forEach(function (obj) {\n    if (!obj.reg) {\n      obj.reg = /(.*)/;\n    }\n    if (!obj.format) {\n      obj.format = '%s';\n    }\n  });\n});\n\n\n//# sourceURL=webpack://100-ms-demo/./node_modules/sdp-transform/lib/grammar.js?");

/***/ }),

/***/ "./node_modules/sdp-transform/lib/index.js":
/*!*************************************************!*\
  !*** ./node_modules/sdp-transform/lib/index.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("var parser = __webpack_require__(/*! ./parser */ \"./node_modules/sdp-transform/lib/parser.js\");\nvar writer = __webpack_require__(/*! ./writer */ \"./node_modules/sdp-transform/lib/writer.js\");\n\nexports.write = writer;\nexports.parse = parser.parse;\nexports.parseParams = parser.parseParams;\nexports.parseFmtpConfig = parser.parseFmtpConfig; // Alias of parseParams().\nexports.parsePayloads = parser.parsePayloads;\nexports.parseRemoteCandidates = parser.parseRemoteCandidates;\nexports.parseImageAttributes = parser.parseImageAttributes;\nexports.parseSimulcastStreamList = parser.parseSimulcastStreamList;\n\n\n//# sourceURL=webpack://100-ms-demo/./node_modules/sdp-transform/lib/index.js?");

/***/ }),

/***/ "./node_modules/sdp-transform/lib/parser.js":
/*!**************************************************!*\
  !*** ./node_modules/sdp-transform/lib/parser.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("var toIntIfInt = function (v) {\n  return String(Number(v)) === v ? Number(v) : v;\n};\n\nvar attachProperties = function (match, location, names, rawName) {\n  if (rawName && !names) {\n    location[rawName] = toIntIfInt(match[1]);\n  }\n  else {\n    for (var i = 0; i < names.length; i += 1) {\n      if (match[i+1] != null) {\n        location[names[i]] = toIntIfInt(match[i+1]);\n      }\n    }\n  }\n};\n\nvar parseReg = function (obj, location, content) {\n  var needsBlank = obj.name && obj.names;\n  if (obj.push && !location[obj.push]) {\n    location[obj.push] = [];\n  }\n  else if (needsBlank && !location[obj.name]) {\n    location[obj.name] = {};\n  }\n  var keyLocation = obj.push ?\n    {} :  // blank object that will be pushed\n    needsBlank ? location[obj.name] : location; // otherwise, named location or root\n\n  attachProperties(content.match(obj.reg), keyLocation, obj.names, obj.name);\n\n  if (obj.push) {\n    location[obj.push].push(keyLocation);\n  }\n};\n\nvar grammar = __webpack_require__(/*! ./grammar */ \"./node_modules/sdp-transform/lib/grammar.js\");\nvar validLine = RegExp.prototype.test.bind(/^([a-z])=(.*)/);\n\nexports.parse = function (sdp) {\n  var session = {}\n    , media = []\n    , location = session; // points at where properties go under (one of the above)\n\n  // parse lines we understand\n  sdp.split(/(\\r\\n|\\r|\\n)/).filter(validLine).forEach(function (l) {\n    var type = l[0];\n    var content = l.slice(2);\n    if (type === 'm') {\n      media.push({rtp: [], fmtp: []});\n      location = media[media.length-1]; // point at latest media line\n    }\n\n    for (var j = 0; j < (grammar[type] || []).length; j += 1) {\n      var obj = grammar[type][j];\n      if (obj.reg.test(content)) {\n        return parseReg(obj, location, content);\n      }\n    }\n  });\n\n  session.media = media; // link it up\n  return session;\n};\n\nvar paramReducer = function (acc, expr) {\n  var s = expr.split(/=(.+)/, 2);\n  if (s.length === 2) {\n    acc[s[0]] = toIntIfInt(s[1]);\n  } else if (s.length === 1 && expr.length > 1) {\n    acc[s[0]] = undefined;\n  }\n  return acc;\n};\n\nexports.parseParams = function (str) {\n  return str.split(/;\\s?/).reduce(paramReducer, {});\n};\n\n// For backward compatibility - alias will be removed in 3.0.0\nexports.parseFmtpConfig = exports.parseParams;\n\nexports.parsePayloads = function (str) {\n  return str.toString().split(' ').map(Number);\n};\n\nexports.parseRemoteCandidates = function (str) {\n  var candidates = [];\n  var parts = str.split(' ').map(toIntIfInt);\n  for (var i = 0; i < parts.length; i += 3) {\n    candidates.push({\n      component: parts[i],\n      ip: parts[i + 1],\n      port: parts[i + 2]\n    });\n  }\n  return candidates;\n};\n\nexports.parseImageAttributes = function (str) {\n  return str.split(' ').map(function (item) {\n    return item.substring(1, item.length-1).split(',').reduce(paramReducer, {});\n  });\n};\n\nexports.parseSimulcastStreamList = function (str) {\n  return str.split(';').map(function (stream) {\n    return stream.split(',').map(function (format) {\n      var scid, paused = false;\n\n      if (format[0] !== '~') {\n        scid = toIntIfInt(format);\n      } else {\n        scid = toIntIfInt(format.substring(1, format.length));\n        paused = true;\n      }\n\n      return {\n        scid: scid,\n        paused: paused\n      };\n    });\n  });\n};\n\n\n//# sourceURL=webpack://100-ms-demo/./node_modules/sdp-transform/lib/parser.js?");

/***/ }),

/***/ "./node_modules/sdp-transform/lib/writer.js":
/*!**************************************************!*\
  !*** ./node_modules/sdp-transform/lib/writer.js ***!
  \**************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var grammar = __webpack_require__(/*! ./grammar */ \"./node_modules/sdp-transform/lib/grammar.js\");\n\n// customized util.format - discards excess arguments and can void middle ones\nvar formatRegExp = /%[sdv%]/g;\nvar format = function (formatStr) {\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  return formatStr.replace(formatRegExp, function (x) {\n    if (i >= len) {\n      return x; // missing argument\n    }\n    var arg = args[i];\n    i += 1;\n    switch (x) {\n    case '%%':\n      return '%';\n    case '%s':\n      return String(arg);\n    case '%d':\n      return Number(arg);\n    case '%v':\n      return '';\n    }\n  });\n  // NB: we discard excess arguments - they are typically undefined from makeLine\n};\n\nvar makeLine = function (type, obj, location) {\n  var str = obj.format instanceof Function ?\n    (obj.format(obj.push ? location : location[obj.name])) :\n    obj.format;\n\n  var args = [type + '=' + str];\n  if (obj.names) {\n    for (var i = 0; i < obj.names.length; i += 1) {\n      var n = obj.names[i];\n      if (obj.name) {\n        args.push(location[obj.name][n]);\n      }\n      else { // for mLine and push attributes\n        args.push(location[obj.names[i]]);\n      }\n    }\n  }\n  else {\n    args.push(location[obj.name]);\n  }\n  return format.apply(null, args);\n};\n\n// RFC specified order\n// TODO: extend this with all the rest\nvar defaultOuterOrder = [\n  'v', 'o', 's', 'i',\n  'u', 'e', 'p', 'c',\n  'b', 't', 'r', 'z', 'a'\n];\nvar defaultInnerOrder = ['i', 'c', 'b', 'a'];\n\n\nmodule.exports = function (session, opts) {\n  opts = opts || {};\n  // ensure certain properties exist\n  if (session.version == null) {\n    session.version = 0; // 'v=0' must be there (only defined version atm)\n  }\n  if (session.name == null) {\n    session.name = ' '; // 's= ' must be there if no meaningful name set\n  }\n  session.media.forEach(function (mLine) {\n    if (mLine.payloads == null) {\n      mLine.payloads = '';\n    }\n  });\n\n  var outerOrder = opts.outerOrder || defaultOuterOrder;\n  var innerOrder = opts.innerOrder || defaultInnerOrder;\n  var sdp = [];\n\n  // loop through outerOrder for matching properties on session\n  outerOrder.forEach(function (type) {\n    grammar[type].forEach(function (obj) {\n      if (obj.name in session && session[obj.name] != null) {\n        sdp.push(makeLine(type, obj, session));\n      }\n      else if (obj.push in session && session[obj.push] != null) {\n        session[obj.push].forEach(function (el) {\n          sdp.push(makeLine(type, obj, el));\n        });\n      }\n    });\n  });\n\n  // then for each media line, follow the innerOrder\n  session.media.forEach(function (mLine) {\n    sdp.push(makeLine('m', grammar.m[0], mLine));\n\n    innerOrder.forEach(function (type) {\n      grammar[type].forEach(function (obj) {\n        if (obj.name in mLine && mLine[obj.name] != null) {\n          sdp.push(makeLine(type, obj, mLine));\n        }\n        else if (obj.push in mLine && mLine[obj.push] != null) {\n          mLine[obj.push].forEach(function (el) {\n            sdp.push(makeLine(type, obj, el));\n          });\n        }\n      });\n    });\n  });\n\n  return sdp.join('\\r\\n') + '\\r\\n';\n};\n\n\n//# sourceURL=webpack://100-ms-demo/./node_modules/sdp-transform/lib/writer.js?");

/***/ }),

/***/ "./node_modules/sdp/sdp.js":
/*!*********************************!*\
  !*** ./node_modules/sdp/sdp.js ***!
  \*********************************/
/***/ ((module) => {

"use strict";
eval("/* eslint-env node */\n\n\n// SDP helpers.\nconst SDPUtils = {};\n\n// Generate an alphanumeric identifier for cname or mids.\n// TODO: use UUIDs instead? https://gist.github.com/jed/982883\nSDPUtils.generateIdentifier = function() {\n  return Math.random().toString(36).substr(2, 10);\n};\n\n// The RTCP CNAME used by all peerconnections from the same JS.\nSDPUtils.localCName = SDPUtils.generateIdentifier();\n\n// Splits SDP into lines, dealing with both CRLF and LF.\nSDPUtils.splitLines = function(blob) {\n  return blob.trim().split('\\n').map(line => line.trim());\n};\n// Splits SDP into sessionpart and mediasections. Ensures CRLF.\nSDPUtils.splitSections = function(blob) {\n  const parts = blob.split('\\nm=');\n  return parts.map((part, index) => (index > 0 ?\n    'm=' + part : part).trim() + '\\r\\n');\n};\n\n// Returns the session description.\nSDPUtils.getDescription = function(blob) {\n  const sections = SDPUtils.splitSections(blob);\n  return sections && sections[0];\n};\n\n// Returns the individual media sections.\nSDPUtils.getMediaSections = function(blob) {\n  const sections = SDPUtils.splitSections(blob);\n  sections.shift();\n  return sections;\n};\n\n// Returns lines that start with a certain prefix.\nSDPUtils.matchPrefix = function(blob, prefix) {\n  return SDPUtils.splitLines(blob).filter(line => line.indexOf(prefix) === 0);\n};\n\n// Parses an ICE candidate line. Sample input:\n// candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8\n// rport 55996\"\n// Input can be prefixed with a=.\nSDPUtils.parseCandidate = function(line) {\n  let parts;\n  // Parse both variants.\n  if (line.indexOf('a=candidate:') === 0) {\n    parts = line.substring(12).split(' ');\n  } else {\n    parts = line.substring(10).split(' ');\n  }\n\n  const candidate = {\n    foundation: parts[0],\n    component: {1: 'rtp', 2: 'rtcp'}[parts[1]] || parts[1],\n    protocol: parts[2].toLowerCase(),\n    priority: parseInt(parts[3], 10),\n    ip: parts[4],\n    address: parts[4], // address is an alias for ip.\n    port: parseInt(parts[5], 10),\n    // skip parts[6] == 'typ'\n    type: parts[7],\n  };\n\n  for (let i = 8; i < parts.length; i += 2) {\n    switch (parts[i]) {\n      case 'raddr':\n        candidate.relatedAddress = parts[i + 1];\n        break;\n      case 'rport':\n        candidate.relatedPort = parseInt(parts[i + 1], 10);\n        break;\n      case 'tcptype':\n        candidate.tcpType = parts[i + 1];\n        break;\n      case 'ufrag':\n        candidate.ufrag = parts[i + 1]; // for backward compatibility.\n        candidate.usernameFragment = parts[i + 1];\n        break;\n      default: // extension handling, in particular ufrag. Don't overwrite.\n        if (candidate[parts[i]] === undefined) {\n          candidate[parts[i]] = parts[i + 1];\n        }\n        break;\n    }\n  }\n  return candidate;\n};\n\n// Translates a candidate object into SDP candidate attribute.\n// This does not include the a= prefix!\nSDPUtils.writeCandidate = function(candidate) {\n  const sdp = [];\n  sdp.push(candidate.foundation);\n\n  const component = candidate.component;\n  if (component === 'rtp') {\n    sdp.push(1);\n  } else if (component === 'rtcp') {\n    sdp.push(2);\n  } else {\n    sdp.push(component);\n  }\n  sdp.push(candidate.protocol.toUpperCase());\n  sdp.push(candidate.priority);\n  sdp.push(candidate.address || candidate.ip);\n  sdp.push(candidate.port);\n\n  const type = candidate.type;\n  sdp.push('typ');\n  sdp.push(type);\n  if (type !== 'host' && candidate.relatedAddress &&\n      candidate.relatedPort) {\n    sdp.push('raddr');\n    sdp.push(candidate.relatedAddress);\n    sdp.push('rport');\n    sdp.push(candidate.relatedPort);\n  }\n  if (candidate.tcpType && candidate.protocol.toLowerCase() === 'tcp') {\n    sdp.push('tcptype');\n    sdp.push(candidate.tcpType);\n  }\n  if (candidate.usernameFragment || candidate.ufrag) {\n    sdp.push('ufrag');\n    sdp.push(candidate.usernameFragment || candidate.ufrag);\n  }\n  return 'candidate:' + sdp.join(' ');\n};\n\n// Parses an ice-options line, returns an array of option tags.\n// Sample input:\n// a=ice-options:foo bar\nSDPUtils.parseIceOptions = function(line) {\n  return line.substr(14).split(' ');\n};\n\n// Parses a rtpmap line, returns RTCRtpCoddecParameters. Sample input:\n// a=rtpmap:111 opus/48000/2\nSDPUtils.parseRtpMap = function(line) {\n  let parts = line.substr(9).split(' ');\n  const parsed = {\n    payloadType: parseInt(parts.shift(), 10), // was: id\n  };\n\n  parts = parts[0].split('/');\n\n  parsed.name = parts[0];\n  parsed.clockRate = parseInt(parts[1], 10); // was: clockrate\n  parsed.channels = parts.length === 3 ? parseInt(parts[2], 10) : 1;\n  // legacy alias, got renamed back to channels in ORTC.\n  parsed.numChannels = parsed.channels;\n  return parsed;\n};\n\n// Generates a rtpmap line from RTCRtpCodecCapability or\n// RTCRtpCodecParameters.\nSDPUtils.writeRtpMap = function(codec) {\n  let pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  const channels = codec.channels || codec.numChannels || 1;\n  return 'a=rtpmap:' + pt + ' ' + codec.name + '/' + codec.clockRate +\n      (channels !== 1 ? '/' + channels : '') + '\\r\\n';\n};\n\n// Parses a extmap line (headerextension from RFC 5285). Sample input:\n// a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n// a=extmap:2/sendonly urn:ietf:params:rtp-hdrext:toffset\nSDPUtils.parseExtmap = function(line) {\n  const parts = line.substr(9).split(' ');\n  return {\n    id: parseInt(parts[0], 10),\n    direction: parts[0].indexOf('/') > 0 ? parts[0].split('/')[1] : 'sendrecv',\n    uri: parts[1],\n  };\n};\n\n// Generates an extmap line from RTCRtpHeaderExtensionParameters or\n// RTCRtpHeaderExtension.\nSDPUtils.writeExtmap = function(headerExtension) {\n  return 'a=extmap:' + (headerExtension.id || headerExtension.preferredId) +\n      (headerExtension.direction && headerExtension.direction !== 'sendrecv'\n        ? '/' + headerExtension.direction\n        : '') +\n      ' ' + headerExtension.uri + '\\r\\n';\n};\n\n// Parses a fmtp line, returns dictionary. Sample input:\n// a=fmtp:96 vbr=on;cng=on\n// Also deals with vbr=on; cng=on\nSDPUtils.parseFmtp = function(line) {\n  const parsed = {};\n  let kv;\n  const parts = line.substr(line.indexOf(' ') + 1).split(';');\n  for (let j = 0; j < parts.length; j++) {\n    kv = parts[j].trim().split('=');\n    parsed[kv[0].trim()] = kv[1];\n  }\n  return parsed;\n};\n\n// Generates a fmtp line from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeFmtp = function(codec) {\n  let line = '';\n  let pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.parameters && Object.keys(codec.parameters).length) {\n    const params = [];\n    Object.keys(codec.parameters).forEach(param => {\n      if (codec.parameters[param] !== undefined) {\n        params.push(param + '=' + codec.parameters[param]);\n      } else {\n        params.push(param);\n      }\n    });\n    line += 'a=fmtp:' + pt + ' ' + params.join(';') + '\\r\\n';\n  }\n  return line;\n};\n\n// Parses a rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:\n// a=rtcp-fb:98 nack rpsi\nSDPUtils.parseRtcpFb = function(line) {\n  const parts = line.substr(line.indexOf(' ') + 1).split(' ');\n  return {\n    type: parts.shift(),\n    parameter: parts.join(' '),\n  };\n};\n\n// Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeRtcpFb = function(codec) {\n  let lines = '';\n  let pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.rtcpFeedback && codec.rtcpFeedback.length) {\n    // FIXME: special handling for trr-int?\n    codec.rtcpFeedback.forEach(fb => {\n      lines += 'a=rtcp-fb:' + pt + ' ' + fb.type +\n      (fb.parameter && fb.parameter.length ? ' ' + fb.parameter : '') +\n          '\\r\\n';\n    });\n  }\n  return lines;\n};\n\n// Parses a RFC 5576 ssrc media attribute. Sample input:\n// a=ssrc:3735928559 cname:something\nSDPUtils.parseSsrcMedia = function(line) {\n  const sp = line.indexOf(' ');\n  const parts = {\n    ssrc: parseInt(line.substr(7, sp - 7), 10),\n  };\n  const colon = line.indexOf(':', sp);\n  if (colon > -1) {\n    parts.attribute = line.substr(sp + 1, colon - sp - 1);\n    parts.value = line.substr(colon + 1);\n  } else {\n    parts.attribute = line.substr(sp + 1);\n  }\n  return parts;\n};\n\n// Parse a ssrc-group line (see RFC 5576). Sample input:\n// a=ssrc-group:semantics 12 34\nSDPUtils.parseSsrcGroup = function(line) {\n  const parts = line.substr(13).split(' ');\n  return {\n    semantics: parts.shift(),\n    ssrcs: parts.map(ssrc => parseInt(ssrc, 10)),\n  };\n};\n\n// Extracts the MID (RFC 5888) from a media section.\n// Returns the MID or undefined if no mid line was found.\nSDPUtils.getMid = function(mediaSection) {\n  const mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:')[0];\n  if (mid) {\n    return mid.substr(6);\n  }\n};\n\n// Parses a fingerprint line for DTLS-SRTP.\nSDPUtils.parseFingerprint = function(line) {\n  const parts = line.substr(14).split(' ');\n  return {\n    algorithm: parts[0].toLowerCase(), // algorithm is case-sensitive in Edge.\n    value: parts[1].toUpperCase(), // the definition is upper-case in RFC 4572.\n  };\n};\n\n// Extracts DTLS parameters from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the fingerprint line as input. See also getIceParameters.\nSDPUtils.getDtlsParameters = function(mediaSection, sessionpart) {\n  const lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=fingerprint:');\n  // Note: a=setup line is ignored since we use the 'auto' role in Edge.\n  return {\n    role: 'auto',\n    fingerprints: lines.map(SDPUtils.parseFingerprint),\n  };\n};\n\n// Serializes DTLS parameters to SDP.\nSDPUtils.writeDtlsParameters = function(params, setupType) {\n  let sdp = 'a=setup:' + setupType + '\\r\\n';\n  params.fingerprints.forEach(fp => {\n    sdp += 'a=fingerprint:' + fp.algorithm + ' ' + fp.value + '\\r\\n';\n  });\n  return sdp;\n};\n\n// Parses a=crypto lines into\n//   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#dictionary-rtcsrtpsdesparameters-members\nSDPUtils.parseCryptoLine = function(line) {\n  const parts = line.substr(9).split(' ');\n  return {\n    tag: parseInt(parts[0], 10),\n    cryptoSuite: parts[1],\n    keyParams: parts[2],\n    sessionParams: parts.slice(3),\n  };\n};\n\nSDPUtils.writeCryptoLine = function(parameters) {\n  return 'a=crypto:' + parameters.tag + ' ' +\n    parameters.cryptoSuite + ' ' +\n    (typeof parameters.keyParams === 'object'\n      ? SDPUtils.writeCryptoKeyParams(parameters.keyParams)\n      : parameters.keyParams) +\n    (parameters.sessionParams ? ' ' + parameters.sessionParams.join(' ') : '') +\n    '\\r\\n';\n};\n\n// Parses the crypto key parameters into\n//   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#rtcsrtpkeyparam*\nSDPUtils.parseCryptoKeyParams = function(keyParams) {\n  if (keyParams.indexOf('inline:') !== 0) {\n    return null;\n  }\n  const parts = keyParams.substr(7).split('|');\n  return {\n    keyMethod: 'inline',\n    keySalt: parts[0],\n    lifeTime: parts[1],\n    mkiValue: parts[2] ? parts[2].split(':')[0] : undefined,\n    mkiLength: parts[2] ? parts[2].split(':')[1] : undefined,\n  };\n};\n\nSDPUtils.writeCryptoKeyParams = function(keyParams) {\n  return keyParams.keyMethod + ':'\n    + keyParams.keySalt +\n    (keyParams.lifeTime ? '|' + keyParams.lifeTime : '') +\n    (keyParams.mkiValue && keyParams.mkiLength\n      ? '|' + keyParams.mkiValue + ':' + keyParams.mkiLength\n      : '');\n};\n\n// Extracts all SDES parameters.\nSDPUtils.getCryptoParameters = function(mediaSection, sessionpart) {\n  const lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=crypto:');\n  return lines.map(SDPUtils.parseCryptoLine);\n};\n\n// Parses ICE information from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the ice-ufrag and ice-pwd lines as input.\nSDPUtils.getIceParameters = function(mediaSection, sessionpart) {\n  const ufrag = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=ice-ufrag:')[0];\n  const pwd = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=ice-pwd:')[0];\n  if (!(ufrag && pwd)) {\n    return null;\n  }\n  return {\n    usernameFragment: ufrag.substr(12),\n    password: pwd.substr(10),\n  };\n};\n\n// Serializes ICE parameters to SDP.\nSDPUtils.writeIceParameters = function(params) {\n  let sdp = 'a=ice-ufrag:' + params.usernameFragment + '\\r\\n' +\n      'a=ice-pwd:' + params.password + '\\r\\n';\n  if (params.iceLite) {\n    sdp += 'a=ice-lite\\r\\n';\n  }\n  return sdp;\n};\n\n// Parses the SDP media section and returns RTCRtpParameters.\nSDPUtils.parseRtpParameters = function(mediaSection) {\n  const description = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: [],\n    rtcp: [],\n  };\n  const lines = SDPUtils.splitLines(mediaSection);\n  const mline = lines[0].split(' ');\n  for (let i = 3; i < mline.length; i++) { // find all codecs from mline[3..]\n    const pt = mline[i];\n    const rtpmapline = SDPUtils.matchPrefix(\n      mediaSection, 'a=rtpmap:' + pt + ' ')[0];\n    if (rtpmapline) {\n      const codec = SDPUtils.parseRtpMap(rtpmapline);\n      const fmtps = SDPUtils.matchPrefix(\n        mediaSection, 'a=fmtp:' + pt + ' ');\n      // Only the first a=fmtp:<pt> is considered.\n      codec.parameters = fmtps.length ? SDPUtils.parseFmtp(fmtps[0]) : {};\n      codec.rtcpFeedback = SDPUtils.matchPrefix(\n        mediaSection, 'a=rtcp-fb:' + pt + ' ')\n        .map(SDPUtils.parseRtcpFb);\n      description.codecs.push(codec);\n      // parse FEC mechanisms from rtpmap lines.\n      switch (codec.name.toUpperCase()) {\n        case 'RED':\n        case 'ULPFEC':\n          description.fecMechanisms.push(codec.name.toUpperCase());\n          break;\n        default: // only RED and ULPFEC are recognized as FEC mechanisms.\n          break;\n      }\n    }\n  }\n  SDPUtils.matchPrefix(mediaSection, 'a=extmap:').forEach(line => {\n    description.headerExtensions.push(SDPUtils.parseExtmap(line));\n  });\n  // FIXME: parse rtcp.\n  return description;\n};\n\n// Generates parts of the SDP media section describing the capabilities /\n// parameters.\nSDPUtils.writeRtpDescription = function(kind, caps) {\n  let sdp = '';\n\n  // Build the mline.\n  sdp += 'm=' + kind + ' ';\n  sdp += caps.codecs.length > 0 ? '9' : '0'; // reject if no codecs.\n  sdp += ' UDP/TLS/RTP/SAVPF ';\n  sdp += caps.codecs.map(codec => {\n    if (codec.preferredPayloadType !== undefined) {\n      return codec.preferredPayloadType;\n    }\n    return codec.payloadType;\n  }).join(' ') + '\\r\\n';\n\n  sdp += 'c=IN IP4 0.0.0.0\\r\\n';\n  sdp += 'a=rtcp:9 IN IP4 0.0.0.0\\r\\n';\n\n  // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.\n  caps.codecs.forEach(codec => {\n    sdp += SDPUtils.writeRtpMap(codec);\n    sdp += SDPUtils.writeFmtp(codec);\n    sdp += SDPUtils.writeRtcpFb(codec);\n  });\n  let maxptime = 0;\n  caps.codecs.forEach(codec => {\n    if (codec.maxptime > maxptime) {\n      maxptime = codec.maxptime;\n    }\n  });\n  if (maxptime > 0) {\n    sdp += 'a=maxptime:' + maxptime + '\\r\\n';\n  }\n\n  if (caps.headerExtensions) {\n    caps.headerExtensions.forEach(extension => {\n      sdp += SDPUtils.writeExtmap(extension);\n    });\n  }\n  // FIXME: write fecMechanisms.\n  return sdp;\n};\n\n// Parses the SDP media section and returns an array of\n// RTCRtpEncodingParameters.\nSDPUtils.parseRtpEncodingParameters = function(mediaSection) {\n  const encodingParameters = [];\n  const description = SDPUtils.parseRtpParameters(mediaSection);\n  const hasRed = description.fecMechanisms.indexOf('RED') !== -1;\n  const hasUlpfec = description.fecMechanisms.indexOf('ULPFEC') !== -1;\n\n  // filter a=ssrc:... cname:, ignore PlanB-msid\n  const ssrcs = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(line => SDPUtils.parseSsrcMedia(line))\n    .filter(parts => parts.attribute === 'cname');\n  const primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;\n  let secondarySsrc;\n\n  const flows = SDPUtils.matchPrefix(mediaSection, 'a=ssrc-group:FID')\n    .map(line => {\n      const parts = line.substr(17).split(' ');\n      return parts.map(part => parseInt(part, 10));\n    });\n  if (flows.length > 0 && flows[0].length > 1 && flows[0][0] === primarySsrc) {\n    secondarySsrc = flows[0][1];\n  }\n\n  description.codecs.forEach(codec => {\n    if (codec.name.toUpperCase() === 'RTX' && codec.parameters.apt) {\n      let encParam = {\n        ssrc: primarySsrc,\n        codecPayloadType: parseInt(codec.parameters.apt, 10),\n      };\n      if (primarySsrc && secondarySsrc) {\n        encParam.rtx = {ssrc: secondarySsrc};\n      }\n      encodingParameters.push(encParam);\n      if (hasRed) {\n        encParam = JSON.parse(JSON.stringify(encParam));\n        encParam.fec = {\n          ssrc: primarySsrc,\n          mechanism: hasUlpfec ? 'red+ulpfec' : 'red',\n        };\n        encodingParameters.push(encParam);\n      }\n    }\n  });\n  if (encodingParameters.length === 0 && primarySsrc) {\n    encodingParameters.push({\n      ssrc: primarySsrc,\n    });\n  }\n\n  // we support both b=AS and b=TIAS but interpret AS as TIAS.\n  let bandwidth = SDPUtils.matchPrefix(mediaSection, 'b=');\n  if (bandwidth.length) {\n    if (bandwidth[0].indexOf('b=TIAS:') === 0) {\n      bandwidth = parseInt(bandwidth[0].substr(7), 10);\n    } else if (bandwidth[0].indexOf('b=AS:') === 0) {\n      // use formula from JSEP to convert b=AS to TIAS value.\n      bandwidth = parseInt(bandwidth[0].substr(5), 10) * 1000 * 0.95\n          - (50 * 40 * 8);\n    } else {\n      bandwidth = undefined;\n    }\n    encodingParameters.forEach(params => {\n      params.maxBitrate = bandwidth;\n    });\n  }\n  return encodingParameters;\n};\n\n// parses http://draft.ortc.org/#rtcrtcpparameters*\nSDPUtils.parseRtcpParameters = function(mediaSection) {\n  const rtcpParameters = {};\n\n  // Gets the first SSRC. Note that with RTX there might be multiple\n  // SSRCs.\n  const remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(line => SDPUtils.parseSsrcMedia(line))\n    .filter(obj => obj.attribute === 'cname')[0];\n  if (remoteSsrc) {\n    rtcpParameters.cname = remoteSsrc.value;\n    rtcpParameters.ssrc = remoteSsrc.ssrc;\n  }\n\n  // Edge uses the compound attribute instead of reducedSize\n  // compound is !reducedSize\n  const rsize = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-rsize');\n  rtcpParameters.reducedSize = rsize.length > 0;\n  rtcpParameters.compound = rsize.length === 0;\n\n  // parses the rtcp-mux attrіbute.\n  // Note that Edge does not support unmuxed RTCP.\n  const mux = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-mux');\n  rtcpParameters.mux = mux.length > 0;\n\n  return rtcpParameters;\n};\n\nSDPUtils.writeRtcpParameters = function(rtcpParameters) {\n  let sdp = '';\n  if (rtcpParameters.reducedSize) {\n    sdp += 'a=rtcp-rsize\\r\\n';\n  }\n  if (rtcpParameters.mux) {\n    sdp += 'a=rtcp-mux\\r\\n';\n  }\n  if (rtcpParameters.ssrc !== undefined && rtcpParameters.cname) {\n    sdp += 'a=ssrc:' + rtcpParameters.ssrc +\n      ' cname:' + rtcpParameters.cname + '\\r\\n';\n  }\n  return sdp;\n};\n\n\n// parses either a=msid: or a=ssrc:... msid lines and returns\n// the id of the MediaStream and MediaStreamTrack.\nSDPUtils.parseMsid = function(mediaSection) {\n  let parts;\n  const spec = SDPUtils.matchPrefix(mediaSection, 'a=msid:');\n  if (spec.length === 1) {\n    parts = spec[0].substr(7).split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n  const planB = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(line => SDPUtils.parseSsrcMedia(line))\n    .filter(msidParts => msidParts.attribute === 'msid');\n  if (planB.length > 0) {\n    parts = planB[0].value.split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n};\n\n// SCTP\n// parses draft-ietf-mmusic-sctp-sdp-26 first and falls back\n// to draft-ietf-mmusic-sctp-sdp-05\nSDPUtils.parseSctpDescription = function(mediaSection) {\n  const mline = SDPUtils.parseMLine(mediaSection);\n  const maxSizeLine = SDPUtils.matchPrefix(mediaSection, 'a=max-message-size:');\n  let maxMessageSize;\n  if (maxSizeLine.length > 0) {\n    maxMessageSize = parseInt(maxSizeLine[0].substr(19), 10);\n  }\n  if (isNaN(maxMessageSize)) {\n    maxMessageSize = 65536;\n  }\n  const sctpPort = SDPUtils.matchPrefix(mediaSection, 'a=sctp-port:');\n  if (sctpPort.length > 0) {\n    return {\n      port: parseInt(sctpPort[0].substr(12), 10),\n      protocol: mline.fmt,\n      maxMessageSize,\n    };\n  }\n  const sctpMapLines = SDPUtils.matchPrefix(mediaSection, 'a=sctpmap:');\n  if (sctpMapLines.length > 0) {\n    const parts = sctpMapLines[0]\n      .substr(10)\n      .split(' ');\n    return {\n      port: parseInt(parts[0], 10),\n      protocol: parts[1],\n      maxMessageSize,\n    };\n  }\n};\n\n// SCTP\n// outputs the draft-ietf-mmusic-sctp-sdp-26 version that all browsers\n// support by now receiving in this format, unless we originally parsed\n// as the draft-ietf-mmusic-sctp-sdp-05 format (indicated by the m-line\n// protocol of DTLS/SCTP -- without UDP/ or TCP/)\nSDPUtils.writeSctpDescription = function(media, sctp) {\n  let output = [];\n  if (media.protocol !== 'DTLS/SCTP') {\n    output = [\n      'm=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.protocol + '\\r\\n',\n      'c=IN IP4 0.0.0.0\\r\\n',\n      'a=sctp-port:' + sctp.port + '\\r\\n',\n    ];\n  } else {\n    output = [\n      'm=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.port + '\\r\\n',\n      'c=IN IP4 0.0.0.0\\r\\n',\n      'a=sctpmap:' + sctp.port + ' ' + sctp.protocol + ' 65535\\r\\n',\n    ];\n  }\n  if (sctp.maxMessageSize !== undefined) {\n    output.push('a=max-message-size:' + sctp.maxMessageSize + '\\r\\n');\n  }\n  return output.join('');\n};\n\n// Generate a session ID for SDP.\n// https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-20#section-5.2.1\n// recommends using a cryptographically random +ve 64-bit value\n// but right now this should be acceptable and within the right range\nSDPUtils.generateSessionId = function() {\n  return Math.random().toString().substr(2, 21);\n};\n\n// Write boiler plate for start of SDP\n// sessId argument is optional - if not supplied it will\n// be generated randomly\n// sessVersion is optional and defaults to 2\n// sessUser is optional and defaults to 'thisisadapterortc'\nSDPUtils.writeSessionBoilerplate = function(sessId, sessVer, sessUser) {\n  let sessionId;\n  const version = sessVer !== undefined ? sessVer : 2;\n  if (sessId) {\n    sessionId = sessId;\n  } else {\n    sessionId = SDPUtils.generateSessionId();\n  }\n  const user = sessUser || 'thisisadapterortc';\n  // FIXME: sess-id should be an NTP timestamp.\n  return 'v=0\\r\\n' +\n      'o=' + user + ' ' + sessionId + ' ' + version +\n        ' IN IP4 127.0.0.1\\r\\n' +\n      's=-\\r\\n' +\n      't=0 0\\r\\n';\n};\n\n// Gets the direction from the mediaSection or the sessionpart.\nSDPUtils.getDirection = function(mediaSection, sessionpart) {\n  // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.\n  const lines = SDPUtils.splitLines(mediaSection);\n  for (let i = 0; i < lines.length; i++) {\n    switch (lines[i]) {\n      case 'a=sendrecv':\n      case 'a=sendonly':\n      case 'a=recvonly':\n      case 'a=inactive':\n        return lines[i].substr(2);\n      default:\n        // FIXME: What should happen here?\n    }\n  }\n  if (sessionpart) {\n    return SDPUtils.getDirection(sessionpart);\n  }\n  return 'sendrecv';\n};\n\nSDPUtils.getKind = function(mediaSection) {\n  const lines = SDPUtils.splitLines(mediaSection);\n  const mline = lines[0].split(' ');\n  return mline[0].substr(2);\n};\n\nSDPUtils.isRejected = function(mediaSection) {\n  return mediaSection.split(' ', 2)[1] === '0';\n};\n\nSDPUtils.parseMLine = function(mediaSection) {\n  const lines = SDPUtils.splitLines(mediaSection);\n  const parts = lines[0].substr(2).split(' ');\n  return {\n    kind: parts[0],\n    port: parseInt(parts[1], 10),\n    protocol: parts[2],\n    fmt: parts.slice(3).join(' '),\n  };\n};\n\nSDPUtils.parseOLine = function(mediaSection) {\n  const line = SDPUtils.matchPrefix(mediaSection, 'o=')[0];\n  const parts = line.substr(2).split(' ');\n  return {\n    username: parts[0],\n    sessionId: parts[1],\n    sessionVersion: parseInt(parts[2], 10),\n    netType: parts[3],\n    addressType: parts[4],\n    address: parts[5],\n  };\n};\n\n// a very naive interpretation of a valid SDP.\nSDPUtils.isValidSDP = function(blob) {\n  if (typeof blob !== 'string' || blob.length === 0) {\n    return false;\n  }\n  const lines = SDPUtils.splitLines(blob);\n  for (let i = 0; i < lines.length; i++) {\n    if (lines[i].length < 2 || lines[i].charAt(1) !== '=') {\n      return false;\n    }\n    // TODO: check the modifier a bit more.\n  }\n  return true;\n};\n\n// Expose public methods.\nif (true) {\n  module.exports = SDPUtils;\n}\n\n\n//# sourceURL=webpack://100-ms-demo/./node_modules/sdp/sdp.js?");

/***/ }),

/***/ "./node_modules/ua-parser-js/src/ua-parser.js":
/*!****************************************************!*\
  !*** ./node_modules/ua-parser-js/src/ua-parser.js ***!
  \****************************************************/
/***/ (function(module, exports, __webpack_require__) {

eval("var __WEBPACK_AMD_DEFINE_RESULT__;/////////////////////////////////////////////////////////////////////////////////\n/* UAParser.js v1.0.2\n   Copyright © 2012-2021 Faisal Salman <f@faisalman.com>\n   MIT License *//*\n   Detect Browser, Engine, OS, CPU, and Device type/model from User-Agent data.\n   Supports browser & node.js environment. \n   Demo   : https://faisalman.github.io/ua-parser-js\n   Source : https://github.com/faisalman/ua-parser-js */\n/////////////////////////////////////////////////////////////////////////////////\n\n(function (window, undefined) {\n\n    'use strict';\n\n    //////////////\n    // Constants\n    /////////////\n\n\n    var LIBVERSION  = '1.0.2',\n        EMPTY       = '',\n        UNKNOWN     = '?',\n        FUNC_TYPE   = 'function',\n        UNDEF_TYPE  = 'undefined',\n        OBJ_TYPE    = 'object',\n        STR_TYPE    = 'string',\n        MAJOR       = 'major',\n        MODEL       = 'model',\n        NAME        = 'name',\n        TYPE        = 'type',\n        VENDOR      = 'vendor',\n        VERSION     = 'version',\n        ARCHITECTURE= 'architecture',\n        CONSOLE     = 'console',\n        MOBILE      = 'mobile',\n        TABLET      = 'tablet',\n        SMARTTV     = 'smarttv',\n        WEARABLE    = 'wearable',\n        EMBEDDED    = 'embedded',\n        UA_MAX_LENGTH = 255;\n\n    var AMAZON  = 'Amazon',\n        APPLE   = 'Apple',\n        ASUS    = 'ASUS',\n        BLACKBERRY = 'BlackBerry',\n        BROWSER = 'Browser',\n        CHROME  = 'Chrome',\n        EDGE    = 'Edge',\n        FIREFOX = 'Firefox',\n        GOOGLE  = 'Google',\n        HUAWEI  = 'Huawei',\n        LG      = 'LG',\n        MICROSOFT = 'Microsoft',\n        MOTOROLA  = 'Motorola',\n        OPERA   = 'Opera',\n        SAMSUNG = 'Samsung',\n        SONY    = 'Sony',\n        XIAOMI  = 'Xiaomi',\n        ZEBRA   = 'Zebra',\n        FACEBOOK   = 'Facebook';\n\n    ///////////\n    // Helper\n    //////////\n\n    var extend = function (regexes, extensions) {\n            var mergedRegexes = {};\n            for (var i in regexes) {\n                if (extensions[i] && extensions[i].length % 2 === 0) {\n                    mergedRegexes[i] = extensions[i].concat(regexes[i]);\n                } else {\n                    mergedRegexes[i] = regexes[i];\n                }\n            }\n            return mergedRegexes;\n        },\n        enumerize = function (arr) {\n            var enums = {};\n            for (var i=0; i<arr.length; i++) {\n                enums[arr[i].toUpperCase()] = arr[i];\n            }\n            return enums;\n        },\n        has = function (str1, str2) {\n            return typeof str1 === STR_TYPE ? lowerize(str2).indexOf(lowerize(str1)) !== -1 : false;\n        },\n        lowerize = function (str) {\n            return str.toLowerCase();\n        },\n        majorize = function (version) {\n            return typeof(version) === STR_TYPE ? version.replace(/[^\\d\\.]/g, EMPTY).split('.')[0] : undefined;\n        },\n        trim = function (str, len) {\n            if (typeof(str) === STR_TYPE) {\n                str = str.replace(/^\\s\\s*/, EMPTY).replace(/\\s\\s*$/, EMPTY);\n                return typeof(len) === UNDEF_TYPE ? str : str.substring(0, UA_MAX_LENGTH);\n            }\n    };\n\n    ///////////////\n    // Map helper\n    //////////////\n\n    var rgxMapper = function (ua, arrays) {\n\n            var i = 0, j, k, p, q, matches, match;\n\n            // loop through all regexes maps\n            while (i < arrays.length && !matches) {\n\n                var regex = arrays[i],       // even sequence (0,2,4,..)\n                    props = arrays[i + 1];   // odd sequence (1,3,5,..)\n                j = k = 0;\n\n                // try matching uastring with regexes\n                while (j < regex.length && !matches) {\n\n                    matches = regex[j++].exec(ua);\n\n                    if (!!matches) {\n                        for (p = 0; p < props.length; p++) {\n                            match = matches[++k];\n                            q = props[p];\n                            // check if given property is actually array\n                            if (typeof q === OBJ_TYPE && q.length > 0) {\n                                if (q.length === 2) {\n                                    if (typeof q[1] == FUNC_TYPE) {\n                                        // assign modified match\n                                        this[q[0]] = q[1].call(this, match);\n                                    } else {\n                                        // assign given value, ignore regex match\n                                        this[q[0]] = q[1];\n                                    }\n                                } else if (q.length === 3) {\n                                    // check whether function or regex\n                                    if (typeof q[1] === FUNC_TYPE && !(q[1].exec && q[1].test)) {\n                                        // call function (usually string mapper)\n                                        this[q[0]] = match ? q[1].call(this, match, q[2]) : undefined;\n                                    } else {\n                                        // sanitize match using given regex\n                                        this[q[0]] = match ? match.replace(q[1], q[2]) : undefined;\n                                    }\n                                } else if (q.length === 4) {\n                                        this[q[0]] = match ? q[3].call(this, match.replace(q[1], q[2])) : undefined;\n                                }\n                            } else {\n                                this[q] = match ? match : undefined;\n                            }\n                        }\n                    }\n                }\n                i += 2;\n            }\n        },\n\n        strMapper = function (str, map) {\n\n            for (var i in map) {\n                // check if current value is array\n                if (typeof map[i] === OBJ_TYPE && map[i].length > 0) {\n                    for (var j = 0; j < map[i].length; j++) {\n                        if (has(map[i][j], str)) {\n                            return (i === UNKNOWN) ? undefined : i;\n                        }\n                    }\n                } else if (has(map[i], str)) {\n                    return (i === UNKNOWN) ? undefined : i;\n                }\n            }\n            return str;\n    };\n\n    ///////////////\n    // String map\n    //////////////\n\n    // Safari < 3.0\n    var oldSafariMap = {\n            '1.0'   : '/8',\n            '1.2'   : '/1',\n            '1.3'   : '/3',\n            '2.0'   : '/412',\n            '2.0.2' : '/416',\n            '2.0.3' : '/417',\n            '2.0.4' : '/419',\n            '?'     : '/'\n        },\n        windowsVersionMap = {\n            'ME'        : '4.90',\n            'NT 3.11'   : 'NT3.51',\n            'NT 4.0'    : 'NT4.0',\n            '2000'      : 'NT 5.0',\n            'XP'        : ['NT 5.1', 'NT 5.2'],\n            'Vista'     : 'NT 6.0',\n            '7'         : 'NT 6.1',\n            '8'         : 'NT 6.2',\n            '8.1'       : 'NT 6.3',\n            '10'        : ['NT 6.4', 'NT 10.0'],\n            'RT'        : 'ARM'\n    };\n\n    //////////////\n    // Regex map\n    /////////////\n\n    var regexes = {\n\n        browser : [[\n\n            /\\b(?:crmo|crios)\\/([\\w\\.]+)/i                                      // Chrome for Android/iOS\n            ], [VERSION, [NAME, 'Chrome']], [\n            /edg(?:e|ios|a)?\\/([\\w\\.]+)/i                                       // Microsoft Edge\n            ], [VERSION, [NAME, 'Edge']], [\n\n            // Presto based\n            /(opera mini)\\/([-\\w\\.]+)/i,                                        // Opera Mini\n            /(opera [mobiletab]{3,6})\\b.+version\\/([-\\w\\.]+)/i,                 // Opera Mobi/Tablet\n            /(opera)(?:.+version\\/|[\\/ ]+)([\\w\\.]+)/i                           // Opera\n            ], [NAME, VERSION], [\n            /opios[\\/ ]+([\\w\\.]+)/i                                             // Opera mini on iphone >= 8.0\n            ], [VERSION, [NAME, OPERA+' Mini']], [\n            /\\bopr\\/([\\w\\.]+)/i                                                 // Opera Webkit\n            ], [VERSION, [NAME, OPERA]], [\n\n            // Mixed\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n            /(lunascape|maxthon|netfront|jasmine|blazer)[\\/ ]?([\\w\\.]*)/i,      // Lunascape/Maxthon/Netfront/Jasmine/Blazer\n            // Trident based\n            /(avant |iemobile|slim)(?:browser)?[\\/ ]?([\\w\\.]*)/i,               // Avant/IEMobile/SlimBrowser\n            /(ba?idubrowser)[\\/ ]?([\\w\\.]+)/i,                                  // Baidu Browser\n            /(?:ms|\\()(ie) ([\\w\\.]+)/i,                                         // Internet Explorer\n\n            // Webkit/KHTML based                                               // Flock/RockMelt/Midori/Epiphany/Silk/Skyfire/Bolt/Iron/Iridium/PhantomJS/Bowser/QupZilla/Falkon\n            /(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\\/([-\\w\\.]+)/i,\n                                                                                // Rekonq/Puffin/Brave/Whale/QQBrowserLite/QQ, aka ShouQ\n            /(weibo)__([\\d\\.]+)/i                                               // Weibo\n            ], [NAME, VERSION], [\n            /(?:\\buc? ?browser|(?:juc.+)ucweb)[\\/ ]?([\\w\\.]+)/i                 // UCBrowser\n            ], [VERSION, [NAME, 'UC'+BROWSER]], [\n            /\\bqbcore\\/([\\w\\.]+)/i                                              // WeChat Desktop for Windows Built-in Browser\n            ], [VERSION, [NAME, 'WeChat(Win) Desktop']], [\n            /micromessenger\\/([\\w\\.]+)/i                                        // WeChat\n            ], [VERSION, [NAME, 'WeChat']], [\n            /konqueror\\/([\\w\\.]+)/i                                             // Konqueror\n            ], [VERSION, [NAME, 'Konqueror']], [\n            /trident.+rv[: ]([\\w\\.]{1,9})\\b.+like gecko/i                       // IE11\n            ], [VERSION, [NAME, 'IE']], [\n            /yabrowser\\/([\\w\\.]+)/i                                             // Yandex\n            ], [VERSION, [NAME, 'Yandex']], [\n            /(avast|avg)\\/([\\w\\.]+)/i                                           // Avast/AVG Secure Browser\n            ], [[NAME, /(.+)/, '$1 Secure '+BROWSER], VERSION], [\n            /\\bfocus\\/([\\w\\.]+)/i                                               // Firefox Focus\n            ], [VERSION, [NAME, FIREFOX+' Focus']], [\n            /\\bopt\\/([\\w\\.]+)/i                                                 // Opera Touch\n            ], [VERSION, [NAME, OPERA+' Touch']], [\n            /coc_coc\\w+\\/([\\w\\.]+)/i                                            // Coc Coc Browser\n            ], [VERSION, [NAME, 'Coc Coc']], [\n            /dolfin\\/([\\w\\.]+)/i                                                // Dolphin\n            ], [VERSION, [NAME, 'Dolphin']], [\n            /coast\\/([\\w\\.]+)/i                                                 // Opera Coast\n            ], [VERSION, [NAME, OPERA+' Coast']], [\n            /miuibrowser\\/([\\w\\.]+)/i                                           // MIUI Browser\n            ], [VERSION, [NAME, 'MIUI '+BROWSER]], [\n            /fxios\\/([-\\w\\.]+)/i                                                // Firefox for iOS\n            ], [VERSION, [NAME, FIREFOX]], [\n            /\\bqihu|(qi?ho?o?|360)browser/i                                     // 360\n            ], [[NAME, '360 '+BROWSER]], [\n            /(oculus|samsung|sailfish)browser\\/([\\w\\.]+)/i\n            ], [[NAME, /(.+)/, '$1 '+BROWSER], VERSION], [                      // Oculus/Samsung/Sailfish Browser\n            /(comodo_dragon)\\/([\\w\\.]+)/i                                       // Comodo Dragon\n            ], [[NAME, /_/g, ' '], VERSION], [\n            /(electron)\\/([\\w\\.]+) safari/i,                                    // Electron-based App\n            /(tesla)(?: qtcarbrowser|\\/(20\\d\\d\\.[-\\w\\.]+))/i,                   // Tesla\n            /m?(qqbrowser|baiduboxapp|2345Explorer)[\\/ ]?([\\w\\.]+)/i            // QQBrowser/Baidu App/2345 Browser\n            ], [NAME, VERSION], [\n            /(metasr)[\\/ ]?([\\w\\.]+)/i,                                         // SouGouBrowser\n            /(lbbrowser)/i                                                      // LieBao Browser\n            ], [NAME], [\n\n            // WebView\n            /((?:fban\\/fbios|fb_iab\\/fb4a)(?!.+fbav)|;fbav\\/([\\w\\.]+);)/i       // Facebook App for iOS & Android\n            ], [[NAME, FACEBOOK], VERSION], [\n            /safari (line)\\/([\\w\\.]+)/i,                                        // Line App for iOS\n            /\\b(line)\\/([\\w\\.]+)\\/iab/i,                                        // Line App for Android\n            /(chromium|instagram)[\\/ ]([-\\w\\.]+)/i                              // Chromium/Instagram\n            ], [NAME, VERSION], [\n            /\\bgsa\\/([\\w\\.]+) .*safari\\//i                                      // Google Search Appliance on iOS\n            ], [VERSION, [NAME, 'GSA']], [\n\n            /headlesschrome(?:\\/([\\w\\.]+)| )/i                                  // Chrome Headless\n            ], [VERSION, [NAME, CHROME+' Headless']], [\n\n            / wv\\).+(chrome)\\/([\\w\\.]+)/i                                       // Chrome WebView\n            ], [[NAME, CHROME+' WebView'], VERSION], [\n\n            /droid.+ version\\/([\\w\\.]+)\\b.+(?:mobile safari|safari)/i           // Android Browser\n            ], [VERSION, [NAME, 'Android '+BROWSER]], [\n\n            /(chrome|omniweb|arora|[tizenoka]{5} ?browser)\\/v?([\\w\\.]+)/i       // Chrome/OmniWeb/Arora/Tizen/Nokia\n            ], [NAME, VERSION], [\n\n            /version\\/([\\w\\.]+) .*mobile\\/\\w+ (safari)/i                        // Mobile Safari\n            ], [VERSION, [NAME, 'Mobile Safari']], [\n            /version\\/([\\w\\.]+) .*(mobile ?safari|safari)/i                     // Safari & Safari Mobile\n            ], [VERSION, NAME], [\n            /webkit.+?(mobile ?safari|safari)(\\/[\\w\\.]+)/i                      // Safari < 3.0\n            ], [NAME, [VERSION, strMapper, oldSafariMap]], [\n\n            /(webkit|khtml)\\/([\\w\\.]+)/i\n            ], [NAME, VERSION], [\n\n            // Gecko based\n            /(navigator|netscape\\d?)\\/([-\\w\\.]+)/i                              // Netscape\n            ], [[NAME, 'Netscape'], VERSION], [\n            /mobile vr; rv:([\\w\\.]+)\\).+firefox/i                               // Firefox Reality\n            ], [VERSION, [NAME, FIREFOX+' Reality']], [\n            /ekiohf.+(flow)\\/([\\w\\.]+)/i,                                       // Flow\n            /(swiftfox)/i,                                                      // Swiftfox\n            /(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\\/ ]?([\\w\\.\\+]+)/i,\n                                                                                // IceDragon/Iceweasel/Camino/Chimera/Fennec/Maemo/Minimo/Conkeror/Klar\n            /(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\\/([-\\w\\.]+)$/i,\n                                                                                // Firefox/SeaMonkey/K-Meleon/IceCat/IceApe/Firebird/Phoenix\n            /(firefox)\\/([\\w\\.]+)/i,                                            // Other Firefox-based\n            /(mozilla)\\/([\\w\\.]+) .+rv\\:.+gecko\\/\\d+/i,                         // Mozilla\n\n            // Other\n            /(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\\. ]?browser)[-\\/ ]?v?([\\w\\.]+)/i,\n                                                                                // Polaris/Lynx/Dillo/iCab/Doris/Amaya/w3m/NetSurf/Sleipnir/Obigo/Mosaic/Go/ICE/UP.Browser\n            /(links) \\(([\\w\\.]+)/i                                              // Links\n            ], [NAME, VERSION]\n        ],\n\n        cpu : [[\n\n            /(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\\)]/i                     // AMD64 (x64)\n            ], [[ARCHITECTURE, 'amd64']], [\n\n            /(ia32(?=;))/i                                                      // IA32 (quicktime)\n            ], [[ARCHITECTURE, lowerize]], [\n\n            /((?:i[346]|x)86)[;\\)]/i                                            // IA32 (x86)\n            ], [[ARCHITECTURE, 'ia32']], [\n\n            /\\b(aarch64|arm(v?8e?l?|_?64))\\b/i                                 // ARM64\n            ], [[ARCHITECTURE, 'arm64']], [\n\n            /\\b(arm(?:v[67])?ht?n?[fl]p?)\\b/i                                   // ARMHF\n            ], [[ARCHITECTURE, 'armhf']], [\n\n            // PocketPC mistakenly identified as PowerPC\n            /windows (ce|mobile); ppc;/i\n            ], [[ARCHITECTURE, 'arm']], [\n\n            /((?:ppc|powerpc)(?:64)?)(?: mac|;|\\))/i                            // PowerPC\n            ], [[ARCHITECTURE, /ower/, EMPTY, lowerize]], [\n\n            /(sun4\\w)[;\\)]/i                                                    // SPARC\n            ], [[ARCHITECTURE, 'sparc']], [\n\n            /((?:avr32|ia64(?=;))|68k(?=\\))|\\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\\b|pa-risc)/i\n                                                                                // IA64, 68K, ARM/64, AVR/32, IRIX/64, MIPS/64, SPARC/64, PA-RISC\n            ], [[ARCHITECTURE, lowerize]]\n        ],\n\n        device : [[\n\n            //////////////////////////\n            // MOBILES & TABLETS\n            // Ordered by popularity\n            /////////////////////////\n\n            // Samsung\n            /\\b(sch-i[89]0\\d|shw-m380s|sm-[pt]\\w{2,4}|gt-[pn]\\d{2,4}|sgh-t8[56]9|nexus 10)/i\n            ], [MODEL, [VENDOR, SAMSUNG], [TYPE, TABLET]], [\n            /\\b((?:s[cgp]h|gt|sm)-\\w+|galaxy nexus)/i,\n            /samsung[- ]([-\\w]+)/i,\n            /sec-(sgh\\w+)/i\n            ], [MODEL, [VENDOR, SAMSUNG], [TYPE, MOBILE]], [\n\n            // Apple\n            /\\((ip(?:hone|od)[\\w ]*);/i                                         // iPod/iPhone\n            ], [MODEL, [VENDOR, APPLE], [TYPE, MOBILE]], [\n            /\\((ipad);[-\\w\\),; ]+apple/i,                                       // iPad\n            /applecoremedia\\/[\\w\\.]+ \\((ipad)/i,\n            /\\b(ipad)\\d\\d?,\\d\\d?[;\\]].+ios/i\n            ], [MODEL, [VENDOR, APPLE], [TYPE, TABLET]], [\n\n            // Huawei\n            /\\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\\d{2})\\b(?!.+d\\/s)/i\n            ], [MODEL, [VENDOR, HUAWEI], [TYPE, TABLET]], [\n            /(?:huawei|honor)([-\\w ]+)[;\\)]/i,\n            /\\b(nexus 6p|\\w{2,4}-[atu]?[ln][01259x][012359][an]?)\\b(?!.+d\\/s)/i\n            ], [MODEL, [VENDOR, HUAWEI], [TYPE, MOBILE]], [\n\n            // Xiaomi\n            /\\b(poco[\\w ]+)(?: bui|\\))/i,                                       // Xiaomi POCO\n            /\\b; (\\w+) build\\/hm\\1/i,                                           // Xiaomi Hongmi 'numeric' models\n            /\\b(hm[-_ ]?note?[_ ]?(?:\\d\\w)?) bui/i,                             // Xiaomi Hongmi\n            /\\b(redmi[\\-_ ]?(?:note|k)?[\\w_ ]+)(?: bui|\\))/i,                   // Xiaomi Redmi\n            /\\b(mi[-_ ]?(?:a\\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\\d?\\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\\))/i // Xiaomi Mi\n            ], [[MODEL, /_/g, ' '], [VENDOR, XIAOMI], [TYPE, MOBILE]], [\n            /\\b(mi[-_ ]?(?:pad)(?:[\\w_ ]+))(?: bui|\\))/i                        // Mi Pad tablets\n            ],[[MODEL, /_/g, ' '], [VENDOR, XIAOMI], [TYPE, TABLET]], [\n\n            // OPPO\n            /; (\\w+) bui.+ oppo/i,\n            /\\b(cph[12]\\d{3}|p(?:af|c[al]|d\\w|e[ar])[mt]\\d0|x9007|a101op)\\b/i\n            ], [MODEL, [VENDOR, 'OPPO'], [TYPE, MOBILE]], [\n\n            // Vivo\n            /vivo (\\w+)(?: bui|\\))/i,\n            /\\b(v[12]\\d{3}\\w?[at])(?: bui|;)/i\n            ], [MODEL, [VENDOR, 'Vivo'], [TYPE, MOBILE]], [\n\n            // Realme\n            /\\b(rmx[12]\\d{3})(?: bui|;|\\))/i\n            ], [MODEL, [VENDOR, 'Realme'], [TYPE, MOBILE]], [\n\n            // Motorola\n            /\\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\\b[\\w ]+build\\//i,\n            /\\bmot(?:orola)?[- ](\\w*)/i,\n            /((?:moto[\\w\\(\\) ]+|xt\\d{3,4}|nexus 6)(?= bui|\\)))/i\n            ], [MODEL, [VENDOR, MOTOROLA], [TYPE, MOBILE]], [\n            /\\b(mz60\\d|xoom[2 ]{0,2}) build\\//i\n            ], [MODEL, [VENDOR, MOTOROLA], [TYPE, TABLET]], [\n\n            // LG\n            /((?=lg)?[vl]k\\-?\\d{3}) bui| 3\\.[-\\w; ]{10}lg?-([06cv9]{3,4})/i\n            ], [MODEL, [VENDOR, LG], [TYPE, TABLET]], [\n            /(lm(?:-?f100[nv]?|-[\\w\\.]+)(?= bui|\\))|nexus [45])/i,\n            /\\blg[-e;\\/ ]+((?!browser|netcast|android tv)\\w+)/i,\n            /\\blg-?([\\d\\w]+) bui/i\n            ], [MODEL, [VENDOR, LG], [TYPE, MOBILE]], [\n\n            // Lenovo\n            /(ideatab[-\\w ]+)/i,\n            /lenovo ?(s[56]000[-\\w]+|tab(?:[\\w ]+)|yt[-\\d\\w]{6}|tb[-\\d\\w]{6})/i\n            ], [MODEL, [VENDOR, 'Lenovo'], [TYPE, TABLET]], [\n\n            // Nokia\n            /(?:maemo|nokia).*(n900|lumia \\d+)/i,\n            /nokia[-_ ]?([-\\w\\.]*)/i\n            ], [[MODEL, /_/g, ' '], [VENDOR, 'Nokia'], [TYPE, MOBILE]], [\n\n            // Google\n            /(pixel c)\\b/i                                                      // Google Pixel C\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, TABLET]], [\n            /droid.+; (pixel[\\daxl ]{0,6})(?: bui|\\))/i                         // Google Pixel\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, MOBILE]], [\n\n            // Sony\n            /droid.+ ([c-g]\\d{4}|so[-gl]\\w+|xq-a\\w[4-7][12])(?= bui|\\).+chrome\\/(?![1-6]{0,1}\\d\\.))/i\n            ], [MODEL, [VENDOR, SONY], [TYPE, MOBILE]], [\n            /sony tablet [ps]/i,\n            /\\b(?:sony)?sgp\\w+(?: bui|\\))/i\n            ], [[MODEL, 'Xperia Tablet'], [VENDOR, SONY], [TYPE, TABLET]], [\n\n            // OnePlus\n            / (kb2005|in20[12]5|be20[12][59])\\b/i,\n            /(?:one)?(?:plus)? (a\\d0\\d\\d)(?: b|\\))/i\n            ], [MODEL, [VENDOR, 'OnePlus'], [TYPE, MOBILE]], [\n\n            // Amazon\n            /(alexa)webm/i,\n            /(kf[a-z]{2}wi)( bui|\\))/i,                                         // Kindle Fire without Silk\n            /(kf[a-z]+)( bui|\\)).+silk\\//i                                      // Kindle Fire HD\n            ], [MODEL, [VENDOR, AMAZON], [TYPE, TABLET]], [\n            /((?:sd|kf)[0349hijorstuw]+)( bui|\\)).+silk\\//i                     // Fire Phone\n            ], [[MODEL, /(.+)/g, 'Fire Phone $1'], [VENDOR, AMAZON], [TYPE, MOBILE]], [\n\n            // BlackBerry\n            /(playbook);[-\\w\\),; ]+(rim)/i                                      // BlackBerry PlayBook\n            ], [MODEL, VENDOR, [TYPE, TABLET]], [\n            /\\b((?:bb[a-f]|st[hv])100-\\d)/i,\n            /\\(bb10; (\\w+)/i                                                    // BlackBerry 10\n            ], [MODEL, [VENDOR, BLACKBERRY], [TYPE, MOBILE]], [\n\n            // Asus\n            /(?:\\b|asus_)(transfo[prime ]{4,10} \\w+|eeepc|slider \\w+|nexus 7|padfone|p00[cj])/i\n            ], [MODEL, [VENDOR, ASUS], [TYPE, TABLET]], [\n            / (z[bes]6[027][012][km][ls]|zenfone \\d\\w?)\\b/i\n            ], [MODEL, [VENDOR, ASUS], [TYPE, MOBILE]], [\n\n            // HTC\n            /(nexus 9)/i                                                        // HTC Nexus 9\n            ], [MODEL, [VENDOR, 'HTC'], [TYPE, TABLET]], [\n            /(htc)[-;_ ]{1,2}([\\w ]+(?=\\)| bui)|\\w+)/i,                         // HTC\n\n            // ZTE\n            /(zte)[- ]([\\w ]+?)(?: bui|\\/|\\))/i,\n            /(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\\w]*)/i         // Alcatel/GeeksPhone/Nexian/Panasonic/Sony\n            ], [VENDOR, [MODEL, /_/g, ' '], [TYPE, MOBILE]], [\n\n            // Acer\n            /droid.+; ([ab][1-7]-?[0178a]\\d\\d?)/i\n            ], [MODEL, [VENDOR, 'Acer'], [TYPE, TABLET]], [\n\n            // Meizu\n            /droid.+; (m[1-5] note) bui/i,\n            /\\bmz-([-\\w]{2,})/i\n            ], [MODEL, [VENDOR, 'Meizu'], [TYPE, MOBILE]], [\n\n            // Sharp\n            /\\b(sh-?[altvz]?\\d\\d[a-ekm]?)/i\n            ], [MODEL, [VENDOR, 'Sharp'], [TYPE, MOBILE]], [\n\n            // MIXED\n            /(blackberry|benq|palm(?=\\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\\w]*)/i,\n                                                                                // BlackBerry/BenQ/Palm/Sony-Ericsson/Acer/Asus/Dell/Meizu/Motorola/Polytron\n            /(hp) ([\\w ]+\\w)/i,                                                 // HP iPAQ\n            /(asus)-?(\\w+)/i,                                                   // Asus\n            /(microsoft); (lumia[\\w ]+)/i,                                      // Microsoft Lumia\n            /(lenovo)[-_ ]?([-\\w]+)/i,                                          // Lenovo\n            /(jolla)/i,                                                         // Jolla\n            /(oppo) ?([\\w ]+) bui/i                                             // OPPO\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n\n            /(archos) (gamepad2?)/i,                                            // Archos\n            /(hp).+(touchpad(?!.+tablet)|tablet)/i,                             // HP TouchPad\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n            /(nook)[\\w ]+build\\/(\\w+)/i,                                        // Nook\n            /(dell) (strea[kpr\\d ]*[\\dko])/i,                                   // Dell Streak\n            /(le[- ]+pan)[- ]+(\\w{1,9}) bui/i,                                  // Le Pan Tablets\n            /(trinity)[- ]*(t\\d{3}) bui/i,                                      // Trinity Tablets\n            /(gigaset)[- ]+(q\\w{1,9}) bui/i,                                    // Gigaset Tablets\n            /(vodafone) ([\\w ]+)(?:\\)| bui)/i                                   // Vodafone\n            ], [VENDOR, MODEL, [TYPE, TABLET]], [\n\n            /(surface duo)/i                                                    // Surface Duo\n            ], [MODEL, [VENDOR, MICROSOFT], [TYPE, TABLET]], [\n            /droid [\\d\\.]+; (fp\\du?)(?: b|\\))/i                                 // Fairphone\n            ], [MODEL, [VENDOR, 'Fairphone'], [TYPE, MOBILE]], [\n            /(u304aa)/i                                                         // AT&T\n            ], [MODEL, [VENDOR, 'AT&T'], [TYPE, MOBILE]], [\n            /\\bsie-(\\w*)/i                                                      // Siemens\n            ], [MODEL, [VENDOR, 'Siemens'], [TYPE, MOBILE]], [\n            /\\b(rct\\w+) b/i                                                     // RCA Tablets\n            ], [MODEL, [VENDOR, 'RCA'], [TYPE, TABLET]], [\n            /\\b(venue[\\d ]{2,7}) b/i                                            // Dell Venue Tablets\n            ], [MODEL, [VENDOR, 'Dell'], [TYPE, TABLET]], [\n            /\\b(q(?:mv|ta)\\w+) b/i                                              // Verizon Tablet\n            ], [MODEL, [VENDOR, 'Verizon'], [TYPE, TABLET]], [\n            /\\b(?:barnes[& ]+noble |bn[rt])([\\w\\+ ]*) b/i                       // Barnes & Noble Tablet\n            ], [MODEL, [VENDOR, 'Barnes & Noble'], [TYPE, TABLET]], [\n            /\\b(tm\\d{3}\\w+) b/i\n            ], [MODEL, [VENDOR, 'NuVision'], [TYPE, TABLET]], [\n            /\\b(k88) b/i                                                        // ZTE K Series Tablet\n            ], [MODEL, [VENDOR, 'ZTE'], [TYPE, TABLET]], [\n            /\\b(nx\\d{3}j) b/i                                                   // ZTE Nubia\n            ], [MODEL, [VENDOR, 'ZTE'], [TYPE, MOBILE]], [\n            /\\b(gen\\d{3}) b.+49h/i                                              // Swiss GEN Mobile\n            ], [MODEL, [VENDOR, 'Swiss'], [TYPE, MOBILE]], [\n            /\\b(zur\\d{3}) b/i                                                   // Swiss ZUR Tablet\n            ], [MODEL, [VENDOR, 'Swiss'], [TYPE, TABLET]], [\n            /\\b((zeki)?tb.*\\b) b/i                                              // Zeki Tablets\n            ], [MODEL, [VENDOR, 'Zeki'], [TYPE, TABLET]], [\n            /\\b([yr]\\d{2}) b/i,\n            /\\b(dragon[- ]+touch |dt)(\\w{5}) b/i                                // Dragon Touch Tablet\n            ], [[VENDOR, 'Dragon Touch'], MODEL, [TYPE, TABLET]], [\n            /\\b(ns-?\\w{0,9}) b/i                                                // Insignia Tablets\n            ], [MODEL, [VENDOR, 'Insignia'], [TYPE, TABLET]], [\n            /\\b((nxa|next)-?\\w{0,9}) b/i                                        // NextBook Tablets\n            ], [MODEL, [VENDOR, 'NextBook'], [TYPE, TABLET]], [\n            /\\b(xtreme\\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i                  // Voice Xtreme Phones\n            ], [[VENDOR, 'Voice'], MODEL, [TYPE, MOBILE]], [\n            /\\b(lvtel\\-)?(v1[12]) b/i                                           // LvTel Phones\n            ], [[VENDOR, 'LvTel'], MODEL, [TYPE, MOBILE]], [\n            /\\b(ph-1) /i                                                        // Essential PH-1\n            ], [MODEL, [VENDOR, 'Essential'], [TYPE, MOBILE]], [\n            /\\b(v(100md|700na|7011|917g).*\\b) b/i                               // Envizen Tablets\n            ], [MODEL, [VENDOR, 'Envizen'], [TYPE, TABLET]], [\n            /\\b(trio[-\\w\\. ]+) b/i                                              // MachSpeed Tablets\n            ], [MODEL, [VENDOR, 'MachSpeed'], [TYPE, TABLET]], [\n            /\\btu_(1491) b/i                                                    // Rotor Tablets\n            ], [MODEL, [VENDOR, 'Rotor'], [TYPE, TABLET]], [\n            /(shield[\\w ]+) b/i                                                 // Nvidia Shield Tablets\n            ], [MODEL, [VENDOR, 'Nvidia'], [TYPE, TABLET]], [\n            /(sprint) (\\w+)/i                                                   // Sprint Phones\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n            /(kin\\.[onetw]{3})/i                                                // Microsoft Kin\n            ], [[MODEL, /\\./g, ' '], [VENDOR, MICROSOFT], [TYPE, MOBILE]], [\n            /droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\\)/i             // Zebra\n            ], [MODEL, [VENDOR, ZEBRA], [TYPE, TABLET]], [\n            /droid.+; (ec30|ps20|tc[2-8]\\d[kx])\\)/i\n            ], [MODEL, [VENDOR, ZEBRA], [TYPE, MOBILE]], [\n\n            ///////////////////\n            // CONSOLES\n            ///////////////////\n\n            /(ouya)/i,                                                          // Ouya\n            /(nintendo) ([wids3utch]+)/i                                        // Nintendo\n            ], [VENDOR, MODEL, [TYPE, CONSOLE]], [\n            /droid.+; (shield) bui/i                                            // Nvidia\n            ], [MODEL, [VENDOR, 'Nvidia'], [TYPE, CONSOLE]], [\n            /(playstation [345portablevi]+)/i                                   // Playstation\n            ], [MODEL, [VENDOR, SONY], [TYPE, CONSOLE]], [\n            /\\b(xbox(?: one)?(?!; xbox))[\\); ]/i                                // Microsoft Xbox\n            ], [MODEL, [VENDOR, MICROSOFT], [TYPE, CONSOLE]], [\n\n            ///////////////////\n            // SMARTTVS\n            ///////////////////\n\n            /smart-tv.+(samsung)/i                                              // Samsung\n            ], [VENDOR, [TYPE, SMARTTV]], [\n            /hbbtv.+maple;(\\d+)/i\n            ], [[MODEL, /^/, 'SmartTV'], [VENDOR, SAMSUNG], [TYPE, SMARTTV]], [\n            /(nux; netcast.+smarttv|lg (netcast\\.tv-201\\d|android tv))/i        // LG SmartTV\n            ], [[VENDOR, LG], [TYPE, SMARTTV]], [\n            /(apple) ?tv/i                                                      // Apple TV\n            ], [VENDOR, [MODEL, APPLE+' TV'], [TYPE, SMARTTV]], [\n            /crkey/i                                                            // Google Chromecast\n            ], [[MODEL, CHROME+'cast'], [VENDOR, GOOGLE], [TYPE, SMARTTV]], [\n            /droid.+aft(\\w)( bui|\\))/i                                          // Fire TV\n            ], [MODEL, [VENDOR, AMAZON], [TYPE, SMARTTV]], [\n            /\\(dtv[\\);].+(aquos)/i                                              // Sharp\n            ], [MODEL, [VENDOR, 'Sharp'], [TYPE, SMARTTV]], [\n            /\\b(roku)[\\dx]*[\\)\\/]((?:dvp-)?[\\d\\.]*)/i,                          // Roku\n            /hbbtv\\/\\d+\\.\\d+\\.\\d+ +\\([\\w ]*; *(\\w[^;]*);([^;]*)/i               // HbbTV devices\n            ], [[VENDOR, trim], [MODEL, trim], [TYPE, SMARTTV]], [\n            /\\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\\b/i                   // SmartTV from Unidentified Vendors\n            ], [[TYPE, SMARTTV]], [\n\n            ///////////////////\n            // WEARABLES\n            ///////////////////\n\n            /((pebble))app/i                                                    // Pebble\n            ], [VENDOR, MODEL, [TYPE, WEARABLE]], [\n            /droid.+; (glass) \\d/i                                              // Google Glass\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, WEARABLE]], [\n            /droid.+; (wt63?0{2,3})\\)/i\n            ], [MODEL, [VENDOR, ZEBRA], [TYPE, WEARABLE]], [\n            /(quest( 2)?)/i                                                     // Oculus Quest\n            ], [MODEL, [VENDOR, FACEBOOK], [TYPE, WEARABLE]], [\n\n            ///////////////////\n            // EMBEDDED\n            ///////////////////\n\n            /(tesla)(?: qtcarbrowser|\\/[-\\w\\.]+)/i                              // Tesla\n            ], [VENDOR, [TYPE, EMBEDDED]], [\n\n            ////////////////////\n            // MIXED (GENERIC)\n            ///////////////////\n\n            /droid .+?; ([^;]+?)(?: bui|\\) applew).+? mobile safari/i           // Android Phones from Unidentified Vendors\n            ], [MODEL, [TYPE, MOBILE]], [\n            /droid .+?; ([^;]+?)(?: bui|\\) applew).+?(?! mobile) safari/i       // Android Tablets from Unidentified Vendors\n            ], [MODEL, [TYPE, TABLET]], [\n            /\\b((tablet|tab)[;\\/]|focus\\/\\d(?!.+mobile))/i                      // Unidentifiable Tablet\n            ], [[TYPE, TABLET]], [\n            /(phone|mobile(?:[;\\/]| safari)|pda(?=.+windows ce))/i              // Unidentifiable Mobile\n            ], [[TYPE, MOBILE]], [\n            /(android[-\\w\\. ]{0,9});.+buil/i                                    // Generic Android Device\n            ], [MODEL, [VENDOR, 'Generic']]\n        ],\n\n        engine : [[\n\n            /windows.+ edge\\/([\\w\\.]+)/i                                       // EdgeHTML\n            ], [VERSION, [NAME, EDGE+'HTML']], [\n\n            /webkit\\/537\\.36.+chrome\\/(?!27)([\\w\\.]+)/i                         // Blink\n            ], [VERSION, [NAME, 'Blink']], [\n\n            /(presto)\\/([\\w\\.]+)/i,                                             // Presto\n            /(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\\/([\\w\\.]+)/i, // WebKit/Trident/NetFront/NetSurf/Amaya/Lynx/w3m/Goanna\n            /ekioh(flow)\\/([\\w\\.]+)/i,                                          // Flow\n            /(khtml|tasman|links)[\\/ ]\\(?([\\w\\.]+)/i,                           // KHTML/Tasman/Links\n            /(icab)[\\/ ]([23]\\.[\\d\\.]+)/i                                       // iCab\n            ], [NAME, VERSION], [\n\n            /rv\\:([\\w\\.]{1,9})\\b.+(gecko)/i                                     // Gecko\n            ], [VERSION, NAME]\n        ],\n\n        os : [[\n\n            // Windows\n            /microsoft (windows) (vista|xp)/i                                   // Windows (iTunes)\n            ], [NAME, VERSION], [\n            /(windows) nt 6\\.2; (arm)/i,                                        // Windows RT\n            /(windows (?:phone(?: os)?|mobile))[\\/ ]?([\\d\\.\\w ]*)/i,            // Windows Phone\n            /(windows)[\\/ ]?([ntce\\d\\. ]+\\w)(?!.+xbox)/i\n            ], [NAME, [VERSION, strMapper, windowsVersionMap]], [\n            /(win(?=3|9|n)|win 9x )([nt\\d\\.]+)/i\n            ], [[NAME, 'Windows'], [VERSION, strMapper, windowsVersionMap]], [\n\n            // iOS/macOS\n            /ip[honead]{2,4}\\b(?:.*os ([\\w]+) like mac|; opera)/i,              // iOS\n            /cfnetwork\\/.+darwin/i\n            ], [[VERSION, /_/g, '.'], [NAME, 'iOS']], [\n            /(mac os x) ?([\\w\\. ]*)/i,\n            /(macintosh|mac_powerpc\\b)(?!.+haiku)/i                             // Mac OS\n            ], [[NAME, 'Mac OS'], [VERSION, /_/g, '.']], [\n\n            // Mobile OSes\n            /droid ([\\w\\.]+)\\b.+(android[- ]x86)/i                              // Android-x86\n            ], [VERSION, NAME], [                                               // Android/WebOS/QNX/Bada/RIM/Maemo/MeeGo/Sailfish OS\n            /(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\\/ ]?([\\w\\.]*)/i,\n            /(blackberry)\\w*\\/([\\w\\.]*)/i,                                      // Blackberry\n            /(tizen|kaios)[\\/ ]([\\w\\.]+)/i,                                     // Tizen/KaiOS\n            /\\((series40);/i                                                    // Series 40\n            ], [NAME, VERSION], [\n            /\\(bb(10);/i                                                        // BlackBerry 10\n            ], [VERSION, [NAME, BLACKBERRY]], [\n            /(?:symbian ?os|symbos|s60(?=;)|series60)[-\\/ ]?([\\w\\.]*)/i         // Symbian\n            ], [VERSION, [NAME, 'Symbian']], [\n            /mozilla\\/[\\d\\.]+ \\((?:mobile|tablet|tv|mobile; [\\w ]+); rv:.+ gecko\\/([\\w\\.]+)/i // Firefox OS\n            ], [VERSION, [NAME, FIREFOX+' OS']], [\n            /web0s;.+rt(tv)/i,\n            /\\b(?:hp)?wos(?:browser)?\\/([\\w\\.]+)/i                              // WebOS\n            ], [VERSION, [NAME, 'webOS']], [\n\n            // Google Chromecast\n            /crkey\\/([\\d\\.]+)/i                                                 // Google Chromecast\n            ], [VERSION, [NAME, CHROME+'cast']], [\n            /(cros) [\\w]+ ([\\w\\.]+\\w)/i                                         // Chromium OS\n            ], [[NAME, 'Chromium OS'], VERSION],[\n\n            // Console\n            /(nintendo|playstation) ([wids345portablevuch]+)/i,                 // Nintendo/Playstation\n            /(xbox); +xbox ([^\\);]+)/i,                                         // Microsoft Xbox (360, One, X, S, Series X, Series S)\n\n            // Other\n            /\\b(joli|palm)\\b ?(?:os)?\\/?([\\w\\.]*)/i,                            // Joli/Palm\n            /(mint)[\\/\\(\\) ]?(\\w*)/i,                                           // Mint\n            /(mageia|vectorlinux)[; ]/i,                                        // Mageia/VectorLinux\n            /([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\\/ ]?(?!chrom|package)([-\\w\\.]*)/i,\n                                                                                // Ubuntu/Debian/SUSE/Gentoo/Arch/Slackware/Fedora/Mandriva/CentOS/PCLinuxOS/RedHat/Zenwalk/Linpus/Raspbian/Plan9/Minix/RISCOS/Contiki/Deepin/Manjaro/elementary/Sabayon/Linspire\n            /(hurd|linux) ?([\\w\\.]*)/i,                                         // Hurd/Linux\n            /(gnu) ?([\\w\\.]*)/i,                                                // GNU\n            /\\b([-frentopcghs]{0,5}bsd|dragonfly)[\\/ ]?(?!amd|[ix346]{1,2}86)([\\w\\.]*)/i, // FreeBSD/NetBSD/OpenBSD/PC-BSD/GhostBSD/DragonFly\n            /(haiku) (\\w+)/i                                                    // Haiku\n            ], [NAME, VERSION], [\n            /(sunos) ?([\\w\\.\\d]*)/i                                             // Solaris\n            ], [[NAME, 'Solaris'], VERSION], [\n            /((?:open)?solaris)[-\\/ ]?([\\w\\.]*)/i,                              // Solaris\n            /(aix) ((\\d)(?=\\.|\\)| )[\\w\\.])*/i,                                  // AIX\n            /\\b(beos|os\\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,            // BeOS/OS2/AmigaOS/MorphOS/OpenVMS/Fuchsia/HP-UX\n            /(unix) ?([\\w\\.]*)/i                                                // UNIX\n            ], [NAME, VERSION]\n        ]\n    };\n\n    /////////////////\n    // Constructor\n    ////////////////\n\n    var UAParser = function (ua, extensions) {\n\n        if (typeof ua === OBJ_TYPE) {\n            extensions = ua;\n            ua = undefined;\n        }\n\n        if (!(this instanceof UAParser)) {\n            return new UAParser(ua, extensions).getResult();\n        }\n\n        var _ua = ua || ((typeof window !== UNDEF_TYPE && window.navigator && window.navigator.userAgent) ? window.navigator.userAgent : EMPTY);\n        var _rgxmap = extensions ? extend(regexes, extensions) : regexes;\n\n        this.getBrowser = function () {\n            var _browser = {};\n            _browser[NAME] = undefined;\n            _browser[VERSION] = undefined;\n            rgxMapper.call(_browser, _ua, _rgxmap.browser);\n            _browser.major = majorize(_browser.version);\n            return _browser;\n        };\n        this.getCPU = function () {\n            var _cpu = {};\n            _cpu[ARCHITECTURE] = undefined;\n            rgxMapper.call(_cpu, _ua, _rgxmap.cpu);\n            return _cpu;\n        };\n        this.getDevice = function () {\n            var _device = {};\n            _device[VENDOR] = undefined;\n            _device[MODEL] = undefined;\n            _device[TYPE] = undefined;\n            rgxMapper.call(_device, _ua, _rgxmap.device);\n            return _device;\n        };\n        this.getEngine = function () {\n            var _engine = {};\n            _engine[NAME] = undefined;\n            _engine[VERSION] = undefined;\n            rgxMapper.call(_engine, _ua, _rgxmap.engine);\n            return _engine;\n        };\n        this.getOS = function () {\n            var _os = {};\n            _os[NAME] = undefined;\n            _os[VERSION] = undefined;\n            rgxMapper.call(_os, _ua, _rgxmap.os);\n            return _os;\n        };\n        this.getResult = function () {\n            return {\n                ua      : this.getUA(),\n                browser : this.getBrowser(),\n                engine  : this.getEngine(),\n                os      : this.getOS(),\n                device  : this.getDevice(),\n                cpu     : this.getCPU()\n            };\n        };\n        this.getUA = function () {\n            return _ua;\n        };\n        this.setUA = function (ua) {\n            _ua = (typeof ua === STR_TYPE && ua.length > UA_MAX_LENGTH) ? trim(ua, UA_MAX_LENGTH) : ua;\n            return this;\n        };\n        this.setUA(_ua);\n        return this;\n    };\n\n    UAParser.VERSION = LIBVERSION;\n    UAParser.BROWSER =  enumerize([NAME, VERSION, MAJOR]);\n    UAParser.CPU = enumerize([ARCHITECTURE]);\n    UAParser.DEVICE = enumerize([MODEL, VENDOR, TYPE, CONSOLE, MOBILE, SMARTTV, TABLET, WEARABLE, EMBEDDED]);\n    UAParser.ENGINE = UAParser.OS = enumerize([NAME, VERSION]);\n\n    ///////////\n    // Export\n    //////////\n\n    // check js environment\n    if (typeof(exports) !== UNDEF_TYPE) {\n        // nodejs env\n        if (\"object\" !== UNDEF_TYPE && module.exports) {\n            exports = module.exports = UAParser;\n        }\n        exports.UAParser = UAParser;\n    } else {\n        // requirejs env (optional)\n        if (\"function\" === FUNC_TYPE && __webpack_require__.amdO) {\n            !(__WEBPACK_AMD_DEFINE_RESULT__ = (function () {\n                return UAParser;\n            }).call(exports, __webpack_require__, exports, module),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n        } else if (typeof window !== UNDEF_TYPE) {\n            // browser env\n            window.UAParser = UAParser;\n        }\n    }\n\n    // jQuery/Zepto specific (optional)\n    // Note:\n    //   In AMD env the global scope should be kept clean, but jQuery is an exception.\n    //   jQuery always exports to global scope, unless jQuery.noConflict(true) is used,\n    //   and we should catch that.\n    var $ = typeof window !== UNDEF_TYPE && (window.jQuery || window.Zepto);\n    if ($ && !$.ua) {\n        var parser = new UAParser();\n        $.ua = parser.getResult();\n        $.ua.get = function () {\n            return parser.getUA();\n        };\n        $.ua.set = function (ua) {\n            parser.setUA(ua);\n            var result = parser.getResult();\n            for (var prop in result) {\n                $.ua[prop] = result[prop];\n            }\n        };\n    }\n\n})(typeof window === 'object' ? window : this);\n\n\n//# sourceURL=webpack://100-ms-demo/./node_modules/ua-parser-js/src/ua-parser.js?");

/***/ }),

/***/ "./node_modules/uuid/dist/esm-browser/regex.js":
/*!*****************************************************!*\
  !*** ./node_modules/uuid/dist/esm-browser/regex.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i);\n\n//# sourceURL=webpack://100-ms-demo/./node_modules/uuid/dist/esm-browser/regex.js?");

/***/ }),

/***/ "./node_modules/uuid/dist/esm-browser/rng.js":
/*!***************************************************!*\
  !*** ./node_modules/uuid/dist/esm-browser/rng.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ rng)\n/* harmony export */ });\n// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nfunction rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n    // find the complete implementation of crypto (msCrypto) on IE11.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}\n\n//# sourceURL=webpack://100-ms-demo/./node_modules/uuid/dist/esm-browser/rng.js?");

/***/ }),

/***/ "./node_modules/uuid/dist/esm-browser/stringify.js":
/*!*********************************************************!*\
  !*** ./node_modules/uuid/dist/esm-browser/stringify.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _validate_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./validate.js */ \"./node_modules/uuid/dist/esm-browser/validate.js\");\n\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!(0,_validate_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (stringify);\n\n//# sourceURL=webpack://100-ms-demo/./node_modules/uuid/dist/esm-browser/stringify.js?");

/***/ }),

/***/ "./node_modules/uuid/dist/esm-browser/v4.js":
/*!**************************************************!*\
  !*** ./node_modules/uuid/dist/esm-browser/v4.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _rng_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./rng.js */ \"./node_modules/uuid/dist/esm-browser/rng.js\");\n/* harmony import */ var _stringify_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./stringify.js */ \"./node_modules/uuid/dist/esm-browser/stringify.js\");\n\n\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || _rng_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return (0,_stringify_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(rnds);\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (v4);\n\n//# sourceURL=webpack://100-ms-demo/./node_modules/uuid/dist/esm-browser/v4.js?");

/***/ }),

/***/ "./node_modules/uuid/dist/esm-browser/validate.js":
/*!********************************************************!*\
  !*** ./node_modules/uuid/dist/esm-browser/validate.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _regex_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./regex.js */ \"./node_modules/uuid/dist/esm-browser/regex.js\");\n\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && _regex_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].test(uuid);\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (validate);\n\n//# sourceURL=webpack://100-ms-demo/./node_modules/uuid/dist/esm-browser/validate.js?");

/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/adapter_core.js":
/*!************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/adapter_core.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _adapter_factory_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./adapter_factory.js */ \"./node_modules/webrtc-adapter/src/js/adapter_factory.js\");\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n\n\n\n\n\nconst adapter =\n  (0,_adapter_factory_js__WEBPACK_IMPORTED_MODULE_0__.adapterFactory)({window: typeof window === 'undefined' ? undefined : window});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (adapter);\n\n\n//# sourceURL=webpack://100-ms-demo/./node_modules/webrtc-adapter/src/js/adapter_core.js?");

/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/adapter_factory.js":
/*!***************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/adapter_factory.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"adapterFactory\": () => (/* binding */ adapterFactory)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils */ \"./node_modules/webrtc-adapter/src/js/utils.js\");\n/* harmony import */ var _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chrome/chrome_shim */ \"./node_modules/webrtc-adapter/src/js/chrome/chrome_shim.js\");\n/* harmony import */ var _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./firefox/firefox_shim */ \"./node_modules/webrtc-adapter/src/js/firefox/firefox_shim.js\");\n/* harmony import */ var _safari_safari_shim__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./safari/safari_shim */ \"./node_modules/webrtc-adapter/src/js/safari/safari_shim.js\");\n/* harmony import */ var _common_shim__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./common_shim */ \"./node_modules/webrtc-adapter/src/js/common_shim.js\");\n/* harmony import */ var sdp__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! sdp */ \"./node_modules/sdp/sdp.js\");\n/* harmony import */ var sdp__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(sdp__WEBPACK_IMPORTED_MODULE_5__);\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n\n\n  // Browser shims.\n\n\n\n\n\n\n// Shimming starts here.\nfunction adapterFactory({window} = {}, options = {\n  shimChrome: true,\n  shimFirefox: true,\n  shimSafari: true,\n}) {\n  // Utils.\n  const logging = _utils__WEBPACK_IMPORTED_MODULE_0__.log;\n  const browserDetails = _utils__WEBPACK_IMPORTED_MODULE_0__.detectBrowser(window);\n\n  const adapter = {\n    browserDetails,\n    commonShim: _common_shim__WEBPACK_IMPORTED_MODULE_4__,\n    extractVersion: _utils__WEBPACK_IMPORTED_MODULE_0__.extractVersion,\n    disableLog: _utils__WEBPACK_IMPORTED_MODULE_0__.disableLog,\n    disableWarnings: _utils__WEBPACK_IMPORTED_MODULE_0__.disableWarnings,\n    // Expose sdp as a convenience. For production apps include directly.\n    sdp: sdp__WEBPACK_IMPORTED_MODULE_5__,\n  };\n\n  // Shim browser if found.\n  switch (browserDetails.browser) {\n    case 'chrome':\n      if (!_chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__ || !_chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__.shimPeerConnection ||\n          !options.shimChrome) {\n        logging('Chrome shim is not included in this adapter release.');\n        return adapter;\n      }\n      if (browserDetails.version === null) {\n        logging('Chrome shim can not determine version, not shimming.');\n        return adapter;\n      }\n      logging('adapter.js shimming chrome.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__;\n\n      // Must be called before shimPeerConnection.\n      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimAddIceCandidateNullOrEmpty(window, browserDetails);\n      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimParameterlessSetLocalDescription(window, browserDetails);\n\n      _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__.shimGetUserMedia(window, browserDetails);\n      _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__.shimMediaStream(window, browserDetails);\n      _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__.shimPeerConnection(window, browserDetails);\n      _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__.shimOnTrack(window, browserDetails);\n      _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__.shimAddTrackRemoveTrack(window, browserDetails);\n      _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__.shimGetSendersWithDtmf(window, browserDetails);\n      _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__.shimGetStats(window, browserDetails);\n      _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__.shimSenderReceiverGetStats(window, browserDetails);\n      _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__.fixNegotiationNeeded(window, browserDetails);\n\n      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimRTCIceCandidate(window, browserDetails);\n      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimConnectionState(window, browserDetails);\n      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimMaxMessageSize(window, browserDetails);\n      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimSendThrowTypeError(window, browserDetails);\n      _common_shim__WEBPACK_IMPORTED_MODULE_4__.removeExtmapAllowMixed(window, browserDetails);\n      break;\n    case 'firefox':\n      if (!_firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__ || !_firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__.shimPeerConnection ||\n          !options.shimFirefox) {\n        logging('Firefox shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming firefox.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__;\n\n      // Must be called before shimPeerConnection.\n      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimAddIceCandidateNullOrEmpty(window, browserDetails);\n      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimParameterlessSetLocalDescription(window, browserDetails);\n\n      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__.shimGetUserMedia(window, browserDetails);\n      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__.shimPeerConnection(window, browserDetails);\n      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__.shimOnTrack(window, browserDetails);\n      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__.shimRemoveStream(window, browserDetails);\n      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__.shimSenderGetStats(window, browserDetails);\n      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__.shimReceiverGetStats(window, browserDetails);\n      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__.shimRTCDataChannel(window, browserDetails);\n      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__.shimAddTransceiver(window, browserDetails);\n      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__.shimGetParameters(window, browserDetails);\n      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__.shimCreateOffer(window, browserDetails);\n      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__.shimCreateAnswer(window, browserDetails);\n\n      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimRTCIceCandidate(window, browserDetails);\n      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimConnectionState(window, browserDetails);\n      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimMaxMessageSize(window, browserDetails);\n      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimSendThrowTypeError(window, browserDetails);\n      break;\n    case 'safari':\n      if (!_safari_safari_shim__WEBPACK_IMPORTED_MODULE_3__ || !options.shimSafari) {\n        logging('Safari shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming safari.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = _safari_safari_shim__WEBPACK_IMPORTED_MODULE_3__;\n\n      // Must be called before shimCallbackAPI.\n      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimAddIceCandidateNullOrEmpty(window, browserDetails);\n      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimParameterlessSetLocalDescription(window, browserDetails);\n\n      _safari_safari_shim__WEBPACK_IMPORTED_MODULE_3__.shimRTCIceServerUrls(window, browserDetails);\n      _safari_safari_shim__WEBPACK_IMPORTED_MODULE_3__.shimCreateOfferLegacy(window, browserDetails);\n      _safari_safari_shim__WEBPACK_IMPORTED_MODULE_3__.shimCallbacksAPI(window, browserDetails);\n      _safari_safari_shim__WEBPACK_IMPORTED_MODULE_3__.shimLocalStreamsAPI(window, browserDetails);\n      _safari_safari_shim__WEBPACK_IMPORTED_MODULE_3__.shimRemoteStreamsAPI(window, browserDetails);\n      _safari_safari_shim__WEBPACK_IMPORTED_MODULE_3__.shimTrackEventTransceiver(window, browserDetails);\n      _safari_safari_shim__WEBPACK_IMPORTED_MODULE_3__.shimGetUserMedia(window, browserDetails);\n      _safari_safari_shim__WEBPACK_IMPORTED_MODULE_3__.shimAudioContext(window, browserDetails);\n\n      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimRTCIceCandidate(window, browserDetails);\n      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimMaxMessageSize(window, browserDetails);\n      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimSendThrowTypeError(window, browserDetails);\n      _common_shim__WEBPACK_IMPORTED_MODULE_4__.removeExtmapAllowMixed(window, browserDetails);\n      break;\n    default:\n      logging('Unsupported browser!');\n      break;\n  }\n\n  return adapter;\n}\n\n\n//# sourceURL=webpack://100-ms-demo/./node_modules/webrtc-adapter/src/js/adapter_factory.js?");

/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/chrome/chrome_shim.js":
/*!******************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/chrome/chrome_shim.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"fixNegotiationNeeded\": () => (/* binding */ fixNegotiationNeeded),\n/* harmony export */   \"shimAddTrackRemoveTrack\": () => (/* binding */ shimAddTrackRemoveTrack),\n/* harmony export */   \"shimAddTrackRemoveTrackWithNative\": () => (/* binding */ shimAddTrackRemoveTrackWithNative),\n/* harmony export */   \"shimGetDisplayMedia\": () => (/* reexport safe */ _getdisplaymedia__WEBPACK_IMPORTED_MODULE_2__.shimGetDisplayMedia),\n/* harmony export */   \"shimGetSendersWithDtmf\": () => (/* binding */ shimGetSendersWithDtmf),\n/* harmony export */   \"shimGetStats\": () => (/* binding */ shimGetStats),\n/* harmony export */   \"shimGetUserMedia\": () => (/* reexport safe */ _getusermedia__WEBPACK_IMPORTED_MODULE_1__.shimGetUserMedia),\n/* harmony export */   \"shimMediaStream\": () => (/* binding */ shimMediaStream),\n/* harmony export */   \"shimOnTrack\": () => (/* binding */ shimOnTrack),\n/* harmony export */   \"shimPeerConnection\": () => (/* binding */ shimPeerConnection),\n/* harmony export */   \"shimSenderReceiverGetStats\": () => (/* binding */ shimSenderReceiverGetStats)\n/* harmony export */ });\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils.js */ \"./node_modules/webrtc-adapter/src/js/utils.js\");\n/* harmony import */ var _getusermedia__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getusermedia */ \"./node_modules/webrtc-adapter/src/js/chrome/getusermedia.js\");\n/* harmony import */ var _getdisplaymedia__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./getdisplaymedia */ \"./node_modules/webrtc-adapter/src/js/chrome/getdisplaymedia.js\");\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n\n\n\n\n\n\nfunction shimMediaStream(window) {\n  window.MediaStream = window.MediaStream || window.webkitMediaStream;\n}\n\nfunction shimOnTrack(window) {\n  if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n      window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n      get() {\n        return this._ontrack;\n      },\n      set(f) {\n        if (this._ontrack) {\n          this.removeEventListener('track', this._ontrack);\n        }\n        this.addEventListener('track', this._ontrack = f);\n      },\n      enumerable: true,\n      configurable: true\n    });\n    const origSetRemoteDescription =\n        window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription =\n      function setRemoteDescription() {\n        if (!this._ontrackpoly) {\n          this._ontrackpoly = (e) => {\n            // onaddstream does not fire when a track is added to an existing\n            // stream. But stream.onaddtrack is implemented so we use that.\n            e.stream.addEventListener('addtrack', te => {\n              let receiver;\n              if (window.RTCPeerConnection.prototype.getReceivers) {\n                receiver = this.getReceivers()\n                  .find(r => r.track && r.track.id === te.track.id);\n              } else {\n                receiver = {track: te.track};\n              }\n\n              const event = new Event('track');\n              event.track = te.track;\n              event.receiver = receiver;\n              event.transceiver = {receiver};\n              event.streams = [e.stream];\n              this.dispatchEvent(event);\n            });\n            e.stream.getTracks().forEach(track => {\n              let receiver;\n              if (window.RTCPeerConnection.prototype.getReceivers) {\n                receiver = this.getReceivers()\n                  .find(r => r.track && r.track.id === track.id);\n              } else {\n                receiver = {track};\n              }\n              const event = new Event('track');\n              event.track = track;\n              event.receiver = receiver;\n              event.transceiver = {receiver};\n              event.streams = [e.stream];\n              this.dispatchEvent(event);\n            });\n          };\n          this.addEventListener('addstream', this._ontrackpoly);\n        }\n        return origSetRemoteDescription.apply(this, arguments);\n      };\n  } else {\n    // even if RTCRtpTransceiver is in window, it is only used and\n    // emitted in unified-plan. Unfortunately this means we need\n    // to unconditionally wrap the event.\n    _utils_js__WEBPACK_IMPORTED_MODULE_0__.wrapPeerConnectionEvent(window, 'track', e => {\n      if (!e.transceiver) {\n        Object.defineProperty(e, 'transceiver',\n          {value: {receiver: e.receiver}});\n      }\n      return e;\n    });\n  }\n}\n\nfunction shimGetSendersWithDtmf(window) {\n  // Overrides addTrack/removeTrack, depends on shimAddTrackRemoveTrack.\n  if (typeof window === 'object' && window.RTCPeerConnection &&\n      !('getSenders' in window.RTCPeerConnection.prototype) &&\n      'createDTMFSender' in window.RTCPeerConnection.prototype) {\n    const shimSenderWithDtmf = function(pc, track) {\n      return {\n        track,\n        get dtmf() {\n          if (this._dtmf === undefined) {\n            if (track.kind === 'audio') {\n              this._dtmf = pc.createDTMFSender(track);\n            } else {\n              this._dtmf = null;\n            }\n          }\n          return this._dtmf;\n        },\n        _pc: pc\n      };\n    };\n\n    // augment addTrack when getSenders is not available.\n    if (!window.RTCPeerConnection.prototype.getSenders) {\n      window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n        this._senders = this._senders || [];\n        return this._senders.slice(); // return a copy of the internal state.\n      };\n      const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n      window.RTCPeerConnection.prototype.addTrack =\n        function addTrack(track, stream) {\n          let sender = origAddTrack.apply(this, arguments);\n          if (!sender) {\n            sender = shimSenderWithDtmf(this, track);\n            this._senders.push(sender);\n          }\n          return sender;\n        };\n\n      const origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n      window.RTCPeerConnection.prototype.removeTrack =\n        function removeTrack(sender) {\n          origRemoveTrack.apply(this, arguments);\n          const idx = this._senders.indexOf(sender);\n          if (idx !== -1) {\n            this._senders.splice(idx, 1);\n          }\n        };\n    }\n    const origAddStream = window.RTCPeerConnection.prototype.addStream;\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      this._senders = this._senders || [];\n      origAddStream.apply(this, [stream]);\n      stream.getTracks().forEach(track => {\n        this._senders.push(shimSenderWithDtmf(this, track));\n      });\n    };\n\n    const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n    window.RTCPeerConnection.prototype.removeStream =\n      function removeStream(stream) {\n        this._senders = this._senders || [];\n        origRemoveStream.apply(this, [stream]);\n\n        stream.getTracks().forEach(track => {\n          const sender = this._senders.find(s => s.track === track);\n          if (sender) { // remove sender\n            this._senders.splice(this._senders.indexOf(sender), 1);\n          }\n        });\n      };\n  } else if (typeof window === 'object' && window.RTCPeerConnection &&\n             'getSenders' in window.RTCPeerConnection.prototype &&\n             'createDTMFSender' in window.RTCPeerConnection.prototype &&\n             window.RTCRtpSender &&\n             !('dtmf' in window.RTCRtpSender.prototype)) {\n    const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n    window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n      const senders = origGetSenders.apply(this, []);\n      senders.forEach(sender => sender._pc = this);\n      return senders;\n    };\n\n    Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n      get() {\n        if (this._dtmf === undefined) {\n          if (this.track.kind === 'audio') {\n            this._dtmf = this._pc.createDTMFSender(this.track);\n          } else {\n            this._dtmf = null;\n          }\n        }\n        return this._dtmf;\n      }\n    });\n  }\n}\n\nfunction shimGetStats(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  const origGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    const [selector, onSucc, onErr] = arguments;\n\n    // If selector is a function then we are in the old style stats so just\n    // pass back the original getStats format to avoid breaking old users.\n    if (arguments.length > 0 && typeof selector === 'function') {\n      return origGetStats.apply(this, arguments);\n    }\n\n    // When spec-style getStats is supported, return those when called with\n    // either no arguments or the selector argument is null.\n    if (origGetStats.length === 0 && (arguments.length === 0 ||\n        typeof selector !== 'function')) {\n      return origGetStats.apply(this, []);\n    }\n\n    const fixChromeStats_ = function(response) {\n      const standardReport = {};\n      const reports = response.result();\n      reports.forEach(report => {\n        const standardStats = {\n          id: report.id,\n          timestamp: report.timestamp,\n          type: {\n            localcandidate: 'local-candidate',\n            remotecandidate: 'remote-candidate'\n          }[report.type] || report.type\n        };\n        report.names().forEach(name => {\n          standardStats[name] = report.stat(name);\n        });\n        standardReport[standardStats.id] = standardStats;\n      });\n\n      return standardReport;\n    };\n\n    // shim getStats with maplike support\n    const makeMapStats = function(stats) {\n      return new Map(Object.keys(stats).map(key => [key, stats[key]]));\n    };\n\n    if (arguments.length >= 2) {\n      const successCallbackWrapper_ = function(response) {\n        onSucc(makeMapStats(fixChromeStats_(response)));\n      };\n\n      return origGetStats.apply(this, [successCallbackWrapper_,\n        selector]);\n    }\n\n    // promise-support\n    return new Promise((resolve, reject) => {\n      origGetStats.apply(this, [\n        function(response) {\n          resolve(makeMapStats(fixChromeStats_(response)));\n        }, reject]);\n    }).then(onSucc, onErr);\n  };\n}\n\nfunction shimSenderReceiverGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender && window.RTCRtpReceiver)) {\n    return;\n  }\n\n  // shim sender stats.\n  if (!('getStats' in window.RTCRtpSender.prototype)) {\n    const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n    if (origGetSenders) {\n      window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n        const senders = origGetSenders.apply(this, []);\n        senders.forEach(sender => sender._pc = this);\n        return senders;\n      };\n    }\n\n    const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n    if (origAddTrack) {\n      window.RTCPeerConnection.prototype.addTrack = function addTrack() {\n        const sender = origAddTrack.apply(this, arguments);\n        sender._pc = this;\n        return sender;\n      };\n    }\n    window.RTCRtpSender.prototype.getStats = function getStats() {\n      const sender = this;\n      return this._pc.getStats().then(result =>\n        /* Note: this will include stats of all senders that\n         *   send a track with the same id as sender.track as\n         *   it is not possible to identify the RTCRtpSender.\n         */\n        _utils_js__WEBPACK_IMPORTED_MODULE_0__.filterStats(result, sender.track, true));\n    };\n  }\n\n  // shim receiver stats.\n  if (!('getStats' in window.RTCRtpReceiver.prototype)) {\n    const origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n    if (origGetReceivers) {\n      window.RTCPeerConnection.prototype.getReceivers =\n        function getReceivers() {\n          const receivers = origGetReceivers.apply(this, []);\n          receivers.forEach(receiver => receiver._pc = this);\n          return receivers;\n        };\n    }\n    _utils_js__WEBPACK_IMPORTED_MODULE_0__.wrapPeerConnectionEvent(window, 'track', e => {\n      e.receiver._pc = e.srcElement;\n      return e;\n    });\n    window.RTCRtpReceiver.prototype.getStats = function getStats() {\n      const receiver = this;\n      return this._pc.getStats().then(result =>\n        _utils_js__WEBPACK_IMPORTED_MODULE_0__.filterStats(result, receiver.track, false));\n    };\n  }\n\n  if (!('getStats' in window.RTCRtpSender.prototype &&\n      'getStats' in window.RTCRtpReceiver.prototype)) {\n    return;\n  }\n\n  // shim RTCPeerConnection.getStats(track).\n  const origGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    if (arguments.length > 0 &&\n        arguments[0] instanceof window.MediaStreamTrack) {\n      const track = arguments[0];\n      let sender;\n      let receiver;\n      let err;\n      this.getSenders().forEach(s => {\n        if (s.track === track) {\n          if (sender) {\n            err = true;\n          } else {\n            sender = s;\n          }\n        }\n      });\n      this.getReceivers().forEach(r => {\n        if (r.track === track) {\n          if (receiver) {\n            err = true;\n          } else {\n            receiver = r;\n          }\n        }\n        return r.track === track;\n      });\n      if (err || (sender && receiver)) {\n        return Promise.reject(new DOMException(\n          'There are more than one sender or receiver for the track.',\n          'InvalidAccessError'));\n      } else if (sender) {\n        return sender.getStats();\n      } else if (receiver) {\n        return receiver.getStats();\n      }\n      return Promise.reject(new DOMException(\n        'There is no sender or receiver for the track.',\n        'InvalidAccessError'));\n    }\n    return origGetStats.apply(this, arguments);\n  };\n}\n\nfunction shimAddTrackRemoveTrackWithNative(window) {\n  // shim addTrack/removeTrack with native variants in order to make\n  // the interactions with legacy getLocalStreams behave as in other browsers.\n  // Keeps a mapping stream.id => [stream, rtpsenders...]\n  window.RTCPeerConnection.prototype.getLocalStreams =\n    function getLocalStreams() {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      return Object.keys(this._shimmedLocalStreams)\n        .map(streamId => this._shimmedLocalStreams[streamId][0]);\n    };\n\n  const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n  window.RTCPeerConnection.prototype.addTrack =\n    function addTrack(track, stream) {\n      if (!stream) {\n        return origAddTrack.apply(this, arguments);\n      }\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n      const sender = origAddTrack.apply(this, arguments);\n      if (!this._shimmedLocalStreams[stream.id]) {\n        this._shimmedLocalStreams[stream.id] = [stream, sender];\n      } else if (this._shimmedLocalStreams[stream.id].indexOf(sender) === -1) {\n        this._shimmedLocalStreams[stream.id].push(sender);\n      }\n      return sender;\n    };\n\n  const origAddStream = window.RTCPeerConnection.prototype.addStream;\n  window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n    stream.getTracks().forEach(track => {\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n            'InvalidAccessError');\n      }\n    });\n    const existingSenders = this.getSenders();\n    origAddStream.apply(this, arguments);\n    const newSenders = this.getSenders()\n      .filter(newSender => existingSenders.indexOf(newSender) === -1);\n    this._shimmedLocalStreams[stream.id] = [stream].concat(newSenders);\n  };\n\n  const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n  window.RTCPeerConnection.prototype.removeStream =\n    function removeStream(stream) {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      delete this._shimmedLocalStreams[stream.id];\n      return origRemoveStream.apply(this, arguments);\n    };\n\n  const origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n  window.RTCPeerConnection.prototype.removeTrack =\n    function removeTrack(sender) {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      if (sender) {\n        Object.keys(this._shimmedLocalStreams).forEach(streamId => {\n          const idx = this._shimmedLocalStreams[streamId].indexOf(sender);\n          if (idx !== -1) {\n            this._shimmedLocalStreams[streamId].splice(idx, 1);\n          }\n          if (this._shimmedLocalStreams[streamId].length === 1) {\n            delete this._shimmedLocalStreams[streamId];\n          }\n        });\n      }\n      return origRemoveTrack.apply(this, arguments);\n    };\n}\n\nfunction shimAddTrackRemoveTrack(window, browserDetails) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  // shim addTrack and removeTrack.\n  if (window.RTCPeerConnection.prototype.addTrack &&\n      browserDetails.version >= 65) {\n    return shimAddTrackRemoveTrackWithNative(window);\n  }\n\n  // also shim pc.getLocalStreams when addTrack is shimmed\n  // to return the original streams.\n  const origGetLocalStreams = window.RTCPeerConnection.prototype\n      .getLocalStreams;\n  window.RTCPeerConnection.prototype.getLocalStreams =\n    function getLocalStreams() {\n      const nativeStreams = origGetLocalStreams.apply(this);\n      this._reverseStreams = this._reverseStreams || {};\n      return nativeStreams.map(stream => this._reverseStreams[stream.id]);\n    };\n\n  const origAddStream = window.RTCPeerConnection.prototype.addStream;\n  window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n    this._streams = this._streams || {};\n    this._reverseStreams = this._reverseStreams || {};\n\n    stream.getTracks().forEach(track => {\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n            'InvalidAccessError');\n      }\n    });\n    // Add identity mapping for consistency with addTrack.\n    // Unless this is being used with a stream from addTrack.\n    if (!this._reverseStreams[stream.id]) {\n      const newStream = new window.MediaStream(stream.getTracks());\n      this._streams[stream.id] = newStream;\n      this._reverseStreams[newStream.id] = stream;\n      stream = newStream;\n    }\n    origAddStream.apply(this, [stream]);\n  };\n\n  const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n  window.RTCPeerConnection.prototype.removeStream =\n    function removeStream(stream) {\n      this._streams = this._streams || {};\n      this._reverseStreams = this._reverseStreams || {};\n\n      origRemoveStream.apply(this, [(this._streams[stream.id] || stream)]);\n      delete this._reverseStreams[(this._streams[stream.id] ?\n          this._streams[stream.id].id : stream.id)];\n      delete this._streams[stream.id];\n    };\n\n  window.RTCPeerConnection.prototype.addTrack =\n    function addTrack(track, stream) {\n      if (this.signalingState === 'closed') {\n        throw new DOMException(\n          'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n          'InvalidStateError');\n      }\n      const streams = [].slice.call(arguments, 1);\n      if (streams.length !== 1 ||\n          !streams[0].getTracks().find(t => t === track)) {\n        // this is not fully correct but all we can manage without\n        // [[associated MediaStreams]] internal slot.\n        throw new DOMException(\n          'The adapter.js addTrack polyfill only supports a single ' +\n          ' stream which is associated with the specified track.',\n          'NotSupportedError');\n      }\n\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n            'InvalidAccessError');\n      }\n\n      this._streams = this._streams || {};\n      this._reverseStreams = this._reverseStreams || {};\n      const oldStream = this._streams[stream.id];\n      if (oldStream) {\n        // this is using odd Chrome behaviour, use with caution:\n        // https://bugs.chromium.org/p/webrtc/issues/detail?id=7815\n        // Note: we rely on the high-level addTrack/dtmf shim to\n        // create the sender with a dtmf sender.\n        oldStream.addTrack(track);\n\n        // Trigger ONN async.\n        Promise.resolve().then(() => {\n          this.dispatchEvent(new Event('negotiationneeded'));\n        });\n      } else {\n        const newStream = new window.MediaStream([track]);\n        this._streams[stream.id] = newStream;\n        this._reverseStreams[newStream.id] = stream;\n        this.addStream(newStream);\n      }\n      return this.getSenders().find(s => s.track === track);\n    };\n\n  // replace the internal stream id with the external one and\n  // vice versa.\n  function replaceInternalStreamId(pc, description) {\n    let sdp = description.sdp;\n    Object.keys(pc._reverseStreams || []).forEach(internalId => {\n      const externalStream = pc._reverseStreams[internalId];\n      const internalStream = pc._streams[externalStream.id];\n      sdp = sdp.replace(new RegExp(internalStream.id, 'g'),\n          externalStream.id);\n    });\n    return new RTCSessionDescription({\n      type: description.type,\n      sdp\n    });\n  }\n  function replaceExternalStreamId(pc, description) {\n    let sdp = description.sdp;\n    Object.keys(pc._reverseStreams || []).forEach(internalId => {\n      const externalStream = pc._reverseStreams[internalId];\n      const internalStream = pc._streams[externalStream.id];\n      sdp = sdp.replace(new RegExp(externalStream.id, 'g'),\n          internalStream.id);\n    });\n    return new RTCSessionDescription({\n      type: description.type,\n      sdp\n    });\n  }\n  ['createOffer', 'createAnswer'].forEach(function(method) {\n    const nativeMethod = window.RTCPeerConnection.prototype[method];\n    const methodObj = {[method]() {\n      const args = arguments;\n      const isLegacyCall = arguments.length &&\n          typeof arguments[0] === 'function';\n      if (isLegacyCall) {\n        return nativeMethod.apply(this, [\n          (description) => {\n            const desc = replaceInternalStreamId(this, description);\n            args[0].apply(null, [desc]);\n          },\n          (err) => {\n            if (args[1]) {\n              args[1].apply(null, err);\n            }\n          }, arguments[2]\n        ]);\n      }\n      return nativeMethod.apply(this, arguments)\n      .then(description => replaceInternalStreamId(this, description));\n    }};\n    window.RTCPeerConnection.prototype[method] = methodObj[method];\n  });\n\n  const origSetLocalDescription =\n      window.RTCPeerConnection.prototype.setLocalDescription;\n  window.RTCPeerConnection.prototype.setLocalDescription =\n    function setLocalDescription() {\n      if (!arguments.length || !arguments[0].type) {\n        return origSetLocalDescription.apply(this, arguments);\n      }\n      arguments[0] = replaceExternalStreamId(this, arguments[0]);\n      return origSetLocalDescription.apply(this, arguments);\n    };\n\n  // TODO: mangle getStats: https://w3c.github.io/webrtc-stats/#dom-rtcmediastreamstats-streamidentifier\n\n  const origLocalDescription = Object.getOwnPropertyDescriptor(\n      window.RTCPeerConnection.prototype, 'localDescription');\n  Object.defineProperty(window.RTCPeerConnection.prototype,\n      'localDescription', {\n        get() {\n          const description = origLocalDescription.get.apply(this);\n          if (description.type === '') {\n            return description;\n          }\n          return replaceInternalStreamId(this, description);\n        }\n      });\n\n  window.RTCPeerConnection.prototype.removeTrack =\n    function removeTrack(sender) {\n      if (this.signalingState === 'closed') {\n        throw new DOMException(\n          'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n          'InvalidStateError');\n      }\n      // We can not yet check for sender instanceof RTCRtpSender\n      // since we shim RTPSender. So we check if sender._pc is set.\n      if (!sender._pc) {\n        throw new DOMException('Argument 1 of RTCPeerConnection.removeTrack ' +\n            'does not implement interface RTCRtpSender.', 'TypeError');\n      }\n      const isLocal = sender._pc === this;\n      if (!isLocal) {\n        throw new DOMException('Sender was not created by this connection.',\n            'InvalidAccessError');\n      }\n\n      // Search for the native stream the senders track belongs to.\n      this._streams = this._streams || {};\n      let stream;\n      Object.keys(this._streams).forEach(streamid => {\n        const hasTrack = this._streams[streamid].getTracks()\n          .find(track => sender.track === track);\n        if (hasTrack) {\n          stream = this._streams[streamid];\n        }\n      });\n\n      if (stream) {\n        if (stream.getTracks().length === 1) {\n          // if this is the last track of the stream, remove the stream. This\n          // takes care of any shimmed _senders.\n          this.removeStream(this._reverseStreams[stream.id]);\n        } else {\n          // relying on the same odd chrome behaviour as above.\n          stream.removeTrack(sender.track);\n        }\n        this.dispatchEvent(new Event('negotiationneeded'));\n      }\n    };\n}\n\nfunction shimPeerConnection(window, browserDetails) {\n  if (!window.RTCPeerConnection && window.webkitRTCPeerConnection) {\n    // very basic support for old versions.\n    window.RTCPeerConnection = window.webkitRTCPeerConnection;\n  }\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  // shim implicit creation of RTCSessionDescription/RTCIceCandidate\n  if (browserDetails.version < 53) {\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n        .forEach(function(method) {\n          const nativeMethod = window.RTCPeerConnection.prototype[method];\n          const methodObj = {[method]() {\n            arguments[0] = new ((method === 'addIceCandidate') ?\n                window.RTCIceCandidate :\n                window.RTCSessionDescription)(arguments[0]);\n            return nativeMethod.apply(this, arguments);\n          }};\n          window.RTCPeerConnection.prototype[method] = methodObj[method];\n        });\n  }\n}\n\n// Attempt to fix ONN in plan-b mode.\nfunction fixNegotiationNeeded(window, browserDetails) {\n  _utils_js__WEBPACK_IMPORTED_MODULE_0__.wrapPeerConnectionEvent(window, 'negotiationneeded', e => {\n    const pc = e.target;\n    if (browserDetails.version < 72 || (pc.getConfiguration &&\n        pc.getConfiguration().sdpSemantics === 'plan-b')) {\n      if (pc.signalingState !== 'stable') {\n        return;\n      }\n    }\n    return e;\n  });\n}\n\n\n//# sourceURL=webpack://100-ms-demo/./node_modules/webrtc-adapter/src/js/chrome/chrome_shim.js?");

/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/chrome/getdisplaymedia.js":
/*!**********************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/chrome/getdisplaymedia.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"shimGetDisplayMedia\": () => (/* binding */ shimGetDisplayMedia)\n/* harmony export */ });\n/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n\nfunction shimGetDisplayMedia(window, getSourceId) {\n  if (window.navigator.mediaDevices &&\n    'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  if (!(window.navigator.mediaDevices)) {\n    return;\n  }\n  // getSourceId is a function that returns a promise resolving with\n  // the sourceId of the screen/window/tab to be shared.\n  if (typeof getSourceId !== 'function') {\n    console.error('shimGetDisplayMedia: getSourceId argument is not ' +\n        'a function');\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia =\n    function getDisplayMedia(constraints) {\n      return getSourceId(constraints)\n        .then(sourceId => {\n          const widthSpecified = constraints.video && constraints.video.width;\n          const heightSpecified = constraints.video &&\n            constraints.video.height;\n          const frameRateSpecified = constraints.video &&\n            constraints.video.frameRate;\n          constraints.video = {\n            mandatory: {\n              chromeMediaSource: 'desktop',\n              chromeMediaSourceId: sourceId,\n              maxFrameRate: frameRateSpecified || 3\n            }\n          };\n          if (widthSpecified) {\n            constraints.video.mandatory.maxWidth = widthSpecified;\n          }\n          if (heightSpecified) {\n            constraints.video.mandatory.maxHeight = heightSpecified;\n          }\n          return window.navigator.mediaDevices.getUserMedia(constraints);\n        });\n    };\n}\n\n\n//# sourceURL=webpack://100-ms-demo/./node_modules/webrtc-adapter/src/js/chrome/getdisplaymedia.js?");

/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/chrome/getusermedia.js":
/*!*******************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/chrome/getusermedia.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"shimGetUserMedia\": () => (/* binding */ shimGetUserMedia)\n/* harmony export */ });\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils.js */ \"./node_modules/webrtc-adapter/src/js/utils.js\");\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n\n\nconst logging = _utils_js__WEBPACK_IMPORTED_MODULE_0__.log;\n\nfunction shimGetUserMedia(window, browserDetails) {\n  const navigator = window && window.navigator;\n\n  if (!navigator.mediaDevices) {\n    return;\n  }\n\n  const constraintsToChrome_ = function(c) {\n    if (typeof c !== 'object' || c.mandatory || c.optional) {\n      return c;\n    }\n    const cc = {};\n    Object.keys(c).forEach(key => {\n      if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n        return;\n      }\n      const r = (typeof c[key] === 'object') ? c[key] : {ideal: c[key]};\n      if (r.exact !== undefined && typeof r.exact === 'number') {\n        r.min = r.max = r.exact;\n      }\n      const oldname_ = function(prefix, name) {\n        if (prefix) {\n          return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n        }\n        return (name === 'deviceId') ? 'sourceId' : name;\n      };\n      if (r.ideal !== undefined) {\n        cc.optional = cc.optional || [];\n        let oc = {};\n        if (typeof r.ideal === 'number') {\n          oc[oldname_('min', key)] = r.ideal;\n          cc.optional.push(oc);\n          oc = {};\n          oc[oldname_('max', key)] = r.ideal;\n          cc.optional.push(oc);\n        } else {\n          oc[oldname_('', key)] = r.ideal;\n          cc.optional.push(oc);\n        }\n      }\n      if (r.exact !== undefined && typeof r.exact !== 'number') {\n        cc.mandatory = cc.mandatory || {};\n        cc.mandatory[oldname_('', key)] = r.exact;\n      } else {\n        ['min', 'max'].forEach(mix => {\n          if (r[mix] !== undefined) {\n            cc.mandatory = cc.mandatory || {};\n            cc.mandatory[oldname_(mix, key)] = r[mix];\n          }\n        });\n      }\n    });\n    if (c.advanced) {\n      cc.optional = (cc.optional || []).concat(c.advanced);\n    }\n    return cc;\n  };\n\n  const shimConstraints_ = function(constraints, func) {\n    if (browserDetails.version >= 61) {\n      return func(constraints);\n    }\n    constraints = JSON.parse(JSON.stringify(constraints));\n    if (constraints && typeof constraints.audio === 'object') {\n      const remap = function(obj, a, b) {\n        if (a in obj && !(b in obj)) {\n          obj[b] = obj[a];\n          delete obj[a];\n        }\n      };\n      constraints = JSON.parse(JSON.stringify(constraints));\n      remap(constraints.audio, 'autoGainControl', 'googAutoGainControl');\n      remap(constraints.audio, 'noiseSuppression', 'googNoiseSuppression');\n      constraints.audio = constraintsToChrome_(constraints.audio);\n    }\n    if (constraints && typeof constraints.video === 'object') {\n      // Shim facingMode for mobile & surface pro.\n      let face = constraints.video.facingMode;\n      face = face && ((typeof face === 'object') ? face : {ideal: face});\n      const getSupportedFacingModeLies = browserDetails.version < 66;\n\n      if ((face && (face.exact === 'user' || face.exact === 'environment' ||\n                    face.ideal === 'user' || face.ideal === 'environment')) &&\n          !(navigator.mediaDevices.getSupportedConstraints &&\n            navigator.mediaDevices.getSupportedConstraints().facingMode &&\n            !getSupportedFacingModeLies)) {\n        delete constraints.video.facingMode;\n        let matches;\n        if (face.exact === 'environment' || face.ideal === 'environment') {\n          matches = ['back', 'rear'];\n        } else if (face.exact === 'user' || face.ideal === 'user') {\n          matches = ['front'];\n        }\n        if (matches) {\n          // Look for matches in label, or use last cam for back (typical).\n          return navigator.mediaDevices.enumerateDevices()\n          .then(devices => {\n            devices = devices.filter(d => d.kind === 'videoinput');\n            let dev = devices.find(d => matches.some(match =>\n              d.label.toLowerCase().includes(match)));\n            if (!dev && devices.length && matches.includes('back')) {\n              dev = devices[devices.length - 1]; // more likely the back cam\n            }\n            if (dev) {\n              constraints.video.deviceId = face.exact ? {exact: dev.deviceId} :\n                                                        {ideal: dev.deviceId};\n            }\n            constraints.video = constraintsToChrome_(constraints.video);\n            logging('chrome: ' + JSON.stringify(constraints));\n            return func(constraints);\n          });\n        }\n      }\n      constraints.video = constraintsToChrome_(constraints.video);\n    }\n    logging('chrome: ' + JSON.stringify(constraints));\n    return func(constraints);\n  };\n\n  const shimError_ = function(e) {\n    if (browserDetails.version >= 64) {\n      return e;\n    }\n    return {\n      name: {\n        PermissionDeniedError: 'NotAllowedError',\n        PermissionDismissedError: 'NotAllowedError',\n        InvalidStateError: 'NotAllowedError',\n        DevicesNotFoundError: 'NotFoundError',\n        ConstraintNotSatisfiedError: 'OverconstrainedError',\n        TrackStartError: 'NotReadableError',\n        MediaDeviceFailedDueToShutdown: 'NotAllowedError',\n        MediaDeviceKillSwitchOn: 'NotAllowedError',\n        TabCaptureError: 'AbortError',\n        ScreenCaptureError: 'AbortError',\n        DeviceCaptureError: 'AbortError'\n      }[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraint || e.constraintName,\n      toString() {\n        return this.name + (this.message && ': ') + this.message;\n      }\n    };\n  };\n\n  const getUserMedia_ = function(constraints, onSuccess, onError) {\n    shimConstraints_(constraints, c => {\n      navigator.webkitGetUserMedia(c, onSuccess, e => {\n        if (onError) {\n          onError(shimError_(e));\n        }\n      });\n    });\n  };\n  navigator.getUserMedia = getUserMedia_.bind(navigator);\n\n  // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n  // function which returns a Promise, it does not accept spec-style\n  // constraints.\n  if (navigator.mediaDevices.getUserMedia) {\n    const origGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(cs) {\n      return shimConstraints_(cs, c => origGetUserMedia(c).then(stream => {\n        if (c.audio && !stream.getAudioTracks().length ||\n            c.video && !stream.getVideoTracks().length) {\n          stream.getTracks().forEach(track => {\n            track.stop();\n          });\n          throw new DOMException('', 'NotFoundError');\n        }\n        return stream;\n      }, e => Promise.reject(shimError_(e))));\n    };\n  }\n}\n\n\n//# sourceURL=webpack://100-ms-demo/./node_modules/webrtc-adapter/src/js/chrome/getusermedia.js?");

/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/common_shim.js":
/*!***********************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/common_shim.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"removeExtmapAllowMixed\": () => (/* binding */ removeExtmapAllowMixed),\n/* harmony export */   \"shimAddIceCandidateNullOrEmpty\": () => (/* binding */ shimAddIceCandidateNullOrEmpty),\n/* harmony export */   \"shimConnectionState\": () => (/* binding */ shimConnectionState),\n/* harmony export */   \"shimMaxMessageSize\": () => (/* binding */ shimMaxMessageSize),\n/* harmony export */   \"shimParameterlessSetLocalDescription\": () => (/* binding */ shimParameterlessSetLocalDescription),\n/* harmony export */   \"shimRTCIceCandidate\": () => (/* binding */ shimRTCIceCandidate),\n/* harmony export */   \"shimSendThrowTypeError\": () => (/* binding */ shimSendThrowTypeError)\n/* harmony export */ });\n/* harmony import */ var sdp__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! sdp */ \"./node_modules/sdp/sdp.js\");\n/* harmony import */ var sdp__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(sdp__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils */ \"./node_modules/webrtc-adapter/src/js/utils.js\");\n/*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n\n\n\n\n\nfunction shimRTCIceCandidate(window) {\n  // foundation is arbitrarily chosen as an indicator for full support for\n  // https://w3c.github.io/webrtc-pc/#rtcicecandidate-interface\n  if (!window.RTCIceCandidate || (window.RTCIceCandidate && 'foundation' in\n      window.RTCIceCandidate.prototype)) {\n    return;\n  }\n\n  const NativeRTCIceCandidate = window.RTCIceCandidate;\n  window.RTCIceCandidate = function RTCIceCandidate(args) {\n    // Remove the a= which shouldn't be part of the candidate string.\n    if (typeof args === 'object' && args.candidate &&\n        args.candidate.indexOf('a=') === 0) {\n      args = JSON.parse(JSON.stringify(args));\n      args.candidate = args.candidate.substr(2);\n    }\n\n    if (args.candidate && args.candidate.length) {\n      // Augment the native candidate with the parsed fields.\n      const nativeCandidate = new NativeRTCIceCandidate(args);\n      const parsedCandidate = sdp__WEBPACK_IMPORTED_MODULE_0___default().parseCandidate(args.candidate);\n      const augmentedCandidate = Object.assign(nativeCandidate,\n          parsedCandidate);\n\n      // Add a serializer that does not serialize the extra attributes.\n      augmentedCandidate.toJSON = function toJSON() {\n        return {\n          candidate: augmentedCandidate.candidate,\n          sdpMid: augmentedCandidate.sdpMid,\n          sdpMLineIndex: augmentedCandidate.sdpMLineIndex,\n          usernameFragment: augmentedCandidate.usernameFragment,\n        };\n      };\n      return augmentedCandidate;\n    }\n    return new NativeRTCIceCandidate(args);\n  };\n  window.RTCIceCandidate.prototype = NativeRTCIceCandidate.prototype;\n\n  // Hook up the augmented candidate in onicecandidate and\n  // addEventListener('icecandidate', ...)\n  _utils__WEBPACK_IMPORTED_MODULE_1__.wrapPeerConnectionEvent(window, 'icecandidate', e => {\n    if (e.candidate) {\n      Object.defineProperty(e, 'candidate', {\n        value: new window.RTCIceCandidate(e.candidate),\n        writable: 'false'\n      });\n    }\n    return e;\n  });\n}\n\nfunction shimMaxMessageSize(window, browserDetails) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  if (!('sctp' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'sctp', {\n      get() {\n        return typeof this._sctp === 'undefined' ? null : this._sctp;\n      }\n    });\n  }\n\n  const sctpInDescription = function(description) {\n    if (!description || !description.sdp) {\n      return false;\n    }\n    const sections = sdp__WEBPACK_IMPORTED_MODULE_0___default().splitSections(description.sdp);\n    sections.shift();\n    return sections.some(mediaSection => {\n      const mLine = sdp__WEBPACK_IMPORTED_MODULE_0___default().parseMLine(mediaSection);\n      return mLine && mLine.kind === 'application'\n          && mLine.protocol.indexOf('SCTP') !== -1;\n    });\n  };\n\n  const getRemoteFirefoxVersion = function(description) {\n    // TODO: Is there a better solution for detecting Firefox?\n    const match = description.sdp.match(/mozilla...THIS_IS_SDPARTA-(\\d+)/);\n    if (match === null || match.length < 2) {\n      return -1;\n    }\n    const version = parseInt(match[1], 10);\n    // Test for NaN (yes, this is ugly)\n    return version !== version ? -1 : version;\n  };\n\n  const getCanSendMaxMessageSize = function(remoteIsFirefox) {\n    // Every implementation we know can send at least 64 KiB.\n    // Note: Although Chrome is technically able to send up to 256 KiB, the\n    //       data does not reach the other peer reliably.\n    //       See: https://bugs.chromium.org/p/webrtc/issues/detail?id=8419\n    let canSendMaxMessageSize = 65536;\n    if (browserDetails.browser === 'firefox') {\n      if (browserDetails.version < 57) {\n        if (remoteIsFirefox === -1) {\n          // FF < 57 will send in 16 KiB chunks using the deprecated PPID\n          // fragmentation.\n          canSendMaxMessageSize = 16384;\n        } else {\n          // However, other FF (and RAWRTC) can reassemble PPID-fragmented\n          // messages. Thus, supporting ~2 GiB when sending.\n          canSendMaxMessageSize = 2147483637;\n        }\n      } else if (browserDetails.version < 60) {\n        // Currently, all FF >= 57 will reset the remote maximum message size\n        // to the default value when a data channel is created at a later\n        // stage. :(\n        // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n        canSendMaxMessageSize =\n          browserDetails.version === 57 ? 65535 : 65536;\n      } else {\n        // FF >= 60 supports sending ~2 GiB\n        canSendMaxMessageSize = 2147483637;\n      }\n    }\n    return canSendMaxMessageSize;\n  };\n\n  const getMaxMessageSize = function(description, remoteIsFirefox) {\n    // Note: 65536 bytes is the default value from the SDP spec. Also,\n    //       every implementation we know supports receiving 65536 bytes.\n    let maxMessageSize = 65536;\n\n    // FF 57 has a slightly incorrect default remote max message size, so\n    // we need to adjust it here to avoid a failure when sending.\n    // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1425697\n    if (browserDetails.browser === 'firefox'\n         && browserDetails.version === 57) {\n      maxMessageSize = 65535;\n    }\n\n    const match = sdp__WEBPACK_IMPORTED_MODULE_0___default().matchPrefix(description.sdp,\n      'a=max-message-size:');\n    if (match.length > 0) {\n      maxMessageSize = parseInt(match[0].substr(19), 10);\n    } else if (browserDetails.browser === 'firefox' &&\n                remoteIsFirefox !== -1) {\n      // If the maximum message size is not present in the remote SDP and\n      // both local and remote are Firefox, the remote peer can receive\n      // ~2 GiB.\n      maxMessageSize = 2147483637;\n    }\n    return maxMessageSize;\n  };\n\n  const origSetRemoteDescription =\n      window.RTCPeerConnection.prototype.setRemoteDescription;\n  window.RTCPeerConnection.prototype.setRemoteDescription =\n    function setRemoteDescription() {\n      this._sctp = null;\n      // Chrome decided to not expose .sctp in plan-b mode.\n      // As usual, adapter.js has to do an 'ugly worakaround'\n      // to cover up the mess.\n      if (browserDetails.browser === 'chrome' && browserDetails.version >= 76) {\n        const {sdpSemantics} = this.getConfiguration();\n        if (sdpSemantics === 'plan-b') {\n          Object.defineProperty(this, 'sctp', {\n            get() {\n              return typeof this._sctp === 'undefined' ? null : this._sctp;\n            },\n            enumerable: true,\n            configurable: true,\n          });\n        }\n      }\n\n      if (sctpInDescription(arguments[0])) {\n        // Check if the remote is FF.\n        const isFirefox = getRemoteFirefoxVersion(arguments[0]);\n\n        // Get the maximum message size the local peer is capable of sending\n        const canSendMMS = getCanSendMaxMessageSize(isFirefox);\n\n        // Get the maximum message size of the remote peer.\n        const remoteMMS = getMaxMessageSize(arguments[0], isFirefox);\n\n        // Determine final maximum message size\n        let maxMessageSize;\n        if (canSendMMS === 0 && remoteMMS === 0) {\n          maxMessageSize = Number.POSITIVE_INFINITY;\n        } else if (canSendMMS === 0 || remoteMMS === 0) {\n          maxMessageSize = Math.max(canSendMMS, remoteMMS);\n        } else {\n          maxMessageSize = Math.min(canSendMMS, remoteMMS);\n        }\n\n        // Create a dummy RTCSctpTransport object and the 'maxMessageSize'\n        // attribute.\n        const sctp = {};\n        Object.defineProperty(sctp, 'maxMessageSize', {\n          get() {\n            return maxMessageSize;\n          }\n        });\n        this._sctp = sctp;\n      }\n\n      return origSetRemoteDescription.apply(this, arguments);\n    };\n}\n\nfunction shimSendThrowTypeError(window) {\n  if (!(window.RTCPeerConnection &&\n      'createDataChannel' in window.RTCPeerConnection.prototype)) {\n    return;\n  }\n\n  // Note: Although Firefox >= 57 has a native implementation, the maximum\n  //       message size can be reset for all data channels at a later stage.\n  //       See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n\n  function wrapDcSend(dc, pc) {\n    const origDataChannelSend = dc.send;\n    dc.send = function send() {\n      const data = arguments[0];\n      const length = data.length || data.size || data.byteLength;\n      if (dc.readyState === 'open' &&\n          pc.sctp && length > pc.sctp.maxMessageSize) {\n        throw new TypeError('Message too large (can send a maximum of ' +\n          pc.sctp.maxMessageSize + ' bytes)');\n      }\n      return origDataChannelSend.apply(dc, arguments);\n    };\n  }\n  const origCreateDataChannel =\n    window.RTCPeerConnection.prototype.createDataChannel;\n  window.RTCPeerConnection.prototype.createDataChannel =\n    function createDataChannel() {\n      const dataChannel = origCreateDataChannel.apply(this, arguments);\n      wrapDcSend(dataChannel, this);\n      return dataChannel;\n    };\n  _utils__WEBPACK_IMPORTED_MODULE_1__.wrapPeerConnectionEvent(window, 'datachannel', e => {\n    wrapDcSend(e.channel, e.target);\n    return e;\n  });\n}\n\n\n/* shims RTCConnectionState by pretending it is the same as iceConnectionState.\n * See https://bugs.chromium.org/p/webrtc/issues/detail?id=6145#c12\n * for why this is a valid hack in Chrome. In Firefox it is slightly incorrect\n * since DTLS failures would be hidden. See\n * https://bugzilla.mozilla.org/show_bug.cgi?id=1265827\n * for the Firefox tracking bug.\n */\nfunction shimConnectionState(window) {\n  if (!window.RTCPeerConnection ||\n      'connectionState' in window.RTCPeerConnection.prototype) {\n    return;\n  }\n  const proto = window.RTCPeerConnection.prototype;\n  Object.defineProperty(proto, 'connectionState', {\n    get() {\n      return {\n        completed: 'connected',\n        checking: 'connecting'\n      }[this.iceConnectionState] || this.iceConnectionState;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(proto, 'onconnectionstatechange', {\n    get() {\n      return this._onconnectionstatechange || null;\n    },\n    set(cb) {\n      if (this._onconnectionstatechange) {\n        this.removeEventListener('connectionstatechange',\n            this._onconnectionstatechange);\n        delete this._onconnectionstatechange;\n      }\n      if (cb) {\n        this.addEventListener('connectionstatechange',\n            this._onconnectionstatechange = cb);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  ['setLocalDescription', 'setRemoteDescription'].forEach((method) => {\n    const origMethod = proto[method];\n    proto[method] = function() {\n      if (!this._connectionstatechangepoly) {\n        this._connectionstatechangepoly = e => {\n          const pc = e.target;\n          if (pc._lastConnectionState !== pc.connectionState) {\n            pc._lastConnectionState = pc.connectionState;\n            const newEvent = new Event('connectionstatechange', e);\n            pc.dispatchEvent(newEvent);\n          }\n          return e;\n        };\n        this.addEventListener('iceconnectionstatechange',\n          this._connectionstatechangepoly);\n      }\n      return origMethod.apply(this, arguments);\n    };\n  });\n}\n\nfunction removeExtmapAllowMixed(window, browserDetails) {\n  /* remove a=extmap-allow-mixed for webrtc.org < M71 */\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  if (browserDetails.browser === 'chrome' && browserDetails.version >= 71) {\n    return;\n  }\n  if (browserDetails.browser === 'safari' && browserDetails.version >= 605) {\n    return;\n  }\n  const nativeSRD = window.RTCPeerConnection.prototype.setRemoteDescription;\n  window.RTCPeerConnection.prototype.setRemoteDescription =\n  function setRemoteDescription(desc) {\n    if (desc && desc.sdp && desc.sdp.indexOf('\\na=extmap-allow-mixed') !== -1) {\n      const sdp = desc.sdp.split('\\n').filter((line) => {\n        return line.trim() !== 'a=extmap-allow-mixed';\n      }).join('\\n');\n      // Safari enforces read-only-ness of RTCSessionDescription fields.\n      if (window.RTCSessionDescription &&\n          desc instanceof window.RTCSessionDescription) {\n        arguments[0] = new window.RTCSessionDescription({\n          type: desc.type,\n          sdp,\n        });\n      } else {\n        desc.sdp = sdp;\n      }\n    }\n    return nativeSRD.apply(this, arguments);\n  };\n}\n\nfunction shimAddIceCandidateNullOrEmpty(window, browserDetails) {\n  // Support for addIceCandidate(null or undefined)\n  // as well as addIceCandidate({candidate: \"\", ...})\n  // https://bugs.chromium.org/p/chromium/issues/detail?id=978582\n  // Note: must be called before other polyfills which change the signature.\n  if (!(window.RTCPeerConnection && window.RTCPeerConnection.prototype)) {\n    return;\n  }\n  const nativeAddIceCandidate =\n      window.RTCPeerConnection.prototype.addIceCandidate;\n  if (!nativeAddIceCandidate || nativeAddIceCandidate.length === 0) {\n    return;\n  }\n  window.RTCPeerConnection.prototype.addIceCandidate =\n    function addIceCandidate() {\n      if (!arguments[0]) {\n        if (arguments[1]) {\n          arguments[1].apply(null);\n        }\n        return Promise.resolve();\n      }\n      // Firefox 68+ emits and processes {candidate: \"\", ...}, ignore\n      // in older versions.\n      // Native support for ignoring exists for Chrome M77+.\n      // Safari ignores as well, exact version unknown but works in the same\n      // version that also ignores addIceCandidate(null).\n      if (((browserDetails.browser === 'chrome' && browserDetails.version < 78)\n           || (browserDetails.browser === 'firefox'\n               && browserDetails.version < 68)\n           || (browserDetails.browser === 'safari'))\n          && arguments[0] && arguments[0].candidate === '') {\n        return Promise.resolve();\n      }\n      return nativeAddIceCandidate.apply(this, arguments);\n    };\n}\n\n// Note: Make sure to call this ahead of APIs that modify\n// setLocalDescription.length\nfunction shimParameterlessSetLocalDescription(window, browserDetails) {\n  if (!(window.RTCPeerConnection && window.RTCPeerConnection.prototype)) {\n    return;\n  }\n  const nativeSetLocalDescription =\n      window.RTCPeerConnection.prototype.setLocalDescription;\n  if (!nativeSetLocalDescription || nativeSetLocalDescription.length === 0) {\n    return;\n  }\n  window.RTCPeerConnection.prototype.setLocalDescription =\n    function setLocalDescription() {\n      let desc = arguments[0] || {};\n      if (typeof desc !== 'object' || (desc.type && desc.sdp)) {\n        return nativeSetLocalDescription.apply(this, arguments);\n      }\n      // The remaining steps should technically happen when SLD comes off the\n      // RTCPeerConnection's operations chain (not ahead of going on it), but\n      // this is too difficult to shim. Instead, this shim only covers the\n      // common case where the operations chain is empty. This is imperfect, but\n      // should cover many cases. Rationale: Even if we can't reduce the glare\n      // window to zero on imperfect implementations, there's value in tapping\n      // into the perfect negotiation pattern that several browsers support.\n      desc = {type: desc.type, sdp: desc.sdp};\n      if (!desc.type) {\n        switch (this.signalingState) {\n          case 'stable':\n          case 'have-local-offer':\n          case 'have-remote-pranswer':\n            desc.type = 'offer';\n            break;\n          default:\n            desc.type = 'answer';\n            break;\n        }\n      }\n      if (desc.sdp || (desc.type !== 'offer' && desc.type !== 'answer')) {\n        return nativeSetLocalDescription.apply(this, [desc]);\n      }\n      const func = desc.type === 'offer' ? this.createOffer : this.createAnswer;\n      return func.apply(this)\n        .then(d => nativeSetLocalDescription.apply(this, [d]));\n    };\n}\n\n\n//# sourceURL=webpack://100-ms-demo/./node_modules/webrtc-adapter/src/js/common_shim.js?");

/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/firefox/firefox_shim.js":
/*!********************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/firefox/firefox_shim.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"shimAddTransceiver\": () => (/* binding */ shimAddTransceiver),\n/* harmony export */   \"shimCreateAnswer\": () => (/* binding */ shimCreateAnswer),\n/* harmony export */   \"shimCreateOffer\": () => (/* binding */ shimCreateOffer),\n/* harmony export */   \"shimGetDisplayMedia\": () => (/* reexport safe */ _getdisplaymedia__WEBPACK_IMPORTED_MODULE_2__.shimGetDisplayMedia),\n/* harmony export */   \"shimGetParameters\": () => (/* binding */ shimGetParameters),\n/* harmony export */   \"shimGetUserMedia\": () => (/* reexport safe */ _getusermedia__WEBPACK_IMPORTED_MODULE_1__.shimGetUserMedia),\n/* harmony export */   \"shimOnTrack\": () => (/* binding */ shimOnTrack),\n/* harmony export */   \"shimPeerConnection\": () => (/* binding */ shimPeerConnection),\n/* harmony export */   \"shimRTCDataChannel\": () => (/* binding */ shimRTCDataChannel),\n/* harmony export */   \"shimReceiverGetStats\": () => (/* binding */ shimReceiverGetStats),\n/* harmony export */   \"shimRemoveStream\": () => (/* binding */ shimRemoveStream),\n/* harmony export */   \"shimSenderGetStats\": () => (/* binding */ shimSenderGetStats)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"./node_modules/webrtc-adapter/src/js/utils.js\");\n/* harmony import */ var _getusermedia__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getusermedia */ \"./node_modules/webrtc-adapter/src/js/firefox/getusermedia.js\");\n/* harmony import */ var _getdisplaymedia__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./getdisplaymedia */ \"./node_modules/webrtc-adapter/src/js/firefox/getdisplaymedia.js\");\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n\n\n\n\n\n\nfunction shimOnTrack(window) {\n  if (typeof window === 'object' && window.RTCTrackEvent &&\n      ('receiver' in window.RTCTrackEvent.prototype) &&\n      !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get() {\n        return {receiver: this.receiver};\n      }\n    });\n  }\n}\n\nfunction shimPeerConnection(window, browserDetails) {\n  if (typeof window !== 'object' ||\n      !(window.RTCPeerConnection || window.mozRTCPeerConnection)) {\n    return; // probably media.peerconnection.enabled=false in about:config\n  }\n  if (!window.RTCPeerConnection && window.mozRTCPeerConnection) {\n    // very basic support for old versions.\n    window.RTCPeerConnection = window.mozRTCPeerConnection;\n  }\n\n  if (browserDetails.version < 53) {\n    // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n        .forEach(function(method) {\n          const nativeMethod = window.RTCPeerConnection.prototype[method];\n          const methodObj = {[method]() {\n            arguments[0] = new ((method === 'addIceCandidate') ?\n                window.RTCIceCandidate :\n                window.RTCSessionDescription)(arguments[0]);\n            return nativeMethod.apply(this, arguments);\n          }};\n          window.RTCPeerConnection.prototype[method] = methodObj[method];\n        });\n  }\n\n  const modernStatsTypes = {\n    inboundrtp: 'inbound-rtp',\n    outboundrtp: 'outbound-rtp',\n    candidatepair: 'candidate-pair',\n    localcandidate: 'local-candidate',\n    remotecandidate: 'remote-candidate'\n  };\n\n  const nativeGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    const [selector, onSucc, onErr] = arguments;\n    return nativeGetStats.apply(this, [selector || null])\n      .then(stats => {\n        if (browserDetails.version < 53 && !onSucc) {\n          // Shim only promise getStats with spec-hyphens in type names\n          // Leave callback version alone; misc old uses of forEach before Map\n          try {\n            stats.forEach(stat => {\n              stat.type = modernStatsTypes[stat.type] || stat.type;\n            });\n          } catch (e) {\n            if (e.name !== 'TypeError') {\n              throw e;\n            }\n            // Avoid TypeError: \"type\" is read-only, in old versions. 34-43ish\n            stats.forEach((stat, i) => {\n              stats.set(i, Object.assign({}, stat, {\n                type: modernStatsTypes[stat.type] || stat.type\n              }));\n            });\n          }\n        }\n        return stats;\n      })\n      .then(onSucc, onErr);\n  };\n}\n\nfunction shimSenderGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender)) {\n    return;\n  }\n  if (window.RTCRtpSender && 'getStats' in window.RTCRtpSender.prototype) {\n    return;\n  }\n  const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n  if (origGetSenders) {\n    window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n      const senders = origGetSenders.apply(this, []);\n      senders.forEach(sender => sender._pc = this);\n      return senders;\n    };\n  }\n\n  const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n  if (origAddTrack) {\n    window.RTCPeerConnection.prototype.addTrack = function addTrack() {\n      const sender = origAddTrack.apply(this, arguments);\n      sender._pc = this;\n      return sender;\n    };\n  }\n  window.RTCRtpSender.prototype.getStats = function getStats() {\n    return this.track ? this._pc.getStats(this.track) :\n        Promise.resolve(new Map());\n  };\n}\n\nfunction shimReceiverGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender)) {\n    return;\n  }\n  if (window.RTCRtpSender && 'getStats' in window.RTCRtpReceiver.prototype) {\n    return;\n  }\n  const origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n  if (origGetReceivers) {\n    window.RTCPeerConnection.prototype.getReceivers = function getReceivers() {\n      const receivers = origGetReceivers.apply(this, []);\n      receivers.forEach(receiver => receiver._pc = this);\n      return receivers;\n    };\n  }\n  _utils__WEBPACK_IMPORTED_MODULE_0__.wrapPeerConnectionEvent(window, 'track', e => {\n    e.receiver._pc = e.srcElement;\n    return e;\n  });\n  window.RTCRtpReceiver.prototype.getStats = function getStats() {\n    return this._pc.getStats(this.track);\n  };\n}\n\nfunction shimRemoveStream(window) {\n  if (!window.RTCPeerConnection ||\n      'removeStream' in window.RTCPeerConnection.prototype) {\n    return;\n  }\n  window.RTCPeerConnection.prototype.removeStream =\n    function removeStream(stream) {\n      _utils__WEBPACK_IMPORTED_MODULE_0__.deprecated('removeStream', 'removeTrack');\n      this.getSenders().forEach(sender => {\n        if (sender.track && stream.getTracks().includes(sender.track)) {\n          this.removeTrack(sender);\n        }\n      });\n    };\n}\n\nfunction shimRTCDataChannel(window) {\n  // rename DataChannel to RTCDataChannel (native fix in FF60):\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1173851\n  if (window.DataChannel && !window.RTCDataChannel) {\n    window.RTCDataChannel = window.DataChannel;\n  }\n}\n\nfunction shimAddTransceiver(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(typeof window === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  const origAddTransceiver = window.RTCPeerConnection.prototype.addTransceiver;\n  if (origAddTransceiver) {\n    window.RTCPeerConnection.prototype.addTransceiver =\n      function addTransceiver() {\n        this.setParametersPromises = [];\n        // WebIDL input coercion and validation\n        let sendEncodings = arguments[1] && arguments[1].sendEncodings;\n        if (sendEncodings === undefined) {\n          sendEncodings = [];\n        }\n        sendEncodings = [...sendEncodings];\n        const shouldPerformCheck = sendEncodings.length > 0;\n        if (shouldPerformCheck) {\n          // If sendEncodings params are provided, validate grammar\n          sendEncodings.forEach((encodingParam) => {\n            if ('rid' in encodingParam) {\n              const ridRegex = /^[a-z0-9]{0,16}$/i;\n              if (!ridRegex.test(encodingParam.rid)) {\n                throw new TypeError('Invalid RID value provided.');\n              }\n            }\n            if ('scaleResolutionDownBy' in encodingParam) {\n              if (!(parseFloat(encodingParam.scaleResolutionDownBy) >= 1.0)) {\n                throw new RangeError('scale_resolution_down_by must be >= 1.0');\n              }\n            }\n            if ('maxFramerate' in encodingParam) {\n              if (!(parseFloat(encodingParam.maxFramerate) >= 0)) {\n                throw new RangeError('max_framerate must be >= 0.0');\n              }\n            }\n          });\n        }\n        const transceiver = origAddTransceiver.apply(this, arguments);\n        if (shouldPerformCheck) {\n          // Check if the init options were applied. If not we do this in an\n          // asynchronous way and save the promise reference in a global object.\n          // This is an ugly hack, but at the same time is way more robust than\n          // checking the sender parameters before and after the createOffer\n          // Also note that after the createoffer we are not 100% sure that\n          // the params were asynchronously applied so we might miss the\n          // opportunity to recreate offer.\n          const {sender} = transceiver;\n          const params = sender.getParameters();\n          if (!('encodings' in params) ||\n              // Avoid being fooled by patched getParameters() below.\n              (params.encodings.length === 1 &&\n               Object.keys(params.encodings[0]).length === 0)) {\n            params.encodings = sendEncodings;\n            sender.sendEncodings = sendEncodings;\n            this.setParametersPromises.push(sender.setParameters(params)\n              .then(() => {\n                delete sender.sendEncodings;\n              }).catch(() => {\n                delete sender.sendEncodings;\n              })\n            );\n          }\n        }\n        return transceiver;\n      };\n  }\n}\n\nfunction shimGetParameters(window) {\n  if (!(typeof window === 'object' && window.RTCRtpSender)) {\n    return;\n  }\n  const origGetParameters = window.RTCRtpSender.prototype.getParameters;\n  if (origGetParameters) {\n    window.RTCRtpSender.prototype.getParameters =\n      function getParameters() {\n        const params = origGetParameters.apply(this, arguments);\n        if (!('encodings' in params)) {\n          params.encodings = [].concat(this.sendEncodings || [{}]);\n        }\n        return params;\n      };\n  }\n}\n\nfunction shimCreateOffer(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(typeof window === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  const origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n  window.RTCPeerConnection.prototype.createOffer = function createOffer() {\n    if (this.setParametersPromises && this.setParametersPromises.length) {\n      return Promise.all(this.setParametersPromises)\n      .then(() => {\n        return origCreateOffer.apply(this, arguments);\n      })\n      .finally(() => {\n        this.setParametersPromises = [];\n      });\n    }\n    return origCreateOffer.apply(this, arguments);\n  };\n}\n\nfunction shimCreateAnswer(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(typeof window === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  const origCreateAnswer = window.RTCPeerConnection.prototype.createAnswer;\n  window.RTCPeerConnection.prototype.createAnswer = function createAnswer() {\n    if (this.setParametersPromises && this.setParametersPromises.length) {\n      return Promise.all(this.setParametersPromises)\n      .then(() => {\n        return origCreateAnswer.apply(this, arguments);\n      })\n      .finally(() => {\n        this.setParametersPromises = [];\n      });\n    }\n    return origCreateAnswer.apply(this, arguments);\n  };\n}\n\n\n//# sourceURL=webpack://100-ms-demo/./node_modules/webrtc-adapter/src/js/firefox/firefox_shim.js?");

/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/firefox/getdisplaymedia.js":
/*!***********************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/firefox/getdisplaymedia.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"shimGetDisplayMedia\": () => (/* binding */ shimGetDisplayMedia)\n/* harmony export */ });\n/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n\n\nfunction shimGetDisplayMedia(window, preferredMediaSource) {\n  if (window.navigator.mediaDevices &&\n    'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  if (!(window.navigator.mediaDevices)) {\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia =\n    function getDisplayMedia(constraints) {\n      if (!(constraints && constraints.video)) {\n        const err = new DOMException('getDisplayMedia without video ' +\n            'constraints is undefined');\n        err.name = 'NotFoundError';\n        // from https://heycam.github.io/webidl/#idl-DOMException-error-names\n        err.code = 8;\n        return Promise.reject(err);\n      }\n      if (constraints.video === true) {\n        constraints.video = {mediaSource: preferredMediaSource};\n      } else {\n        constraints.video.mediaSource = preferredMediaSource;\n      }\n      return window.navigator.mediaDevices.getUserMedia(constraints);\n    };\n}\n\n\n//# sourceURL=webpack://100-ms-demo/./node_modules/webrtc-adapter/src/js/firefox/getdisplaymedia.js?");

/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/firefox/getusermedia.js":
/*!********************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/firefox/getusermedia.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"shimGetUserMedia\": () => (/* binding */ shimGetUserMedia)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"./node_modules/webrtc-adapter/src/js/utils.js\");\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n\n\n\n\nfunction shimGetUserMedia(window, browserDetails) {\n  const navigator = window && window.navigator;\n  const MediaStreamTrack = window && window.MediaStreamTrack;\n\n  navigator.getUserMedia = function(constraints, onSuccess, onError) {\n    // Replace Firefox 44+'s deprecation warning with unprefixed version.\n    _utils__WEBPACK_IMPORTED_MODULE_0__.deprecated('navigator.getUserMedia',\n        'navigator.mediaDevices.getUserMedia');\n    navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);\n  };\n\n  if (!(browserDetails.version > 55 &&\n      'autoGainControl' in navigator.mediaDevices.getSupportedConstraints())) {\n    const remap = function(obj, a, b) {\n      if (a in obj && !(b in obj)) {\n        obj[b] = obj[a];\n        delete obj[a];\n      }\n    };\n\n    const nativeGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(c) {\n      if (typeof c === 'object' && typeof c.audio === 'object') {\n        c = JSON.parse(JSON.stringify(c));\n        remap(c.audio, 'autoGainControl', 'mozAutoGainControl');\n        remap(c.audio, 'noiseSuppression', 'mozNoiseSuppression');\n      }\n      return nativeGetUserMedia(c);\n    };\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.getSettings) {\n      const nativeGetSettings = MediaStreamTrack.prototype.getSettings;\n      MediaStreamTrack.prototype.getSettings = function() {\n        const obj = nativeGetSettings.apply(this, arguments);\n        remap(obj, 'mozAutoGainControl', 'autoGainControl');\n        remap(obj, 'mozNoiseSuppression', 'noiseSuppression');\n        return obj;\n      };\n    }\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.applyConstraints) {\n      const nativeApplyConstraints =\n        MediaStreamTrack.prototype.applyConstraints;\n      MediaStreamTrack.prototype.applyConstraints = function(c) {\n        if (this.kind === 'audio' && typeof c === 'object') {\n          c = JSON.parse(JSON.stringify(c));\n          remap(c, 'autoGainControl', 'mozAutoGainControl');\n          remap(c, 'noiseSuppression', 'mozNoiseSuppression');\n        }\n        return nativeApplyConstraints.apply(this, [c]);\n      };\n    }\n  }\n}\n\n\n//# sourceURL=webpack://100-ms-demo/./node_modules/webrtc-adapter/src/js/firefox/getusermedia.js?");

/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/safari/safari_shim.js":
/*!******************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/safari/safari_shim.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"shimAudioContext\": () => (/* binding */ shimAudioContext),\n/* harmony export */   \"shimCallbacksAPI\": () => (/* binding */ shimCallbacksAPI),\n/* harmony export */   \"shimConstraints\": () => (/* binding */ shimConstraints),\n/* harmony export */   \"shimCreateOfferLegacy\": () => (/* binding */ shimCreateOfferLegacy),\n/* harmony export */   \"shimGetUserMedia\": () => (/* binding */ shimGetUserMedia),\n/* harmony export */   \"shimLocalStreamsAPI\": () => (/* binding */ shimLocalStreamsAPI),\n/* harmony export */   \"shimRTCIceServerUrls\": () => (/* binding */ shimRTCIceServerUrls),\n/* harmony export */   \"shimRemoteStreamsAPI\": () => (/* binding */ shimRemoteStreamsAPI),\n/* harmony export */   \"shimTrackEventTransceiver\": () => (/* binding */ shimTrackEventTransceiver)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"./node_modules/webrtc-adapter/src/js/utils.js\");\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n\n\n\nfunction shimLocalStreamsAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getLocalStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getLocalStreams =\n      function getLocalStreams() {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        return this._localStreams;\n      };\n  }\n  if (!('addStream' in window.RTCPeerConnection.prototype)) {\n    const _addTrack = window.RTCPeerConnection.prototype.addTrack;\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n      if (!this._localStreams.includes(stream)) {\n        this._localStreams.push(stream);\n      }\n      // Try to emulate Chrome's behaviour of adding in audio-video order.\n      // Safari orders by track id.\n      stream.getAudioTracks().forEach(track => _addTrack.call(this, track,\n        stream));\n      stream.getVideoTracks().forEach(track => _addTrack.call(this, track,\n        stream));\n    };\n\n    window.RTCPeerConnection.prototype.addTrack =\n      function addTrack(track, ...streams) {\n        if (streams) {\n          streams.forEach((stream) => {\n            if (!this._localStreams) {\n              this._localStreams = [stream];\n            } else if (!this._localStreams.includes(stream)) {\n              this._localStreams.push(stream);\n            }\n          });\n        }\n        return _addTrack.apply(this, arguments);\n      };\n  }\n  if (!('removeStream' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.removeStream =\n      function removeStream(stream) {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        const index = this._localStreams.indexOf(stream);\n        if (index === -1) {\n          return;\n        }\n        this._localStreams.splice(index, 1);\n        const tracks = stream.getTracks();\n        this.getSenders().forEach(sender => {\n          if (tracks.includes(sender.track)) {\n            this.removeTrack(sender);\n          }\n        });\n      };\n  }\n}\n\nfunction shimRemoteStreamsAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getRemoteStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getRemoteStreams =\n      function getRemoteStreams() {\n        return this._remoteStreams ? this._remoteStreams : [];\n      };\n  }\n  if (!('onaddstream' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {\n      get() {\n        return this._onaddstream;\n      },\n      set(f) {\n        if (this._onaddstream) {\n          this.removeEventListener('addstream', this._onaddstream);\n          this.removeEventListener('track', this._onaddstreampoly);\n        }\n        this.addEventListener('addstream', this._onaddstream = f);\n        this.addEventListener('track', this._onaddstreampoly = (e) => {\n          e.streams.forEach(stream => {\n            if (!this._remoteStreams) {\n              this._remoteStreams = [];\n            }\n            if (this._remoteStreams.includes(stream)) {\n              return;\n            }\n            this._remoteStreams.push(stream);\n            const event = new Event('addstream');\n            event.stream = stream;\n            this.dispatchEvent(event);\n          });\n        });\n      }\n    });\n    const origSetRemoteDescription =\n      window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription =\n      function setRemoteDescription() {\n        const pc = this;\n        if (!this._onaddstreampoly) {\n          this.addEventListener('track', this._onaddstreampoly = function(e) {\n            e.streams.forEach(stream => {\n              if (!pc._remoteStreams) {\n                pc._remoteStreams = [];\n              }\n              if (pc._remoteStreams.indexOf(stream) >= 0) {\n                return;\n              }\n              pc._remoteStreams.push(stream);\n              const event = new Event('addstream');\n              event.stream = stream;\n              pc.dispatchEvent(event);\n            });\n          });\n        }\n        return origSetRemoteDescription.apply(pc, arguments);\n      };\n  }\n}\n\nfunction shimCallbacksAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  const prototype = window.RTCPeerConnection.prototype;\n  const origCreateOffer = prototype.createOffer;\n  const origCreateAnswer = prototype.createAnswer;\n  const setLocalDescription = prototype.setLocalDescription;\n  const setRemoteDescription = prototype.setRemoteDescription;\n  const addIceCandidate = prototype.addIceCandidate;\n\n  prototype.createOffer =\n    function createOffer(successCallback, failureCallback) {\n      const options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n      const promise = origCreateOffer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n  prototype.createAnswer =\n    function createAnswer(successCallback, failureCallback) {\n      const options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n      const promise = origCreateAnswer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n  let withCallback = function(description, successCallback, failureCallback) {\n    const promise = setLocalDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setLocalDescription = withCallback;\n\n  withCallback = function(description, successCallback, failureCallback) {\n    const promise = setRemoteDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setRemoteDescription = withCallback;\n\n  withCallback = function(candidate, successCallback, failureCallback) {\n    const promise = addIceCandidate.apply(this, [candidate]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.addIceCandidate = withCallback;\n}\n\nfunction shimGetUserMedia(window) {\n  const navigator = window && window.navigator;\n\n  if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n    // shim not needed in Safari 12.1\n    const mediaDevices = navigator.mediaDevices;\n    const _getUserMedia = mediaDevices.getUserMedia.bind(mediaDevices);\n    navigator.mediaDevices.getUserMedia = (constraints) => {\n      return _getUserMedia(shimConstraints(constraints));\n    };\n  }\n\n  if (!navigator.getUserMedia && navigator.mediaDevices &&\n    navigator.mediaDevices.getUserMedia) {\n    navigator.getUserMedia = function getUserMedia(constraints, cb, errcb) {\n      navigator.mediaDevices.getUserMedia(constraints)\n      .then(cb, errcb);\n    }.bind(navigator);\n  }\n}\n\nfunction shimConstraints(constraints) {\n  if (constraints && constraints.video !== undefined) {\n    return Object.assign({},\n      constraints,\n      {video: _utils__WEBPACK_IMPORTED_MODULE_0__.compactObject(constraints.video)}\n    );\n  }\n\n  return constraints;\n}\n\nfunction shimRTCIceServerUrls(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n  const OrigPeerConnection = window.RTCPeerConnection;\n  window.RTCPeerConnection =\n    function RTCPeerConnection(pcConfig, pcConstraints) {\n      if (pcConfig && pcConfig.iceServers) {\n        const newIceServers = [];\n        for (let i = 0; i < pcConfig.iceServers.length; i++) {\n          let server = pcConfig.iceServers[i];\n          if (!server.hasOwnProperty('urls') &&\n              server.hasOwnProperty('url')) {\n            _utils__WEBPACK_IMPORTED_MODULE_0__.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n            server = JSON.parse(JSON.stringify(server));\n            server.urls = server.url;\n            delete server.url;\n            newIceServers.push(server);\n          } else {\n            newIceServers.push(pcConfig.iceServers[i]);\n          }\n        }\n        pcConfig.iceServers = newIceServers;\n      }\n      return new OrigPeerConnection(pcConfig, pcConstraints);\n    };\n  window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n  // wrap static methods. Currently just generateCertificate.\n  if ('generateCertificate' in OrigPeerConnection) {\n    Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n      get() {\n        return OrigPeerConnection.generateCertificate;\n      }\n    });\n  }\n}\n\nfunction shimTrackEventTransceiver(window) {\n  // Add event.transceiver member over deprecated event.receiver\n  if (typeof window === 'object' && window.RTCTrackEvent &&\n      'receiver' in window.RTCTrackEvent.prototype &&\n      !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get() {\n        return {receiver: this.receiver};\n      }\n    });\n  }\n}\n\nfunction shimCreateOfferLegacy(window) {\n  const origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n  window.RTCPeerConnection.prototype.createOffer =\n    function createOffer(offerOptions) {\n      if (offerOptions) {\n        if (typeof offerOptions.offerToReceiveAudio !== 'undefined') {\n          // support bit values\n          offerOptions.offerToReceiveAudio =\n            !!offerOptions.offerToReceiveAudio;\n        }\n        const audioTransceiver = this.getTransceivers().find(transceiver =>\n          transceiver.receiver.track.kind === 'audio');\n        if (offerOptions.offerToReceiveAudio === false && audioTransceiver) {\n          if (audioTransceiver.direction === 'sendrecv') {\n            if (audioTransceiver.setDirection) {\n              audioTransceiver.setDirection('sendonly');\n            } else {\n              audioTransceiver.direction = 'sendonly';\n            }\n          } else if (audioTransceiver.direction === 'recvonly') {\n            if (audioTransceiver.setDirection) {\n              audioTransceiver.setDirection('inactive');\n            } else {\n              audioTransceiver.direction = 'inactive';\n            }\n          }\n        } else if (offerOptions.offerToReceiveAudio === true &&\n            !audioTransceiver) {\n          this.addTransceiver('audio', {direction: 'recvonly'});\n        }\n\n        if (typeof offerOptions.offerToReceiveVideo !== 'undefined') {\n          // support bit values\n          offerOptions.offerToReceiveVideo =\n            !!offerOptions.offerToReceiveVideo;\n        }\n        const videoTransceiver = this.getTransceivers().find(transceiver =>\n          transceiver.receiver.track.kind === 'video');\n        if (offerOptions.offerToReceiveVideo === false && videoTransceiver) {\n          if (videoTransceiver.direction === 'sendrecv') {\n            if (videoTransceiver.setDirection) {\n              videoTransceiver.setDirection('sendonly');\n            } else {\n              videoTransceiver.direction = 'sendonly';\n            }\n          } else if (videoTransceiver.direction === 'recvonly') {\n            if (videoTransceiver.setDirection) {\n              videoTransceiver.setDirection('inactive');\n            } else {\n              videoTransceiver.direction = 'inactive';\n            }\n          }\n        } else if (offerOptions.offerToReceiveVideo === true &&\n            !videoTransceiver) {\n          this.addTransceiver('video', {direction: 'recvonly'});\n        }\n      }\n      return origCreateOffer.apply(this, arguments);\n    };\n}\n\nfunction shimAudioContext(window) {\n  if (typeof window !== 'object' || window.AudioContext) {\n    return;\n  }\n  window.AudioContext = window.webkitAudioContext;\n}\n\n\n\n//# sourceURL=webpack://100-ms-demo/./node_modules/webrtc-adapter/src/js/safari/safari_shim.js?");

/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/utils.js":
/*!*****************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/utils.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"compactObject\": () => (/* binding */ compactObject),\n/* harmony export */   \"deprecated\": () => (/* binding */ deprecated),\n/* harmony export */   \"detectBrowser\": () => (/* binding */ detectBrowser),\n/* harmony export */   \"disableLog\": () => (/* binding */ disableLog),\n/* harmony export */   \"disableWarnings\": () => (/* binding */ disableWarnings),\n/* harmony export */   \"extractVersion\": () => (/* binding */ extractVersion),\n/* harmony export */   \"filterStats\": () => (/* binding */ filterStats),\n/* harmony export */   \"log\": () => (/* binding */ log),\n/* harmony export */   \"walkStats\": () => (/* binding */ walkStats),\n/* harmony export */   \"wrapPeerConnectionEvent\": () => (/* binding */ wrapPeerConnectionEvent)\n/* harmony export */ });\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n\n\nlet logDisabled_ = true;\nlet deprecationWarnings_ = true;\n\n/**\n * Extract browser version out of the provided user agent string.\n *\n * @param {!string} uastring userAgent string.\n * @param {!string} expr Regular expression used as match criteria.\n * @param {!number} pos position in the version string to be returned.\n * @return {!number} browser version.\n */\nfunction extractVersion(uastring, expr, pos) {\n  const match = uastring.match(expr);\n  return match && match.length >= pos && parseInt(match[pos], 10);\n}\n\n// Wraps the peerconnection event eventNameToWrap in a function\n// which returns the modified event object (or false to prevent\n// the event).\nfunction wrapPeerConnectionEvent(window, eventNameToWrap, wrapper) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  const proto = window.RTCPeerConnection.prototype;\n  const nativeAddEventListener = proto.addEventListener;\n  proto.addEventListener = function(nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap) {\n      return nativeAddEventListener.apply(this, arguments);\n    }\n    const wrappedCallback = (e) => {\n      const modifiedEvent = wrapper(e);\n      if (modifiedEvent) {\n        if (cb.handleEvent) {\n          cb.handleEvent(modifiedEvent);\n        } else {\n          cb(modifiedEvent);\n        }\n      }\n    };\n    this._eventMap = this._eventMap || {};\n    if (!this._eventMap[eventNameToWrap]) {\n      this._eventMap[eventNameToWrap] = new Map();\n    }\n    this._eventMap[eventNameToWrap].set(cb, wrappedCallback);\n    return nativeAddEventListener.apply(this, [nativeEventName,\n      wrappedCallback]);\n  };\n\n  const nativeRemoveEventListener = proto.removeEventListener;\n  proto.removeEventListener = function(nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap || !this._eventMap\n        || !this._eventMap[eventNameToWrap]) {\n      return nativeRemoveEventListener.apply(this, arguments);\n    }\n    if (!this._eventMap[eventNameToWrap].has(cb)) {\n      return nativeRemoveEventListener.apply(this, arguments);\n    }\n    const unwrappedCb = this._eventMap[eventNameToWrap].get(cb);\n    this._eventMap[eventNameToWrap].delete(cb);\n    if (this._eventMap[eventNameToWrap].size === 0) {\n      delete this._eventMap[eventNameToWrap];\n    }\n    if (Object.keys(this._eventMap).length === 0) {\n      delete this._eventMap;\n    }\n    return nativeRemoveEventListener.apply(this, [nativeEventName,\n      unwrappedCb]);\n  };\n\n  Object.defineProperty(proto, 'on' + eventNameToWrap, {\n    get() {\n      return this['_on' + eventNameToWrap];\n    },\n    set(cb) {\n      if (this['_on' + eventNameToWrap]) {\n        this.removeEventListener(eventNameToWrap,\n            this['_on' + eventNameToWrap]);\n        delete this['_on' + eventNameToWrap];\n      }\n      if (cb) {\n        this.addEventListener(eventNameToWrap,\n            this['_on' + eventNameToWrap] = cb);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n}\n\nfunction disableLog(bool) {\n  if (typeof bool !== 'boolean') {\n    return new Error('Argument type: ' + typeof bool +\n        '. Please use a boolean.');\n  }\n  logDisabled_ = bool;\n  return (bool) ? 'adapter.js logging disabled' :\n      'adapter.js logging enabled';\n}\n\n/**\n * Disable or enable deprecation warnings\n * @param {!boolean} bool set to true to disable warnings.\n */\nfunction disableWarnings(bool) {\n  if (typeof bool !== 'boolean') {\n    return new Error('Argument type: ' + typeof bool +\n        '. Please use a boolean.');\n  }\n  deprecationWarnings_ = !bool;\n  return 'adapter.js deprecation warnings ' + (bool ? 'disabled' : 'enabled');\n}\n\nfunction log() {\n  if (typeof window === 'object') {\n    if (logDisabled_) {\n      return;\n    }\n    if (typeof console !== 'undefined' && typeof console.log === 'function') {\n      console.log.apply(console, arguments);\n    }\n  }\n}\n\n/**\n * Shows a deprecation warning suggesting the modern and spec-compatible API.\n */\nfunction deprecated(oldMethod, newMethod) {\n  if (!deprecationWarnings_) {\n    return;\n  }\n  console.warn(oldMethod + ' is deprecated, please use ' + newMethod +\n      ' instead.');\n}\n\n/**\n * Browser detector.\n *\n * @return {object} result containing browser and version\n *     properties.\n */\nfunction detectBrowser(window) {\n  // Returned result object.\n  const result = {browser: null, version: null};\n\n  // Fail early if it's not a browser\n  if (typeof window === 'undefined' || !window.navigator) {\n    result.browser = 'Not a browser.';\n    return result;\n  }\n\n  const {navigator} = window;\n\n  if (navigator.mozGetUserMedia) { // Firefox.\n    result.browser = 'firefox';\n    result.version = extractVersion(navigator.userAgent,\n        /Firefox\\/(\\d+)\\./, 1);\n  } else if (navigator.webkitGetUserMedia ||\n      (window.isSecureContext === false && window.webkitRTCPeerConnection)) {\n    // Chrome, Chromium, Webview, Opera.\n    // Version matches Chrome/WebRTC version.\n    // Chrome 74 removed webkitGetUserMedia on http as well so we need the\n    // more complicated fallback to webkitRTCPeerConnection.\n    result.browser = 'chrome';\n    result.version = extractVersion(navigator.userAgent,\n        /Chrom(e|ium)\\/(\\d+)\\./, 2);\n  } else if (window.RTCPeerConnection &&\n      navigator.userAgent.match(/AppleWebKit\\/(\\d+)\\./)) { // Safari.\n    result.browser = 'safari';\n    result.version = extractVersion(navigator.userAgent,\n        /AppleWebKit\\/(\\d+)\\./, 1);\n    result.supportsUnifiedPlan = window.RTCRtpTransceiver &&\n        'currentDirection' in window.RTCRtpTransceiver.prototype;\n  } else { // Default fallthrough: not supported.\n    result.browser = 'Not a supported browser.';\n    return result;\n  }\n\n  return result;\n}\n\n/**\n * Checks if something is an object.\n *\n * @param {*} val The something you want to check.\n * @return true if val is an object, false otherwise.\n */\nfunction isObject(val) {\n  return Object.prototype.toString.call(val) === '[object Object]';\n}\n\n/**\n * Remove all empty objects and undefined values\n * from a nested object -- an enhanced and vanilla version\n * of Lodash's `compact`.\n */\nfunction compactObject(data) {\n  if (!isObject(data)) {\n    return data;\n  }\n\n  return Object.keys(data).reduce(function(accumulator, key) {\n    const isObj = isObject(data[key]);\n    const value = isObj ? compactObject(data[key]) : data[key];\n    const isEmptyObject = isObj && !Object.keys(value).length;\n    if (value === undefined || isEmptyObject) {\n      return accumulator;\n    }\n    return Object.assign(accumulator, {[key]: value});\n  }, {});\n}\n\n/* iterates the stats graph recursively. */\nfunction walkStats(stats, base, resultSet) {\n  if (!base || resultSet.has(base.id)) {\n    return;\n  }\n  resultSet.set(base.id, base);\n  Object.keys(base).forEach(name => {\n    if (name.endsWith('Id')) {\n      walkStats(stats, stats.get(base[name]), resultSet);\n    } else if (name.endsWith('Ids')) {\n      base[name].forEach(id => {\n        walkStats(stats, stats.get(id), resultSet);\n      });\n    }\n  });\n}\n\n/* filter getStats for a sender/receiver track. */\nfunction filterStats(result, track, outbound) {\n  const streamStatsType = outbound ? 'outbound-rtp' : 'inbound-rtp';\n  const filteredResult = new Map();\n  if (track === null) {\n    return filteredResult;\n  }\n  const trackStats = [];\n  result.forEach(value => {\n    if (value.type === 'track' &&\n        value.trackIdentifier === track.id) {\n      trackStats.push(value);\n    }\n  });\n  trackStats.forEach(trackStat => {\n    result.forEach(stats => {\n      if (stats.type === streamStatsType && stats.trackId === trackStat.id) {\n        walkStats(result, stats, filteredResult);\n      }\n    });\n  });\n  return filteredResult;\n}\n\n\n\n//# sourceURL=webpack://100-ms-demo/./node_modules/webrtc-adapter/src/js/utils.js?");

/***/ }),

/***/ "./node_modules/zustand/esm/shallow.js":
/*!*********************************************!*\
  !*** ./node_modules/zustand/esm/shallow.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nfunction shallow(objA, objB) {\n  if (Object.is(objA, objB)) {\n    return true;\n  }\n  if (typeof objA !== \"object\" || objA === null || typeof objB !== \"object\" || objB === null) {\n    return false;\n  }\n  const keysA = Object.keys(objA);\n  if (keysA.length !== Object.keys(objB).length) {\n    return false;\n  }\n  for (let i = 0; i < keysA.length; i++) {\n    if (!Object.prototype.hasOwnProperty.call(objB, keysA[i]) || !Object.is(objA[keysA[i]], objB[keysA[i]])) {\n      return false;\n    }\n  }\n  return true;\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (shallow);\n\n\n//# sourceURL=webpack://100-ms-demo/./node_modules/zustand/esm/shallow.js?");

/***/ }),

/***/ "./node_modules/zustand/esm/vanilla.js":
/*!*********************************************!*\
  !*** ./node_modules/zustand/esm/vanilla.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nfunction create(createState) {\n  let state;\n  const listeners = new Set();\n  const setState = (partial, replace) => {\n    const nextState = typeof partial === \"function\" ? partial(state) : partial;\n    if (nextState !== state) {\n      const previousState = state;\n      state = replace ? nextState : Object.assign({}, state, nextState);\n      listeners.forEach((listener) => listener(state, previousState));\n    }\n  };\n  const getState = () => state;\n  const subscribeWithSelector = (listener, selector = getState, equalityFn = Object.is) => {\n    let currentSlice = selector(state);\n    function listenerToAdd() {\n      const nextSlice = selector(state);\n      if (!equalityFn(currentSlice, nextSlice)) {\n        const previousSlice = currentSlice;\n        listener(currentSlice = nextSlice, previousSlice);\n      }\n    }\n    listeners.add(listenerToAdd);\n    return () => listeners.delete(listenerToAdd);\n  };\n  const subscribe = (listener, selector, equalityFn) => {\n    if (selector || equalityFn) {\n      return subscribeWithSelector(listener, selector, equalityFn);\n    }\n    listeners.add(listener);\n    return () => listeners.delete(listener);\n  };\n  const destroy = () => listeners.clear();\n  const api = { setState, getState, subscribe, destroy };\n  state = createState(setState, getState, api);\n  return api;\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (create);\n\n\n//# sourceURL=webpack://100-ms-demo/./node_modules/zustand/esm/vanilla.js?");

/***/ }),

/***/ "./src/js/main.js":
/*!************************!*\
  !*** ./src/js/main.js ***!
  \************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("__webpack_require__(/*! ./script.js */ \"./src/js/script.js\");\n\n//# sourceURL=webpack://100-ms-demo/./src/js/main.js?");

/***/ }),

/***/ "./src/js/script.js":
/*!**************************!*\
  !*** ./src/js/script.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _100mslive_hms_video_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @100mslive/hms-video-store */ \"./node_modules/@100mslive/hms-video-store/dist/index.js\");\n\r\n\r\nconst hms = new _100mslive_hms_video_store__WEBPACK_IMPORTED_MODULE_0__.HMSReactiveStore();\r\nconst hmsStore = hms.getStore();\r\nconst hmsActions = hms.getActions();\r\n\r\nconst joinBtn = document.getElementById(\"join-btn\");\r\njoinBtn.addEventListener('click', () => {\r\n    hmsActions.join({\r\n        userName: document.getElementById('name').value,\r\n        authToken: document.getElementById('token').value\r\n    });\r\n});\n\n//# sourceURL=webpack://100-ms-demo/./src/js/script.js?");

/***/ }),

/***/ "./node_modules/immer/dist/immer.esm.mjs":
/*!***********************************************!*\
  !*** ./node_modules/immer/dist/immer.esm.mjs ***!
  \***********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Immer\": () => (/* binding */ un),\n/* harmony export */   \"applyPatches\": () => (/* binding */ pn),\n/* harmony export */   \"castDraft\": () => (/* binding */ K),\n/* harmony export */   \"castImmutable\": () => (/* binding */ $),\n/* harmony export */   \"createDraft\": () => (/* binding */ ln),\n/* harmony export */   \"current\": () => (/* binding */ D),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   \"enableAllPlugins\": () => (/* binding */ J),\n/* harmony export */   \"enableES5\": () => (/* binding */ N),\n/* harmony export */   \"enableMapSet\": () => (/* binding */ C),\n/* harmony export */   \"enablePatches\": () => (/* binding */ T),\n/* harmony export */   \"finishDraft\": () => (/* binding */ dn),\n/* harmony export */   \"freeze\": () => (/* binding */ d),\n/* harmony export */   \"immerable\": () => (/* binding */ L),\n/* harmony export */   \"isDraft\": () => (/* binding */ r),\n/* harmony export */   \"isDraftable\": () => (/* binding */ t),\n/* harmony export */   \"nothing\": () => (/* binding */ H),\n/* harmony export */   \"original\": () => (/* binding */ e),\n/* harmony export */   \"produce\": () => (/* binding */ fn),\n/* harmony export */   \"produceWithPatches\": () => (/* binding */ cn),\n/* harmony export */   \"setAutoFreeze\": () => (/* binding */ sn),\n/* harmony export */   \"setUseProxies\": () => (/* binding */ vn)\n/* harmony export */ });\nfunction n(n){for(var r=arguments.length,t=Array(r>1?r-1:0),e=1;e<r;e++)t[e-1]=arguments[e];if(true){var i=Y[n],o=i?\"function\"==typeof i?i.apply(null,t):i:\"unknown error nr: \"+n;throw Error(\"[Immer] \"+o)}throw Error(\"[Immer] minified error nr: \"+n+(t.length?\" \"+t.map((function(n){return\"'\"+n+\"'\"})).join(\",\"):\"\")+\". Find the full error at: https://bit.ly/3cXEKWf\")}function r(n){return!!n&&!!n[Q]}function t(n){return!!n&&(function(n){if(!n||\"object\"!=typeof n)return!1;var r=Object.getPrototypeOf(n);if(null===r)return!0;var t=Object.hasOwnProperty.call(r,\"constructor\")&&r.constructor;return t===Object||\"function\"==typeof t&&Function.toString.call(t)===Z}(n)||Array.isArray(n)||!!n[L]||!!n.constructor[L]||s(n)||v(n))}function e(t){return r(t)||n(23,t),t[Q].t}function i(n,r,t){void 0===t&&(t=!1),0===o(n)?(t?Object.keys:nn)(n).forEach((function(e){t&&\"symbol\"==typeof e||r(e,n[e],n)})):n.forEach((function(t,e){return r(e,t,n)}))}function o(n){var r=n[Q];return r?r.i>3?r.i-4:r.i:Array.isArray(n)?1:s(n)?2:v(n)?3:0}function u(n,r){return 2===o(n)?n.has(r):Object.prototype.hasOwnProperty.call(n,r)}function a(n,r){return 2===o(n)?n.get(r):n[r]}function f(n,r,t){var e=o(n);2===e?n.set(r,t):3===e?(n.delete(r),n.add(t)):n[r]=t}function c(n,r){return n===r?0!==n||1/n==1/r:n!=n&&r!=r}function s(n){return X&&n instanceof Map}function v(n){return q&&n instanceof Set}function p(n){return n.o||n.t}function l(n){if(Array.isArray(n))return Array.prototype.slice.call(n);var r=rn(n);delete r[Q];for(var t=nn(r),e=0;e<t.length;e++){var i=t[e],o=r[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:n[i]})}return Object.create(Object.getPrototypeOf(n),r)}function d(n,e){return void 0===e&&(e=!1),y(n)||r(n)||!t(n)?n:(o(n)>1&&(n.set=n.add=n.clear=n.delete=h),Object.freeze(n),e&&i(n,(function(n,r){return d(r,!0)}),!0),n)}function h(){n(2)}function y(n){return null==n||\"object\"!=typeof n||Object.isFrozen(n)}function b(r){var t=tn[r];return t||n(18,r),t}function m(n,r){tn[n]||(tn[n]=r)}function _(){return false||U||n(0),U}function j(n,r){r&&(b(\"Patches\"),n.u=[],n.s=[],n.v=r)}function O(n){g(n),n.p.forEach(S),n.p=null}function g(n){n===U&&(U=n.l)}function w(n){return U={p:[],l:U,h:n,m:!0,_:0}}function S(n){var r=n[Q];0===r.i||1===r.i?r.j():r.O=!0}function P(r,e){e._=e.p.length;var i=e.p[0],o=void 0!==r&&r!==i;return e.h.g||b(\"ES5\").S(e,r,o),o?(i[Q].P&&(O(e),n(4)),t(r)&&(r=M(e,r),e.l||x(e,r)),e.u&&b(\"Patches\").M(i[Q].t,r,e.u,e.s)):r=M(e,i,[]),O(e),e.u&&e.v(e.u,e.s),r!==H?r:void 0}function M(n,r,t){if(y(r))return r;var e=r[Q];if(!e)return i(r,(function(i,o){return A(n,e,r,i,o,t)}),!0),r;if(e.A!==n)return r;if(!e.P)return x(n,e.t,!0),e.t;if(!e.I){e.I=!0,e.A._--;var o=4===e.i||5===e.i?e.o=l(e.k):e.o;i(3===e.i?new Set(o):o,(function(r,i){return A(n,e,o,r,i,t)})),x(n,o,!1),t&&n.u&&b(\"Patches\").R(e,t,n.u,n.s)}return e.o}function A(e,i,o,a,c,s){if( true&&c===o&&n(5),r(c)){var v=M(e,c,s&&i&&3!==i.i&&!u(i.D,a)?s.concat(a):void 0);if(f(o,a,v),!r(v))return;e.m=!1}if(t(c)&&!y(c)){if(!e.h.F&&e._<1)return;M(e,c),i&&i.A.l||x(e,c)}}function x(n,r,t){void 0===t&&(t=!1),n.h.F&&n.m&&d(r,t)}function z(n,r){var t=n[Q];return(t?p(t):n)[r]}function I(n,r){if(r in n)for(var t=Object.getPrototypeOf(n);t;){var e=Object.getOwnPropertyDescriptor(t,r);if(e)return e;t=Object.getPrototypeOf(t)}}function k(n){n.P||(n.P=!0,n.l&&k(n.l))}function E(n){n.o||(n.o=l(n.t))}function R(n,r,t){var e=s(r)?b(\"MapSet\").N(r,t):v(r)?b(\"MapSet\").T(r,t):n.g?function(n,r){var t=Array.isArray(n),e={i:t?1:0,A:r?r.A:_(),P:!1,I:!1,D:{},l:r,t:n,k:null,o:null,j:null,C:!1},i=e,o=en;t&&(i=[e],o=on);var u=Proxy.revocable(i,o),a=u.revoke,f=u.proxy;return e.k=f,e.j=a,f}(r,t):b(\"ES5\").J(r,t);return(t?t.A:_()).p.push(e),e}function D(e){return r(e)||n(22,e),function n(r){if(!t(r))return r;var e,u=r[Q],c=o(r);if(u){if(!u.P&&(u.i<4||!b(\"ES5\").K(u)))return u.t;u.I=!0,e=F(r,c),u.I=!1}else e=F(r,c);return i(e,(function(r,t){u&&a(u.t,r)===t||f(e,r,n(t))})),3===c?new Set(e):e}(e)}function F(n,r){switch(r){case 2:return new Map(n);case 3:return Array.from(n)}return l(n)}function N(){function t(n,r){var t=s[n];return t?t.enumerable=r:s[n]=t={configurable:!0,enumerable:r,get:function(){var r=this[Q];return true&&f(r),en.get(r,n)},set:function(r){var t=this[Q]; true&&f(t),en.set(t,n,r)}},t}function e(n){for(var r=n.length-1;r>=0;r--){var t=n[r][Q];if(!t.P)switch(t.i){case 5:a(t)&&k(t);break;case 4:o(t)&&k(t)}}}function o(n){for(var r=n.t,t=n.k,e=nn(t),i=e.length-1;i>=0;i--){var o=e[i];if(o!==Q){var a=r[o];if(void 0===a&&!u(r,o))return!0;var f=t[o],s=f&&f[Q];if(s?s.t!==a:!c(f,a))return!0}}var v=!!r[Q];return e.length!==nn(r).length+(v?0:1)}function a(n){var r=n.k;if(r.length!==n.t.length)return!0;var t=Object.getOwnPropertyDescriptor(r,r.length-1);if(t&&!t.get)return!0;for(var e=0;e<r.length;e++)if(!r.hasOwnProperty(e))return!0;return!1}function f(r){r.O&&n(3,JSON.stringify(p(r)))}var s={};m(\"ES5\",{J:function(n,r){var e=Array.isArray(n),i=function(n,r){if(n){for(var e=Array(r.length),i=0;i<r.length;i++)Object.defineProperty(e,\"\"+i,t(i,!0));return e}var o=rn(r);delete o[Q];for(var u=nn(o),a=0;a<u.length;a++){var f=u[a];o[f]=t(f,n||!!o[f].enumerable)}return Object.create(Object.getPrototypeOf(r),o)}(e,n),o={i:e?5:4,A:r?r.A:_(),P:!1,I:!1,D:{},l:r,t:n,k:i,o:null,O:!1,C:!1};return Object.defineProperty(i,Q,{value:o,writable:!0}),i},S:function(n,t,o){o?r(t)&&t[Q].A===n&&e(n.p):(n.u&&function n(r){if(r&&\"object\"==typeof r){var t=r[Q];if(t){var e=t.t,o=t.k,f=t.D,c=t.i;if(4===c)i(o,(function(r){r!==Q&&(void 0!==e[r]||u(e,r)?f[r]||n(o[r]):(f[r]=!0,k(t)))})),i(e,(function(n){void 0!==o[n]||u(o,n)||(f[n]=!1,k(t))}));else if(5===c){if(a(t)&&(k(t),f.length=!0),o.length<e.length)for(var s=o.length;s<e.length;s++)f[s]=!1;else for(var v=e.length;v<o.length;v++)f[v]=!0;for(var p=Math.min(o.length,e.length),l=0;l<p;l++)o.hasOwnProperty(l)||(f[l]=!0),void 0===f[l]&&n(o[l])}}}}(n.p[0]),e(n.p))},K:function(n){return 4===n.i?o(n):a(n)}})}function T(){function e(n){if(!t(n))return n;if(Array.isArray(n))return n.map(e);if(s(n))return new Map(Array.from(n.entries()).map((function(n){return[n[0],e(n[1])]})));if(v(n))return new Set(Array.from(n).map(e));var r=Object.create(Object.getPrototypeOf(n));for(var i in n)r[i]=e(n[i]);return u(n,L)&&(r[L]=n[L]),r}function f(n){return r(n)?e(n):n}var c=\"add\";m(\"Patches\",{$:function(r,t){return t.forEach((function(t){for(var i=t.path,u=t.op,f=r,s=0;s<i.length-1;s++){var v=o(f),p=\"\"+i[s];0!==v&&1!==v||\"__proto__\"!==p&&\"constructor\"!==p||n(24),\"function\"==typeof f&&\"prototype\"===p&&n(24),\"object\"!=typeof(f=a(f,p))&&n(15,i.join(\"/\"))}var l=o(f),d=e(t.value),h=i[i.length-1];switch(u){case\"replace\":switch(l){case 2:return f.set(h,d);case 3:n(16);default:return f[h]=d}case c:switch(l){case 1:return\"-\"===h?f.push(d):f.splice(h,0,d);case 2:return f.set(h,d);case 3:return f.add(d);default:return f[h]=d}case\"remove\":switch(l){case 1:return f.splice(h,1);case 2:return f.delete(h);case 3:return f.delete(t.value);default:return delete f[h]}default:n(17,u)}})),r},R:function(n,r,t,e){switch(n.i){case 0:case 4:case 2:return function(n,r,t,e){var o=n.t,s=n.o;i(n.D,(function(n,i){var v=a(o,n),p=a(s,n),l=i?u(o,n)?\"replace\":c:\"remove\";if(v!==p||\"replace\"!==l){var d=r.concat(n);t.push(\"remove\"===l?{op:l,path:d}:{op:l,path:d,value:p}),e.push(l===c?{op:\"remove\",path:d}:\"remove\"===l?{op:c,path:d,value:f(v)}:{op:\"replace\",path:d,value:f(v)})}}))}(n,r,t,e);case 5:case 1:return function(n,r,t,e){var i=n.t,o=n.D,u=n.o;if(u.length<i.length){var a=[u,i];i=a[0],u=a[1];var s=[e,t];t=s[0],e=s[1]}for(var v=0;v<i.length;v++)if(o[v]&&u[v]!==i[v]){var p=r.concat([v]);t.push({op:\"replace\",path:p,value:f(u[v])}),e.push({op:\"replace\",path:p,value:f(i[v])})}for(var l=i.length;l<u.length;l++){var d=r.concat([l]);t.push({op:c,path:d,value:f(u[l])})}i.length<u.length&&e.push({op:\"replace\",path:r.concat([\"length\"]),value:i.length})}(n,r,t,e);case 3:return function(n,r,t,e){var i=n.t,o=n.o,u=0;i.forEach((function(n){if(!o.has(n)){var i=r.concat([u]);t.push({op:\"remove\",path:i,value:n}),e.unshift({op:c,path:i,value:n})}u++})),u=0,o.forEach((function(n){if(!i.has(n)){var o=r.concat([u]);t.push({op:c,path:o,value:n}),e.unshift({op:\"remove\",path:o,value:n})}u++}))}(n,r,t,e)}},M:function(n,r,t,e){t.push({op:\"replace\",path:[],value:r===H?void 0:r}),e.push({op:\"replace\",path:[],value:n})}})}function C(){function r(n,r){function t(){this.constructor=n}a(n,r),n.prototype=(t.prototype=r.prototype,new t)}function e(n){n.o||(n.D=new Map,n.o=new Map(n.t))}function o(n){n.o||(n.o=new Set,n.t.forEach((function(r){if(t(r)){var e=R(n.A.h,r,n);n.p.set(r,e),n.o.add(e)}else n.o.add(r)})))}function u(r){r.O&&n(3,JSON.stringify(p(r)))}var a=function(n,r){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t])})(n,r)},f=function(){function n(n,r){return this[Q]={i:2,l:r,A:r?r.A:_(),P:!1,I:!1,o:void 0,D:void 0,t:n,k:this,C:!1,O:!1},this}r(n,Map);var o=n.prototype;return Object.defineProperty(o,\"size\",{get:function(){return p(this[Q]).size}}),o.has=function(n){return p(this[Q]).has(n)},o.set=function(n,r){var t=this[Q];return u(t),p(t).has(n)&&p(t).get(n)===r||(e(t),k(t),t.D.set(n,!0),t.o.set(n,r),t.D.set(n,!0)),this},o.delete=function(n){if(!this.has(n))return!1;var r=this[Q];return u(r),e(r),k(r),r.t.has(n)?r.D.set(n,!1):r.D.delete(n),r.o.delete(n),!0},o.clear=function(){var n=this[Q];u(n),p(n).size&&(e(n),k(n),n.D=new Map,i(n.t,(function(r){n.D.set(r,!1)})),n.o.clear())},o.forEach=function(n,r){var t=this;p(this[Q]).forEach((function(e,i){n.call(r,t.get(i),i,t)}))},o.get=function(n){var r=this[Q];u(r);var i=p(r).get(n);if(r.I||!t(i))return i;if(i!==r.t.get(n))return i;var o=R(r.A.h,i,r);return e(r),r.o.set(n,o),o},o.keys=function(){return p(this[Q]).keys()},o.values=function(){var n,r=this,t=this.keys();return(n={})[V]=function(){return r.values()},n.next=function(){var n=t.next();return n.done?n:{done:!1,value:r.get(n.value)}},n},o.entries=function(){var n,r=this,t=this.keys();return(n={})[V]=function(){return r.entries()},n.next=function(){var n=t.next();if(n.done)return n;var e=r.get(n.value);return{done:!1,value:[n.value,e]}},n},o[V]=function(){return this.entries()},n}(),c=function(){function n(n,r){return this[Q]={i:3,l:r,A:r?r.A:_(),P:!1,I:!1,o:void 0,t:n,k:this,p:new Map,O:!1,C:!1},this}r(n,Set);var t=n.prototype;return Object.defineProperty(t,\"size\",{get:function(){return p(this[Q]).size}}),t.has=function(n){var r=this[Q];return u(r),r.o?!!r.o.has(n)||!(!r.p.has(n)||!r.o.has(r.p.get(n))):r.t.has(n)},t.add=function(n){var r=this[Q];return u(r),this.has(n)||(o(r),k(r),r.o.add(n)),this},t.delete=function(n){if(!this.has(n))return!1;var r=this[Q];return u(r),o(r),k(r),r.o.delete(n)||!!r.p.has(n)&&r.o.delete(r.p.get(n))},t.clear=function(){var n=this[Q];u(n),p(n).size&&(o(n),k(n),n.o.clear())},t.values=function(){var n=this[Q];return u(n),o(n),n.o.values()},t.entries=function(){var n=this[Q];return u(n),o(n),n.o.entries()},t.keys=function(){return this.values()},t[V]=function(){return this.values()},t.forEach=function(n,r){for(var t=this.values(),e=t.next();!e.done;)n.call(r,e.value,e.value,this),e=t.next()},n}();m(\"MapSet\",{N:function(n,r){return new f(n,r)},T:function(n,r){return new c(n,r)}})}function J(){N(),C(),T()}function K(n){return n}function $(n){return n}var G,U,W=\"undefined\"!=typeof Symbol&&\"symbol\"==typeof Symbol(\"x\"),X=\"undefined\"!=typeof Map,q=\"undefined\"!=typeof Set,B=\"undefined\"!=typeof Proxy&&void 0!==Proxy.revocable&&\"undefined\"!=typeof Reflect,H=W?Symbol.for(\"immer-nothing\"):((G={})[\"immer-nothing\"]=!0,G),L=W?Symbol.for(\"immer-draftable\"):\"__$immer_draftable\",Q=W?Symbol.for(\"immer-state\"):\"__$immer_state\",V=\"undefined\"!=typeof Symbol&&Symbol.iterator||\"@@iterator\",Y={0:\"Illegal state\",1:\"Immer drafts cannot have computed properties\",2:\"This object has been frozen and should not be mutated\",3:function(n){return\"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? \"+n},4:\"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.\",5:\"Immer forbids circular references\",6:\"The first or second argument to `produce` must be a function\",7:\"The third argument to `produce` must be a function or undefined\",8:\"First argument to `createDraft` must be a plain object, an array, or an immerable object\",9:\"First argument to `finishDraft` must be a draft returned by `createDraft`\",10:\"The given draft is already finalized\",11:\"Object.defineProperty() cannot be used on an Immer draft\",12:\"Object.setPrototypeOf() cannot be used on an Immer draft\",13:\"Immer only supports deleting array indices\",14:\"Immer only supports setting array indices and the 'length' property\",15:function(n){return\"Cannot apply patch, path doesn't resolve: \"+n},16:'Sets cannot have \"replace\" patches.',17:function(n){return\"Unsupported patch operation: \"+n},18:function(n){return\"The plugin for '\"+n+\"' has not been loaded into Immer. To enable the plugin, import and call `enable\"+n+\"()` when initializing your application.\"},20:\"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available\",21:function(n){return\"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '\"+n+\"'\"},22:function(n){return\"'current' expects a draft, got: \"+n},23:function(n){return\"'original' expects a draft, got: \"+n},24:\"Patching reserved attributes like __proto__, prototype and constructor is not allowed\"},Z=\"\"+Object.prototype.constructor,nn=\"undefined\"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:Object.getOwnPropertyNames,rn=Object.getOwnPropertyDescriptors||function(n){var r={};return nn(n).forEach((function(t){r[t]=Object.getOwnPropertyDescriptor(n,t)})),r},tn={},en={get:function(n,r){if(r===Q)return n;var e=p(n);if(!u(e,r))return function(n,r,t){var e,i=I(r,t);return i?\"value\"in i?i.value:null===(e=i.get)||void 0===e?void 0:e.call(n.k):void 0}(n,e,r);var i=e[r];return n.I||!t(i)?i:i===z(n.t,r)?(E(n),n.o[r]=R(n.A.h,i,n)):i},has:function(n,r){return r in p(n)},ownKeys:function(n){return Reflect.ownKeys(p(n))},set:function(n,r,t){var e=I(p(n),r);if(null==e?void 0:e.set)return e.set.call(n.k,t),!0;if(!n.P){var i=z(p(n),r),o=null==i?void 0:i[Q];if(o&&o.t===t)return n.o[r]=t,n.D[r]=!1,!0;if(c(t,i)&&(void 0!==t||u(n.t,r)))return!0;E(n),k(n)}return n.o[r]===t&&\"number\"!=typeof t&&(void 0!==t||r in n.o)||(n.o[r]=t,n.D[r]=!0,!0)},deleteProperty:function(n,r){return void 0!==z(n.t,r)||r in n.t?(n.D[r]=!1,E(n),k(n)):delete n.D[r],n.o&&delete n.o[r],!0},getOwnPropertyDescriptor:function(n,r){var t=p(n),e=Reflect.getOwnPropertyDescriptor(t,r);return e?{writable:!0,configurable:1!==n.i||\"length\"!==r,enumerable:e.enumerable,value:t[r]}:e},defineProperty:function(){n(11)},getPrototypeOf:function(n){return Object.getPrototypeOf(n.t)},setPrototypeOf:function(){n(12)}},on={};i(en,(function(n,r){on[n]=function(){return arguments[0]=arguments[0][0],r.apply(this,arguments)}})),on.deleteProperty=function(r,t){return true&&isNaN(parseInt(t))&&n(13),on.set.call(this,r,t,void 0)},on.set=function(r,t,e){return true&&\"length\"!==t&&isNaN(parseInt(t))&&n(14),en.set.call(this,r[0],t,e,r[0])};var un=function(){function e(r){var e=this;this.g=B,this.F=!0,this.produce=function(r,i,o){if(\"function\"==typeof r&&\"function\"!=typeof i){var u=i;i=r;var a=e;return function(n){var r=this;void 0===n&&(n=u);for(var t=arguments.length,e=Array(t>1?t-1:0),o=1;o<t;o++)e[o-1]=arguments[o];return a.produce(n,(function(n){var t;return(t=i).call.apply(t,[r,n].concat(e))}))}}var f;if(\"function\"!=typeof i&&n(6),void 0!==o&&\"function\"!=typeof o&&n(7),t(r)){var c=w(e),s=R(e,r,void 0),v=!0;try{f=i(s),v=!1}finally{v?O(c):g(c)}return\"undefined\"!=typeof Promise&&f instanceof Promise?f.then((function(n){return j(c,o),P(n,c)}),(function(n){throw O(c),n})):(j(c,o),P(f,c))}if(!r||\"object\"!=typeof r){if(void 0===(f=i(r))&&(f=r),f===H&&(f=void 0),e.F&&d(f,!0),o){var p=[],l=[];b(\"Patches\").M(r,f,p,l),o(p,l)}return f}n(21,r)},this.produceWithPatches=function(n,r){if(\"function\"==typeof n)return function(r){for(var t=arguments.length,i=Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];return e.produceWithPatches(r,(function(r){return n.apply(void 0,[r].concat(i))}))};var t,i,o=e.produce(n,r,(function(n,r){t=n,i=r}));return\"undefined\"!=typeof Promise&&o instanceof Promise?o.then((function(n){return[n,t,i]})):[o,t,i]},\"boolean\"==typeof(null==r?void 0:r.useProxies)&&this.setUseProxies(r.useProxies),\"boolean\"==typeof(null==r?void 0:r.autoFreeze)&&this.setAutoFreeze(r.autoFreeze)}var i=e.prototype;return i.createDraft=function(e){t(e)||n(8),r(e)&&(e=D(e));var i=w(this),o=R(this,e,void 0);return o[Q].C=!0,g(i),o},i.finishDraft=function(r,t){var e=r&&r[Q]; true&&(e&&e.C||n(9),e.I&&n(10));var i=e.A;return j(i,t),P(void 0,i)},i.setAutoFreeze=function(n){this.F=n},i.setUseProxies=function(r){r&&!B&&n(20),this.g=r},i.applyPatches=function(n,t){var e;for(e=t.length-1;e>=0;e--){var i=t[e];if(0===i.path.length&&\"replace\"===i.op){n=i.value;break}}e>-1&&(t=t.slice(e+1));var o=b(\"Patches\").$;return r(n)?o(n,t):this.produce(n,(function(n){return o(n,t)}))},e}(),an=new un,fn=an.produce,cn=an.produceWithPatches.bind(an),sn=an.setAutoFreeze.bind(an),vn=an.setUseProxies.bind(an),pn=an.applyPatches.bind(an),ln=an.createDraft.bind(an),dn=an.finishDraft.bind(an);/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (fn);\n//# sourceMappingURL=immer.esm.js.map\n\n\n//# sourceURL=webpack://100-ms-demo/./node_modules/immer/dist/immer.esm.mjs?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/amd options */
/******/ 	(() => {
/******/ 		__webpack_require__.amdO = {};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/js/main.js");
/******/ 	
/******/ })()
;